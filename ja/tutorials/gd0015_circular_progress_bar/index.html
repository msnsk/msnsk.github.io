<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>🤖 Godot3 で作る円形プログレスバー | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,Godot3,UI,プログレスバー"><meta name=description content="今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただき"><meta name=author content="gobo"><link rel=canonical href=https://www.peanuts-code.com/ja/tutorials/gd0015_circular_progress_bar/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0015_circular_progress_bar/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0015_circular_progress_bar/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="🤖 Godot3 で作る円形プログレスバー"><meta property="og:description" content="今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただき"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/ja/tutorials/gd0015_circular_progress_bar/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0015_circular_progress_bar/img16.gif"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2022-08-05T11:05:00+09:00"><meta property="article:modified_time" content="2022-08-06T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0015_circular_progress_bar/img16.gif"><meta name=twitter:title content="🤖 Godot3 で作る円形プログレスバー"><meta name=twitter:description content="今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただき"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"🤖 チュートリアル","item":"https://www.peanuts-code.com/ja/tutorials/"},{"@type":"ListItem","position":2,"name":"🤖 Godot3 で作る円形プログレスバー","item":"https://www.peanuts-code.com/ja/tutorials/gd0015_circular_progress_bar/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"🤖 Godot3 で作る円形プログレスバー","name":"🤖 Godot3 で作る円形プログレスバー","description":"今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただき","keywords":["GameDev","GodotEngine","Godot3","UI","プログレスバー"],"articleBody":"今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただきたい。また、チュートリアルの最後のほうで、円形以外の形状（例えばハート型）のプログレスバーもサンプルとしていくつか紹介するのでそちらも興味があればぜひご覧いただきたい。\nこのチュートリアルで最後にできあがるプロジェクトのファイルはGitHubリポジトリ に置いている。.zipファイルをダウンロードしていただき、「End」フォルダ内の「project.godot」ファイルを Godot Engine でインポートしていただければ、直接プロジェクトを確認していただくことも可能だ。\nEnvironment Godot のバージョン: 3.4.4\nコンピュータのOS: macOS 11.6.5\nBasic Articles 以下の記事もお役立てください。\nGodot をダウンロードする Godot のプロジェクトマネージャー Godot の言語設定 準備 円形プログレスバーの画像を用意する お使いのコンピュータに Photoshop や GIMP などの描画アプリがあれば、そちらをお使いいただければOKだ。描画アプリの使い方の詳細はここでは割愛させていただく。難しい場合はググってみてほしい。\n真ん中をくり抜いた円の図形を作成する。この時、円の色は白にする。理由は Godot エディタ上で色の設定が簡単にできるだからだ。白以外の部分は透過させた状態にしておく。画像サイズを縦横 300 px にして png ファイルとして保存する。\nちなみに私の場合は、Mac の「Keynote」アプリ（Windows PC の PowerPointのようなスライドショー作成アプリ）で作成した図形オブジェクトをクリップボードにコピーして、「プレビュー」アプリを起動して、「クリップボードから新規作成」して、png として保存した。\nこの手順を省略したい場合は、下の画像をブラウザから直接ダウンロードしていただければと思う（背景が白いと画像が同化して何もないように見えるかもしれない…）。\n新規プロジェクトを作成する それでは Godot Engine を立ち上げて、新規プロジェクトを作成しよう。プロジェクトの名前はあなたのお好みで決めていただいてOKだ。もし思いつかなければ「Circular Progress Bar」としておこう。\n用意した画像をインポートする ファイルシステムドックで先にリソースフォルダ直下（res://）に「Textures」フォルダを作成する。そこにさきほど用意した円形の画像をドラッグ\u0026ドロップしてインポートする。ファイル名は「CircularProgressBar.png」としておく（ファイルパスは res://Textures/CircularProgressBar.png ）。\nシーンを作る まずは CircularProgressBar シーンを作ろう。\n「シーン」メニュー＞「新規シーン」を選択する。\n「Control」クラスのノードをルートノードとして選択したら、名前を「CircularProgressBar」に変更する。\n一旦ここでシーンを保存する。ファイルパスを「res://CircularProgressBar.tscn」としてシーンを保存する。\n続けて「CircularProgressBar」ルートノードに「TextureProgress」ノードを追加する。\nさらに「CircularProgressBar」ルートノードに「Label」ノードを追加する。\nシーンツリーは以下のようになったはずだ。\nノードを編集する CircularProgressBar (Control) ルートノード 2D ワークスペースで、ツールバー＞「レイアウト」から「全画面」を選択する。\nTextureProgress ノード インスペクターにて、「Fill Mode」プロパティの値を「Clockwise」にする。これは時計回りにぐるりとプログレスバーが進行するスタイルだ。このプロパティはプログレスバーの形状に合わせて適切に選択することを心がけたい。例えば、もしハート型のプログレスバーなら下から上にバーが進行する「Bottom to Top」が相応しいだろう。\n「Texture」＞「Under」プロパティに先にインポートしておいた画像リソース「res://Textures/CircularProgressBar.png」をドラッグして適用しよう。 「Texture」＞「Progress」プロパティも同様にする。\n「Tint」＞「Under」プロパティの色を #000000 (黒) にする。 「Tint」＞「Progress」プロパティは、味気ないが、ひとまずデフォルトの #ffffff (白) のままにしておく\n2D ワークスペースで、ツールバー＞「レイアウト」から「中央」を選択する。\nLabel ノード インスペクターにて「Text」プロパティには初期値として適当に「100%」などと入力しておく。 「Align」プロパティを「Center」にする。 「Valign」プロパティも「Center」にする。\nOpen Font Package をダウンロードする 「Label」ノードにフォントを設定したいので、エディタ上部のタブで「Asset Library」に切り替えて「Open Font Package」をダウンロードしよう。\n上部の「AssetLib」タブをクリックして「Asset Library」に切り替える。 「font」で検索するなどして「Open Font Package」を見つけたら、それをクリックする。\n「Download」をクリックする。\n必要なフォントファイルだけチェックして「Install」をクリックする。今回は「Xolonium-Bold.ttf」を選択。\nファイルシステムドックに表示されれば完了だ。\nLabel ノード（続き） インスペクターに戻って、「Theme Overrides」＞「Fonts」＞「Font」プロパティに「新規 DynamicFont」を適用する。 適用した「DynamicFont」リソースを展開し、「Font」＞「Font Data」プロパティにインストールしたばかりのフォントリソース「res://fonts/xolonium/xolonium-fonts-4.1/ttf/Xolonium-Bold.ttf」を適用する。 同じく「DynamicFont」リソースの「Settings」＞「Size」プロパティを 40 にする。 同じく「DynamicFont」リソースの「Settings」＞「Outline Size」プロパティを 4 にする。 少し戻って、「Theme Overrides」＞「Colors」＞「Font Color」を有効にして、色は #000000 (黒) のままにしておく。\n2D ワークスペースにて、ツールバーの「レイアウト」から「中央」を選択する。\nスクリプトをアタッチしてコーディングする 上下矢印キーでプログレスバーを更新させる ではキーボードの上下矢印キーでプログレスバーの値が変化するようにスクリプトをコーディングしていこう。「TextureProgress」ノードの「Value」プロパティの値を変化させることで、「Texture」＞「Progress」プロパティの表示範囲も連動してくれる。\n「CircularProgressBar」ルートノードにスクリプトをアタッチする。ファイル名を「Progress.gd」としてファイルパスは「res://Progress.gd」とする。 エディタが開いたら、以下のように編集する。 ###Progress.gd### extends Control # TextureProgressノードの参照 onready var progress_bar = $TextureProgress # Labelノードの参照 onready var label = $Label func _ready(): # TextureProgressノードのvalueプロパティを0にリセットする progress_bar.value = 0 func _process(delta): # 入力操作を処理するメソッドを呼び出す get_input() # LabelノードのTextプロパティを更新するメソッドを呼び出す update_label() # 入力操作を処理するメソッド func get_input(): # もし上矢印キーを押したら if Input.is_action_pressed(\"ui_up\"): # TextureProgressノードのValueプロパティの値に1をプラス progress_bar.value += 1 # もし下矢印キーを押したら if Input.is_action_pressed(\"ui_down\"): # TextureProgressノードのValueプロパティの値から1をマイナス progress_bar.value -= 1 # Labelノードのtextプロパティを更新するメソッド func update_label(): # TextureProgressノードのValueプロパティの値に%をつけて表示する label.text = str(progress_bar.value) + \"%\" ではプロジェクトを実行して、上下矢印キーでプログレスバーの値を変化させてみよう。初めてプロジェクトを実行する場合は、メインシーンの選択を促すダイアログにて、現在のシーンをメインシーンとして設定すればOKだ。\nプログレスバーの値に連動して色を変化させる モノクロだと味気ないので、プログレスバーの色も変化させてみよう。今度は、プログレスバーの値の変化に合わせて、徐々にプログレスバーの色も変化させたい。「TextureProgress」ノードの「Value」プロパティの値の更新をより細かくするために「Step」プロパティの値を小さくしておこう。今回は 0.1 に設定する。\nスクリプトを以下のように編集する。\n###Progress.gd### extends Control # TextureProgressノードのtint_progressプロパティ(Colorクラス)の... # h, s, vプロパティの始まりと終わりの値を指定するプロパティ(HSVで色を指定する) export (float) var h_start = 0.0 export (float) var h_end = 0.45 export (float) var s_start = 0.3 export (float) var s_end = 1.0 export (float) var v_start = 0.3 export (float) var v_end = 1.0 onready var progress_bar = $TextureProgress onready var label = $Label func _ready(): progress_bar.value = 0 func _process(delta): get_input() update_label() # 追加：色相を更新するメソッドを呼び出す update_color() func get_input(): if Input.is_action_pressed(\"ui_up\"): progress_bar.value += 1 if Input.is_action_pressed(\"ui_down\"): progress_bar.value -= 1 func update_label(): label.text = str(progress_bar.value) + \"%\" # 追加：色相を更新するメソッド func update_color(): # Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの色相を変化させる progress_bar.tint_progress.h = range_lerp(progress_bar.value, progress_bar.min_value, progress_bar.max_value, h_start, h_end) # Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの彩度を変化させる progress_bar.tint_progress.s = range_lerp(progress_bar.value, progress_bar.min_value, progress_bar.max_value, s_start, s_end) # Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの明度を変化させる progress_bar.tint_progress.v = range_lerp(progress_bar.value, progress_bar.min_value, progress_bar.max_value, v_start, v_end) それでは改めてプロジェクトを実行してみよう。\n色の変化があると美しいような気はするが、あくまでゲームに合わせたデザインを心掛けたい。\nさまざまな形状のプログレスバー ここまで実装してみてお気づきかもしれないが、プログレスバーはその形状となる画像リソースさえあれば、割と応用が効くのだ。\nここまでに作成した「CircularProgressBar.tscn」を複製して、少しプロパティを変更するだけで、色々なパターンのプログレスバーを比較的簡単に作ることができる。いくつかのサンプルを用意したのでご覧いただきたい。\nハート型のプログレスバー ルートノードの「Script Variables」の各プロパティ。色相は紫から赤へ。彩度と明度は最初から高め。\n「TextureProgress」ノードの「Fill Mode」プロパティ。下から上に進行。\n「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。ハートのテクスチャを適用。\nシーンを実行。\nドクロ型のプログレスバー ルートノードの「Script Variables」の各プロパティ。色相は緑から青へ。彩度は低めに抑える。\n「TextureProgress」ノードの「Fill Mode」プロパティ。中央から上下両方向へ。\n「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。ドクロ型のテクスチャを適用。\nシーンを実行。\nフラスコのプログレスバー このサンプルでは「Progress.gd」スクリプトを少し編集する。\n###Progress.gd### # 追加: バーの限界値（初期値はmax_valueに合わせて100） export (float) var value_limit = 100 # 入力操作処理のメソッド func get_input(): if Input.is_action_pressed(\"ui_up\"): progress_bar.value += 1 # 追加：バーの限界値までしかバーを進行させない progress_bar.value = min(progress_bar.value, value_limit) if Input.is_action_pressed(\"ui_down\"): progress_bar.value -= 1 # Labelノードのtextプロパティを更新するメソッド func update_label(): # 追加：Labelの%をバーの限界値を1として計算 var actual_value = floor(progress_bar.value / value_limit * 100) label.text = str(actual_value) + \"%\" ルートノードの「Script Variables」の各プロパティ。ここで新たに追加したプロパティ「Value Limit」の値を 72.5 に変更している。これがちょうどこのあと適用するフラスコのテクスチャ画像に描かれている一番上の目盛りに合う値だ。\n「TextureProgress」ノードの「Fill Mode」プロパティ。下から上へ。\n「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。フラスコのテクスチャを適用。\nシーンを実行。上記の調整で、フラスコのテクスチャの一番上の目盛りでバーの進行が止まる。\n脳みそのプログレスバー ルートノードの「Script Variables」の各プロパティ。\n「TextureProgress」ノードの「Fill Mode」プロパティ。\n「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。\n「TextureProgress」ノードの「Radial Fill」＞「Fill Degrees」を180にして、進行バーの展開できる角度を最大 180° とした。進行バーの回転の中心を脳みそのテクスチャのすぐ下までずらすために「Center Offset」の y の値を 130 とした。\nシーンを実行。\nここまでに作ったものを１つのシーンにまとめてみる。\nメインシーンの設定を変更してプロジェクトを実行するとこんな感じだ。\nおわりに 今回は円形プログレスバーやその他の形状のプログレスバーの作成方法について紹介した。ポイントは以下の通りだ。\nプログレスバーの形状を決めるのはテクスチャ用の画像リソース。 形状に合わせて「TextureProgress」ノードの「Fill Mode」プロパティでバーの進行方向を設定する。 スクリプトで「TextureProgress」ノードの「Value」プロパティの値を変化させることで、進行バーも連動させられる。 スクリプトで「TextureProgress」ノードの「Tint」＞「Progress」プロパティの色を変化させることで、バーの進行状況に合わせて色を変化させられる。 参考 YouTube: Godot Circle Progress Bar Chart YouTube: Creating a circular meter using a single Godot Control Node UPDATE\n2022/08/06 Header の構成とサイズを若干修正\n","wordCount":"5724","inLanguage":"ja","image":"https://www.peanuts-code.com/images/tutorials/gd0015_circular_progress_bar/img16.gif","datePublished":"2022-08-05T11:05:00+09:00","dateModified":"2022-08-06T00:00:00Z","author":{"@type":"Person","name":"gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/ja/tutorials/gd0015_circular_progress_bar/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/ja/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/ja/ title=ホーム><span>ホーム</span></a></li><li><a href=https://www.peanuts-code.com/ja/portfolio/ title=作ったゲーム><span>作ったゲーム</span></a></li><li><a href=https://www.peanuts-code.com/ja/posts/ title=ブログ><span>ブログ</span></a></li><li><a href=https://www.peanuts-code.com/ja/tutorials/ title=チュートリアル><span>チュートリアル</span></a></li><li><a href=https://www.peanuts-code.com/ja/about/ title=サイト情報><span>サイト情報</span></a></li><li><a href=https://www.peanuts-code.com/ja/search/ title="検索 (Alt + /)" accesskey=/><span>検索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/ja/>ホーム</a>&nbsp;»&nbsp;<a href=https://www.peanuts-code.com/ja/tutorials/>🤖 チュートリアル</a></div><h1 class=post-title>🤖 Godot3 で作る円形プログレスバー</h1><div class=post-meta><span title='2022-08-05 11:05:00 +0900 +0900'>2022-08-05</span>&nbsp;·&nbsp;12 分&nbsp;·&nbsp;5724 文字&nbsp;|&nbsp;言語:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/en/tutorials/gd0015_circular_progress_bar/>En</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0015_circular_progress_bar/img16.gif alt="Godot で作る円形プログレスバー"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目次</span></summary><div class=inner><ul><li><a href=#%e6%ba%96%e5%82%99 aria-label=準備>準備</a><ul><li><a href=#%e5%86%86%e5%bd%a2%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc%e3%81%ae%e7%94%bb%e5%83%8f%e3%82%92%e7%94%a8%e6%84%8f%e3%81%99%e3%82%8b aria-label=円形プログレスバーの画像を用意する>円形プログレスバーの画像を用意する</a></li><li><a href=#%e6%96%b0%e8%a6%8f%e3%83%97%e3%83%ad%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e3%82%92%e4%bd%9c%e6%88%90%e3%81%99%e3%82%8b aria-label=新規プロジェクトを作成する>新規プロジェクトを作成する</a></li><li><a href=#%e7%94%a8%e6%84%8f%e3%81%97%e3%81%9f%e7%94%bb%e5%83%8f%e3%82%92%e3%82%a4%e3%83%b3%e3%83%9d%e3%83%bc%e3%83%88%e3%81%99%e3%82%8b aria-label=用意した画像をインポートする>用意した画像をインポートする</a></li></ul></li><li><a href=#%e3%82%b7%e3%83%bc%e3%83%b3%e3%82%92%e4%bd%9c%e3%82%8b aria-label=シーンを作る>シーンを作る</a></li><li><a href=#%e3%83%8e%e3%83%bc%e3%83%89%e3%82%92%e7%b7%a8%e9%9b%86%e3%81%99%e3%82%8b aria-label=ノードを編集する>ノードを編集する</a><ul><li><a href=#circularprogressbar-control-%e3%83%ab%e3%83%bc%e3%83%88%e3%83%8e%e3%83%bc%e3%83%89 aria-label="CircularProgressBar (Control) ルートノード">CircularProgressBar (Control) ルートノード</a></li><li><a href=#textureprogress-%e3%83%8e%e3%83%bc%e3%83%89 aria-label="TextureProgress ノード">TextureProgress ノード</a></li><li><a href=#label-%e3%83%8e%e3%83%bc%e3%83%89 aria-label="Label ノード">Label ノード</a><ul><li><a href=#open-font-package-%e3%82%92%e3%83%80%e3%82%a6%e3%83%b3%e3%83%ad%e3%83%bc%e3%83%89%e3%81%99%e3%82%8b aria-label="Open Font Package をダウンロードする">Open Font Package をダウンロードする</a></li></ul></li><li><a href=#label-%e3%83%8e%e3%83%bc%e3%83%89%e7%b6%9a%e3%81%8d aria-label="Label ノード（続き）">Label ノード（続き）</a></li></ul></li><li><a href=#%e3%82%b9%e3%82%af%e3%83%aa%e3%83%97%e3%83%88%e3%82%92%e3%82%a2%e3%82%bf%e3%83%83%e3%83%81%e3%81%97%e3%81%a6%e3%82%b3%e3%83%bc%e3%83%87%e3%82%a3%e3%83%b3%e3%82%b0%e3%81%99%e3%82%8b aria-label=スクリプトをアタッチしてコーディングする>スクリプトをアタッチしてコーディングする</a><ul><li><a href=#%e4%b8%8a%e4%b8%8b%e7%9f%a2%e5%8d%b0%e3%82%ad%e3%83%bc%e3%81%a7%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc%e3%82%92%e6%9b%b4%e6%96%b0%e3%81%95%e3%81%9b%e3%82%8b aria-label=上下矢印キーでプログレスバーを更新させる>上下矢印キーでプログレスバーを更新させる</a></li><li><a href=#%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc%e3%81%ae%e5%80%a4%e3%81%ab%e9%80%a3%e5%8b%95%e3%81%97%e3%81%a6%e8%89%b2%e3%82%92%e5%a4%89%e5%8c%96%e3%81%95%e3%81%9b%e3%82%8b aria-label=プログレスバーの値に連動して色を変化させる>プログレスバーの値に連動して色を変化させる</a></li></ul></li><li><a href=#%e3%81%95%e3%81%be%e3%81%96%e3%81%be%e3%81%aa%e5%bd%a2%e7%8a%b6%e3%81%ae%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc aria-label=さまざまな形状のプログレスバー>さまざまな形状のプログレスバー</a><ul><li><a href=#%e3%83%8f%e3%83%bc%e3%83%88%e5%9e%8b%e3%81%ae%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc aria-label=ハート型のプログレスバー>ハート型のプログレスバー</a></li><li><a href=#%e3%83%89%e3%82%af%e3%83%ad%e5%9e%8b%e3%81%ae%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc aria-label=ドクロ型のプログレスバー>ドクロ型のプログレスバー</a></li><li><a href=#%e3%83%95%e3%83%a9%e3%82%b9%e3%82%b3%e3%81%ae%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc aria-label=フラスコのプログレスバー>フラスコのプログレスバー</a></li><li><a href=#%e8%84%b3%e3%81%bf%e3%81%9d%e3%81%ae%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc aria-label=脳みそのプログレスバー>脳みそのプログレスバー</a></li></ul></li><li><a href=#%e3%81%8a%e3%82%8f%e3%82%8a%e3%81%ab aria-label=おわりに>おわりに</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><p>今回は、円形のプログレスバーの作り方を紹介する。プログレスバーを、一般的な縦向きや横向きではなく、円形にすることによって、画面上のちょっとしたアクセントにもなるので使い所があれば是非参考にしていただきたい。また、チュートリアルの最後のほうで、円形以外の形状（例えばハート型）のプログレスバーもサンプルとしていくつか紹介するのでそちらも興味があればぜひご覧いただきたい。</p><p>このチュートリアルで最後にできあがるプロジェクトのファイルは<a href=https://github.com/msnsk/CircularProgressBar.git target=_blank>GitHubリポジトリ</a>
に置いている。.zipファイルをダウンロードしていただき、「End」フォルダ内の「project.godot」ファイルを Godot Engine でインポートしていただければ、直接プロジェクトを確認していただくことも可能だ。<br><br></p><blockquote><p><strong><span style=color:salmon>Environment</span></strong><br><em>Godot のバージョン: <strong>3.4.4</strong></em><br><em>コンピュータのOS: <strong>macOS 11.6.5</strong></em></p></blockquote><blockquote><p><strong><span style=color:salmon>Basic Articles</span></strong><br><em>以下の記事もお役立てください。<br><a href=https://www.peanuts-code.com/ja/tutorials/gd0001_download/ title="Godot をダウンロードする">Godot をダウンロードする</a><br><a href=https://www.peanuts-code.com/ja/tutorials/gd0002_project_manager/ title="Godot のプロジェクトマネージャー">Godot のプロジェクトマネージャー</a><br><a href=https://www.peanuts-code.com/ja/tutorials/gd0003_change_language/ title="Godot の言語設定">Godot の言語設定</a></em></p></blockquote><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=準備>準備<a hidden class=anchor aria-hidden=true href=#準備>#</a></h2><h3 id=円形プログレスバーの画像を用意する>円形プログレスバーの画像を用意する<a hidden class=anchor aria-hidden=true href=#円形プログレスバーの画像を用意する>#</a></h3><p>お使いのコンピュータに Photoshop や GIMP などの描画アプリがあれば、そちらをお使いいただければOKだ。描画アプリの使い方の詳細はここでは割愛させていただく。難しい場合はググってみてほしい。</p><p>真ん中をくり抜いた円の図形を作成する。この時、円の色は白にする。理由は Godot エディタ上で色の設定が簡単にできるだからだ。白以外の部分は透過させた状態にしておく。画像サイズを縦横 300 px にして png ファイルとして保存する。</p><p>ちなみに私の場合は、Mac の「Keynote」アプリ（Windows PC の PowerPointのようなスライドショー作成アプリ）で作成した図形オブジェクトをクリップボードにコピーして、「プレビュー」アプリを起動して、「クリップボードから新規作成」して、png として保存した。</p><p>この手順を省略したい場合は、下の画像をブラウザから直接ダウンロードしていただければと思う（背景が白いと画像が同化して何もないように見えるかもしれない&mldr;）。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/CircularProgressBar.png alt="circular progress bar image"></p><br><h3 id=新規プロジェクトを作成する>新規プロジェクトを作成する<a hidden class=anchor aria-hidden=true href=#新規プロジェクトを作成する>#</a></h3><p>それでは Godot Engine を立ち上げて、新規プロジェクトを作成しよう。プロジェクトの名前はあなたのお好みで決めていただいてOKだ。もし思いつかなければ「Circular Progress Bar」としておこう。</p><br><h3 id=用意した画像をインポートする>用意した画像をインポートする<a hidden class=anchor aria-hidden=true href=#用意した画像をインポートする>#</a></h3><p>ファイルシステムドックで先にリソースフォルダ直下（res://）に「Textures」フォルダを作成する。そこにさきほど用意した円形の画像をドラッグ&ドロップしてインポートする。ファイル名は「CircularProgressBar.png」としておく（ファイルパスは res://Textures/CircularProgressBar.png ）。</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=シーンを作る>シーンを作る<a hidden class=anchor aria-hidden=true href=#シーンを作る>#</a></h2><p>まずは <strong>CircularProgressBar</strong> シーンを作ろう。</p><ol><li><p>「シーン」メニュー＞「新規シーン」を選択する。</p></li><li><p>「Control」クラスのノードをルートノードとして選択したら、名前を「CircularProgressBar」に変更する。</p></li><li><p>一旦ここでシーンを保存する。ファイルパスを「res://CircularProgressBar.tscn」としてシーンを保存する。</p></li><li><p>続けて「CircularProgressBar」ルートノードに「TextureProgress」ノードを追加する。</p></li><li><p>さらに「CircularProgressBar」ルートノードに「Label」ノードを追加する。</p></li></ol><p>シーンツリーは以下のようになったはずだ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img1.png alt="scene tree"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=ノードを編集する>ノードを編集する<a hidden class=anchor aria-hidden=true href=#ノードを編集する>#</a></h2><h3 id=circularprogressbar-control-ルートノード>CircularProgressBar (Control) ルートノード<a hidden class=anchor aria-hidden=true href=#circularprogressbar-control-ルートノード>#</a></h3><ol><li>2D ワークスペースで、ツールバー＞「レイアウト」から「全画面」を選択する。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img2.png alt="CircularProgressBar - 2D workspace"></li></ol><br><h3 id=textureprogress-ノード>TextureProgress ノード<a hidden class=anchor aria-hidden=true href=#textureprogress-ノード>#</a></h3><ol><li>インスペクターにて、「Fill Mode」プロパティの値を「Clockwise」にする。これは時計回りにぐるりとプログレスバーが進行するスタイルだ。このプロパティはプログレスバーの形状に合わせて適切に選択することを心がけたい。例えば、もしハート型のプログレスバーなら下から上にバーが進行する「Bottom to Top」が相応しいだろう。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img3.png alt="TextureProgress - Fill Mode"></li><li>「Texture」＞「Under」プロパティに先にインポートしておいた画像リソース「res://Textures/CircularProgressBar.png」をドラッグして適用しよう。</li><li>「Texture」＞「Progress」プロパティも同様にする。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img4.png alt="TextureProgress - Texture"></li><li>「Tint」＞「Under」プロパティの色を #000000 (黒) にする。</li><li>「Tint」＞「Progress」プロパティは、味気ないが、ひとまずデフォルトの #ffffff (白) のままにしておく<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img5.png alt="TextureProgress - Tint"></li><li>2D ワークスペースで、ツールバー＞「レイアウト」から「中央」を選択する。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img6.png alt="TextureProgress - 2D workspace"><br><br></li></ol><h3 id=label-ノード>Label ノード<a hidden class=anchor aria-hidden=true href=#label-ノード>#</a></h3><ol><li>インスペクターにて「Text」プロパティには初期値として適当に「100%」などと入力しておく。</li><li>「Align」プロパティを「Center」にする。</li><li>「Valign」プロパティも「Center」にする。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img7.png alt="Label - Text, Align, Valign"><br><br></li></ol><h4 id=open-font-package-をダウンロードする>Open Font Package をダウンロードする<a hidden class=anchor aria-hidden=true href=#open-font-package-をダウンロードする>#</a></h4><p>「Label」ノードにフォントを設定したいので、エディタ上部のタブで「Asset Library」に切り替えて「Open Font Package」をダウンロードしよう。</p><ol><li>上部の「AssetLib」タブをクリックして「Asset Library」に切り替える。</li><li>「font」で検索するなどして「Open Font Package」を見つけたら、それをクリックする。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img8.png alt=AssetLib></li><li>「Download」をクリックする。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img9.png alt="AssetLib - Open Font Package download"></li><li>必要なフォントファイルだけチェックして「Install」をクリックする。今回は「Xolonium-Bold.ttf」を選択。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img10.png alt="AssetLib - Open Font Package install"></li><li>ファイルシステムドックに表示されれば完了だ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img11.png alt="AssetLib - Open Font Package in file system"><br><br></li></ol><h3 id=label-ノード続き>Label ノード（続き）<a hidden class=anchor aria-hidden=true href=#label-ノード続き>#</a></h3><ol start=4><li>インスペクターに戻って、「Theme Overrides」＞「Fonts」＞「Font」プロパティに「新規 DynamicFont」を適用する。</li><li>適用した「DynamicFont」リソースを展開し、「Font」＞「Font Data」プロパティにインストールしたばかりのフォントリソース「res://fonts/xolonium/xolonium-fonts-4.1/ttf/Xolonium-Bold.ttf」を適用する。</li><li>同じく「DynamicFont」リソースの「Settings」＞「Size」プロパティを 40 にする。</li><li>同じく「DynamicFont」リソースの「Settings」＞「Outline Size」プロパティを 4 にする。</li><li>少し戻って、「Theme Overrides」＞「Colors」＞「Font Color」を有効にして、色は #000000 (黒) のままにしておく。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img12.png alt="Label - Theme Overrides"></li><li>2D ワークスペースにて、ツールバーの「レイアウト」から「中央」を選択する。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img13.png alt="Label - 2D workspace"><br><br></li></ol><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=スクリプトをアタッチしてコーディングする>スクリプトをアタッチしてコーディングする<a hidden class=anchor aria-hidden=true href=#スクリプトをアタッチしてコーディングする>#</a></h2><h3 id=上下矢印キーでプログレスバーを更新させる>上下矢印キーでプログレスバーを更新させる<a hidden class=anchor aria-hidden=true href=#上下矢印キーでプログレスバーを更新させる>#</a></h3><p>ではキーボードの上下矢印キーでプログレスバーの値が変化するようにスクリプトをコーディングしていこう。「TextureProgress」ノードの「Value」プロパティの値を変化させることで、「Texture」＞「Progress」プロパティの表示範囲も連動してくれる。</p><ol><li>「CircularProgressBar」ルートノードにスクリプトをアタッチする。ファイル名を「Progress.gd」としてファイルパスは「res://Progress.gd」とする。</li><li>エディタが開いたら、以下のように編集する。</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Progress.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Control</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># TextureProgressノードの参照</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> progress_bar <span style=color:#f92672>=</span> <span style=color:#a6e22e>$TextureProgress</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Labelノードの参照</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> label <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Label</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># TextureProgressノードのvalueプロパティを0にリセットする</span>
</span></span><span style=display:flex><span>	progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_process</span>(delta):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 入力操作を処理するメソッドを呼び出す</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>get_input</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># LabelノードのTextプロパティを更新するメソッドを呼び出す</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>update_label</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 入力操作を処理するメソッド</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>get_input</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># もし上矢印キーを押したら</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_up&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># TextureProgressノードのValueプロパティの値に1をプラス</span>
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># もし下矢印キーを押したら</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_down&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># TextureProgressノードのValueプロパティの値から1をマイナス</span>
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Labelノードのtextプロパティを更新するメソッド</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_label</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># TextureProgressノードのValueプロパティの値に%をつけて表示する</span>
</span></span><span style=display:flex><span>	label<span style=color:#f92672>.</span>text <span style=color:#f92672>=</span> str(progress_bar<span style=color:#f92672>.</span>value) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;%&#34;</span>
</span></span></code></pre></div><br><p>ではプロジェクトを実行して、上下矢印キーでプログレスバーの値を変化させてみよう。初めてプロジェクトを実行する場合は、メインシーンの選択を促すダイアログにて、現在のシーンをメインシーンとして設定すればOKだ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img14.gif alt="run project"></p><br><h3 id=プログレスバーの値に連動して色を変化させる>プログレスバーの値に連動して色を変化させる<a hidden class=anchor aria-hidden=true href=#プログレスバーの値に連動して色を変化させる>#</a></h3><p>モノクロだと味気ないので、プログレスバーの色も変化させてみよう。今度は、プログレスバーの値の変化に合わせて、徐々にプログレスバーの色も変化させたい。「TextureProgress」ノードの「Value」プロパティの値の更新をより細かくするために「Step」プロパティの値を小さくしておこう。今回は 0.1 に設定する。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img15.png alt="TextureProgress - step"></p><p>スクリプトを以下のように編集する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Progress.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Control</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># TextureProgressノードのtint_progressプロパティ(Colorクラス)の...</span>
</span></span><span style=display:flex><span><span style=color:#75715e># h, s, vプロパティの始まりと終わりの値を指定するプロパティ(HSVで色を指定する)</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> h_start <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.0</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> h_end <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.45</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> s_start <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.3</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> s_end <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> v_start <span style=color:#f92672>=</span> <span style=color:#ae81ff>0.3</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> v_end <span style=color:#f92672>=</span> <span style=color:#ae81ff>1.0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> progress_bar <span style=color:#f92672>=</span> <span style=color:#a6e22e>$TextureProgress</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> label <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Label</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>	progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_process</span>(delta):
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>get_input</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>update_label</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># 追加：色相を更新するメソッドを呼び出す</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>update_color</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>get_input</span>():
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_up&#34;</span>):
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_down&#34;</span>):
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_label</span>():
</span></span><span style=display:flex><span>	label<span style=color:#f92672>.</span>text <span style=color:#f92672>=</span> str(progress_bar<span style=color:#f92672>.</span>value) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;%&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 追加：色相を更新するメソッド</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_color</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの色相を変化させる</span>
</span></span><span style=display:flex><span>	progress_bar<span style=color:#f92672>.</span>tint_progress<span style=color:#f92672>.</span>h <span style=color:#f92672>=</span> <span style=color:#a6e22e>range_lerp</span>(progress_bar<span style=color:#f92672>.</span>value, progress_bar<span style=color:#f92672>.</span>min_value, progress_bar<span style=color:#f92672>.</span>max_value, h_start, h_end)
</span></span><span style=display:flex><span>    <span style=color:#75715e># Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの彩度を変化させる</span>
</span></span><span style=display:flex><span>	progress_bar<span style=color:#f92672>.</span>tint_progress<span style=color:#f92672>.</span>s <span style=color:#f92672>=</span> <span style=color:#a6e22e>range_lerp</span>(progress_bar<span style=color:#f92672>.</span>value, progress_bar<span style=color:#f92672>.</span>min_value, progress_bar<span style=color:#f92672>.</span>max_value, s_start, s_end)
</span></span><span style=display:flex><span>    <span style=color:#75715e># Valueプロパティの値がminからmaxへ変化するのに合わせてプログレスバーの明度を変化させる</span>
</span></span><span style=display:flex><span>	progress_bar<span style=color:#f92672>.</span>tint_progress<span style=color:#f92672>.</span>v <span style=color:#f92672>=</span> <span style=color:#a6e22e>range_lerp</span>(progress_bar<span style=color:#f92672>.</span>value, progress_bar<span style=color:#f92672>.</span>min_value, progress_bar<span style=color:#f92672>.</span>max_value, v_start, v_end)
</span></span></code></pre></div><br><p>それでは改めてプロジェクトを実行してみよう。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img16.gif alt="run project"></p><p>色の変化があると美しいような気はするが、あくまでゲームに合わせたデザインを心掛けたい。</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=さまざまな形状のプログレスバー>さまざまな形状のプログレスバー<a hidden class=anchor aria-hidden=true href=#さまざまな形状のプログレスバー>#</a></h2><p>ここまで実装してみてお気づきかもしれないが、プログレスバーはその形状となる画像リソースさえあれば、割と応用が効くのだ。</p><p>ここまでに作成した「CircularProgressBar.tscn」を複製して、少しプロパティを変更するだけで、色々なパターンのプログレスバーを比較的簡単に作ることができる。いくつかのサンプルを用意したのでご覧いただきたい。</p><br><h3 id=ハート型のプログレスバー>ハート型のプログレスバー<a hidden class=anchor aria-hidden=true href=#ハート型のプログレスバー>#</a></h3><p>ルートノードの「Script Variables」の各プロパティ。色相は紫から赤へ。彩度と明度は最初から高め。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img19_1.png alt="HeartProgress - Script Variables"></p><p>「TextureProgress」ノードの「Fill Mode」プロパティ。下から上に進行。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img19_2.png alt="HeartProgress - Fill Mode"></p><p>「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。ハートのテクスチャを適用。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img19_3.png alt="HeartProgress - Textures"></p><p>シーンを実行。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img19.gif alt="run scene - HeartProgress"></p><br><h3 id=ドクロ型のプログレスバー>ドクロ型のプログレスバー<a hidden class=anchor aria-hidden=true href=#ドクロ型のプログレスバー>#</a></h3><p>ルートノードの「Script Variables」の各プロパティ。色相は緑から青へ。彩度は低めに抑える。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img20_1.png alt="SkullProgress - Script Variables"></p><p>「TextureProgress」ノードの「Fill Mode」プロパティ。中央から上下両方向へ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img20_2.png alt="SkullProgress - Fill Mode"></p><p>「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。ドクロ型のテクスチャを適用。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img20_3.png alt="SkullProgress - Textures"></p><p>シーンを実行。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img20.gif alt="run scene - SkullProgress"></p><br><h3 id=フラスコのプログレスバー>フラスコのプログレスバー<a hidden class=anchor aria-hidden=true href=#フラスコのプログレスバー>#</a></h3><p>このサンプルでは「Progress.gd」スクリプトを少し編集する。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Progress.gd###</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 追加: バーの限界値（初期値はmax_valueに合わせて100）</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> value_limit <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 入力操作処理のメソッド</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>get_input</span>():
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_up&#34;</span>):
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># 追加：バーの限界値までしかバーを進行させない</span>
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>=</span> min(progress_bar<span style=color:#f92672>.</span>value, value_limit)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;ui_down&#34;</span>):
</span></span><span style=display:flex><span>		progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Labelノードのtextプロパティを更新するメソッド</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_label</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># 追加：Labelの%をバーの限界値を1として計算</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> actual_value <span style=color:#f92672>=</span> floor(progress_bar<span style=color:#f92672>.</span>value <span style=color:#f92672>/</span> value_limit <span style=color:#f92672>*</span> <span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>	label<span style=color:#f92672>.</span>text <span style=color:#f92672>=</span> str(actual_value) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;%&#34;</span>
</span></span></code></pre></div><br><p>ルートノードの「Script Variables」の各プロパティ。ここで新たに追加したプロパティ「Value Limit」の値を 72.5 に変更している。これがちょうどこのあと適用するフラスコのテクスチャ画像に描かれている一番上の目盛りに合う値だ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img21.png alt="FrascoProgress - Script Variables"></p><p>「TextureProgress」ノードの「Fill Mode」プロパティ。下から上へ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img21_2.png alt="FrascoProgress - Fill Mode"></p><p>「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。フラスコのテクスチャを適用。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img21_3.png alt="FrascoProgress - Textures"></p><p>シーンを実行。上記の調整で、フラスコのテクスチャの一番上の目盛りでバーの進行が止まる。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img22.gif alt="run scene - FrascoProgress"></p><br><h3 id=脳みそのプログレスバー>脳みそのプログレスバー<a hidden class=anchor aria-hidden=true href=#脳みそのプログレスバー>#</a></h3><p>ルートノードの「Script Variables」の各プロパティ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img23_1.png alt="BrainProgress - Script Variables"></p><p>「TextureProgress」ノードの「Fill Mode」プロパティ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img23_2.png alt="BrainProgress - Fill Mode"></p><p>「TextureProgress」ノードの「Textures」＞「Under」/「Progress」プロパティ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img23_3.png alt="BrainProgress - Textures"></p><p>「TextureProgress」ノードの「Radial Fill」＞「Fill Degrees」を180にして、進行バーの展開できる角度を最大 180° とした。進行バーの回転の中心を脳みそのテクスチャのすぐ下までずらすために「Center Offset」の y の値を 130 とした。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img23_4.png alt="BrainProgress - Textures"></p><p>シーンを実行。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img23.gif alt="run scene - BrainProgress"></p><br><p>ここまでに作ったものを１つのシーンにまとめてみる。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img24.png alt="new scene - AllProgress"></p><p>メインシーンの設定を変更してプロジェクトを実行するとこんな感じだ。<br><img loading=lazy src=/images/tutorials/gd0015_circular_progress_bar/img24.gif alt="run project - AllProgress"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h2 id=おわりに>おわりに<a hidden class=anchor aria-hidden=true href=#おわりに>#</a></h2><p>今回は円形プログレスバーやその他の形状のプログレスバーの作成方法について紹介した。ポイントは以下の通りだ。</p><ul><li>プログレスバーの形状を決めるのはテクスチャ用の画像リソース。</li><li>形状に合わせて「TextureProgress」ノードの「Fill Mode」プロパティでバーの進行方向を設定する。</li><li>スクリプトで「TextureProgress」ノードの「Value」プロパティの値を変化させることで、進行バーも連動させられる。</li><li>スクリプトで「TextureProgress」ノードの「Tint」＞「Progress」プロパティの色を変化させることで、バーの進行状況に合わせて色を変化させられる。</li></ul><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=https://youtu.be/p3XmbDFMaks target=_blank>YouTube: Godot Circle Progress Bar Chart</a></li><li><a href=https://youtu.be/usLIlbk9P88 target=_blank>YouTube: Creating a circular meter using a single Godot Control Node</a></li></ul><br><p><strong>UPDATE</strong><br>2022/08/06 Header の構成とサイズを若干修正</p></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Godot3 で作る円形プログレスバー on x" href="https://x.com/intent/tweet/?text=%f0%9f%a4%96%20Godot3%20%e3%81%a7%e4%bd%9c%e3%82%8b%e5%86%86%e5%bd%a2%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0015_circular_progress_bar%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2cUI%2c%e3%83%97%e3%83%ad%e3%82%b0%e3%83%ac%e3%82%b9%e3%83%90%e3%83%bc"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Godot3 で作る円形プログレスバー on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0015_circular_progress_bar%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/ja/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/ja/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/ja/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/ja/tags/ui/>UI</a></li><li><a href=https://www.peanuts-code.com/ja/tags/%E3%83%97%E3%83%AD%E3%82%B0%E3%83%AC%E3%82%B9%E3%83%90%E3%83%BC/>プログレスバー</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/ja/tutorials/gd0016_2d_path_finding/><span class=title>« 前へ</span><br><span>🤖 Godot3 で作る 2D 経路探索</span>
</a><a class=next href=https://www.peanuts-code.com/ja/tutorials/gd0014_screen_shake/><span class=title>次へ »</span><br><span>🤖 Godot3 で作る画面揺れ</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/ja/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="コピー";function s(){t.innerHTML="コピーされました!",setTimeout(()=>{t.innerHTML="コピー"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>