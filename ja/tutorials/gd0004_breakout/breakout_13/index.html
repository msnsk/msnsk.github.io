<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ | Peanuts Code</title>
<meta name=keywords content="GodotEngine,GameDev,ãƒ–ãƒ­ãƒƒã‚¯å´©ã—,2D"><meta name=description content="Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚


Memo:

éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚
Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—
"><meta name=author content="gobo"><link rel=canonical href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_13/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_13/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼"><meta property="og:description" content="Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚


Memo:

éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚
Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—
"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_13/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0004_breakout/breakout_13/img_16.gif"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2021-12-23T16:55:59+09:00"><meta property="article:modified_time" content="2021-12-23T16:55:59+09:00"><meta property="og:site_name" content="Peanuts Code ğŸ¥œ"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0004_breakout/breakout_13/img_16.gif"><meta name=twitter:title content="Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼"><meta name=twitter:description content="Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚


Memo:

éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚
Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ¤– ãƒãƒ¥ãƒ¼ãƒˆ","item":"https://www.peanuts-code.com/ja/tutorials/"},{"@type":"ListItem","position":2,"name":"ğŸ¤– ã‚·ãƒªãƒ¼ã‚ºï¼šGodot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—","item":"https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/"},{"@type":"ListItem","position":3,"name":"Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼","item":"https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_13/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼","name":"Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼","description":"Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚\nMemo: éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚\nGodot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— ","keywords":["GodotEngine","GameDev","ãƒ–ãƒ­ãƒƒã‚¯å´©ã—","2D"],"articleBody":"Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚\nMemo: éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚\nGodot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— HUD ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ ä»Šå›ã€ã€Œãƒã‚¤ã‚¹ã‚³ã‚¢ã€ã¨ã€Œãƒã‚¤ãƒ¬ãƒ™ãƒ«ã€ã®è¦ç´ ã‚’ã‚²ãƒ¼ãƒ ã«è¿½åŠ ã™ã‚‹ã€‚ã“ã‚Œã«ä¼´ã„ã€HUD ã«ã‚‚ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã—ã¦ã„ãã€‚\nã§ã¯ã€ã€ŒGame.tscnã€ã‚·ãƒ¼ãƒ³ã‚’é–‹ã„ã¦æ‰‹é †ã‚’é€²ã‚ã¦ã„ã“ã†ã€‚\nãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹ ã€ŒHUDã€ãƒãƒ¼ãƒ‰ã®ã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰ã®æ¬¡ã«ã€æ–°ãŸã«ã€ŒVBoxContainerã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€åå‰ã‚’ã€ŒMidBoxã€ã«å¤‰æ›´ã—ã‚ˆã†ã€‚\nã•ã‚‰ã«ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã«ã¯ã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ 2 ã¤è¿½åŠ ã—ã€ãã‚Œãã‚Œã®åå‰ã‚’ã€ŒHighScoreã€ã€ã€ŒHighLevelã€ã«å¤‰æ›´ã—ã‚ˆã†ã€‚ã“ã‚Œã§ã€ŒHUDã€ãƒãƒ¼ãƒ‰ã®æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ãŸã¯ãšã ã€‚\nè¿½åŠ ã—ãŸãƒãƒ¼ãƒ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹ ã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰ã¨ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã®ä½ç½®ã¨æ ã®å¤§ãã•ã‚’ç·¨é›†ã™ã‚‹ã€‚HUD ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ã®é…ç½®ã®éƒ½åˆä¸Šã€å…¨ã¦ç”»é¢ä¸Šç«¯ã«ä¸¦ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n2D ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã€ŒMidBoxã€ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ç”»é¢ä¸Šç«¯ä¸­å¤®ã«é…ç½®ã—ã¦ã‚‚å•é¡Œãªã„ãŒã€ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§æ•°å€¤ã‚’èª¿æ•´ã™ã‚‹ãªã‚‰ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã§ã€ŒMarginã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä»¥ä¸‹ã®å€¤ã«ãªã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã€‚\nã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰\nã€ŒMidBoxã€ãƒãƒ¼ãƒ‰\nã“ã‚Œã§ã€ç”»é¢ä¸Šç«¯ä¸­å¤®ã«ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ãŒé…ç½®ã•ã‚ŒãŸã€‚\næ¬¡ã«ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã®å­ãƒãƒ¼ãƒ‰ã§ã‚ã‚‹ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã¨ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã€‚\nã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼šã€ŒH Scr: 0ã€ ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼šã€ŒH Lvl: 1ã€ ã“ã®æ™‚ç‚¹ã§ã€ã‚²ãƒ¼ãƒ ç”»é¢ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ãŸã¯ãšã ã€‚\nGame.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹ HUD ã®è¦‹ãŸç›®ã¯æ›´æ–°ã§ããŸã®ã§ã€æ¬¡ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¡¨ç¤ºã•ã‚Œã‚‹å€¤ã‚’åˆ¶å¾¡ã—ã¦ã„ãã€‚ã“ã“ã§ã€ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã¨ä¿å­˜ã•ã‚ŒãŸã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€æ©Ÿèƒ½ã‚’æ–°ãŸã«å®Ÿè£…ã—ã¦ã„ãã€‚\nã§ã¯ã“ã“ã‹ã‚‰ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚\nå¿…è¦ãªå®šæ•°ã¨å¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹ ã¾ãšã¯æ–°ãŸã«ã„ãã¤ã‹å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ãã€‚ã€Œ# è¿½åŠ ã€ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜è¿°ã—ã¦ã„ã‚‹è¡ŒãŒä»Šå›å®šç¾©ã—ãŸå®šæ•°ã¨å¤‰æ•°ã ã€‚\nextends Node2D const POINT = 100 const MAX_LIFE = 5 const SCORE_FILE_PATH = \"user://score_record.save\" # è¿½åŠ  export var drop_rate = 0.2 var level_num: int = 1 var high_level_num: int = 0 # è¿½åŠ  var score: int = 0 var high_score: int = 0 # è¿½åŠ  #ï¼ˆä¸­ç•¥ï¼‰ onready var hud_level = $HUD/LeftBox/Level onready var hud_high_level = $HUD/MidBox/HighLevel # è¿½åŠ  onready var hud_score = $HUD/LeftBox/Score onready var hud_high_score = $HUD/MidBox/HighScore # è¿½åŠ  #ï¼ˆå¾Œç•¥ï¼‰ ã¾ãšconstã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å®šç¾©ã—ã¦ã„ã‚‹ã®ã¯SCORE_FILE_PATHã¨ã„ã†å®šæ•°ã ã€‚ãã®å€¤ã‚’\"user://score_record.save\"ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã€‚\nã“ã®ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®é ­ã«user://ã‚’ã¤ã‘ã‚‹ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ‰€å®šã®å ´æ‰€ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ãã‚Œã‚‹ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚ã°ã€ã‚·ãƒ¼ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã€ã‚²ãƒ¼ãƒ ã‚’ä¸€åº¦çµ‚äº†ã—ã¦ã‹ã‚‰å†é–‹ã—ã¦ã‚‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã€ä»¥å‰ãƒ—ãƒ¬ã‚¤ã—ãŸæ™‚ã®çŠ¶æ…‹ã‚’å¼•ãç¶™ãã“ã¨ãŒå¯èƒ½ã ã€‚\næ¬¡ã«å¤‰æ•°high_level_numã ãŒã€ã“ã‚Œã¯ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«å‰å›ã¾ã§ã®ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’æ¸¡ã—ã¦ãŠããŸã‚ã®ã‚‚ã®ã ã€‚åŒæ§˜ã«ã€ã‚‚ã†ä¸€ã¤ã®å¤‰æ•°high_scoreã«ã¯ã€ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«å‰å›ã¾ã§ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚’æ¸¡ã—ã¦ãŠãã€‚ã¾ãŸã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã®æ™‚ã«ã€è¨˜éŒ²ãŒæ›´æ–°ã•ã‚Œã‚‹éš›ã«ã‚‚åˆ©ç”¨ã™ã‚‹ã€‚\nç¶šã„ã¦onreadyã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä»˜ãã®å¤‰æ•°ã ãŒã€ã“ã‚Œã‚‰ã¯ç‰¹å®šã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã™ã®ã«ä½¿ã£ã¦ã„ã‚‹ã€‚hud_high_levelã¯ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã‚’ã€hud_high_scoreã¯ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã—ã¦ã„ã‚‹ã€‚\nä¿å­˜ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ å¼•ãç¶šãã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã€ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚\nfunc save_data(): var data = { \"last_level\": level_num, \"high_level\": high_level_num, \"last_score\": score, \"high_score\": high_score, } var file = File.new() file.open(SCORE_FILE_PATH, File.WRITE) file.store_line(to_json(data)) file.close() save_dataã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ãŸã€‚ã¾ãšå¤‰æ•°dataã‚’ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®šç¾©ã—ã¦ã„ã‚‹ã€‚ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®šç¾©ã—ãŸå¤‰æ•°ã¯ã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å¤–ã§ã¯ä½¿ãˆãªã„ã®ã§æ³¨æ„ã—ã¦ã»ã—ã„ã€‚dataã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã§{\"key\": value}ã®çµ„ã¿åˆã‚ã›ã§è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã“ã§ã¯ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã—ãŸã„å€¤ã‚’æ ¼ç´ã—ãŸlevel_numã€high_level_numã€scoreã€high_scoreã®4ã¤ã®å¤‰æ•°ãã‚Œãã‚Œã‚’ Value ã¨ã—ã€å¯¾å¿œã™ã‚‹ Key ã‚’\"last_level\"ã€â€œhigh_levelâ€ã€â€œlast_scoreâ€ã€â€œhigh_score\"ã¨ã—ã¦å®šç¾©ã—ãŸã€‚\nãã®ã‚ã¨ã¯fileã¨ã„ã†å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚newãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ä½œæˆã•ã‚ŒãŸFileã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’å€¤ã¨ã—ã¦ä»£å…¥ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œä»¥é™Fileã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç¶šãã€‚\nãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã«ã¯ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãå¿…è¦ãŒã‚ã‚‹ã€‚openã¯ç¬¬ä¸€å¼•æ•°ã§æŒ‡å®šã—ãŸãƒ‘ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ããƒ¡ã‚½ãƒƒãƒ‰ã ã€‚ã“ã“ã§ã¯ã€å…ˆã«å®šç¾©ã—ãŸå®šæ•°SCORE_FILE_PATHï¼ˆ\"user://score_record.save\"ï¼‰ã‚’ç¬¬ä¸€å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¦ã„ã‚‹ã€‚ç¬¬äºŒå¼•æ•°ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ãã®ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã“ã§ã¯ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ä¿å­˜ã—ãŸã„ã®ã§ã€WRITEã‚’æŒ‡å®šã—ã¦æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ã„ã‚‹ã€‚\næ¬¡ã«store_lineãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ã„ã‚‹ã€‚store_xxxã¨ã„ã†åå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»–ã«ã‚‚ã„ãã¤ã‹ã‚ã‚‹ãŒã€ã“ã®store_lineã¯1è¡Œã®stringå‹ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€ã€‚ãã—ã¦ã€store_lineã®å¼•æ•°ãŒæ›¸ãè¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ã«ãªã‚‹ãŒã€ã“ã“ã§ã¯å…ˆã«å®šç¾©ã—ãŸè¾æ›¸å‹ã®å¤‰æ•°dataã‚’to_jsonã§å¤‰æ›ã—ãŸå€¤ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚dataã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã§ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸Šã¯è¦‹ã‚„ã™ã•ã®ãŸã‚æ”¹è¡Œã—ã¦ã„ã‚‹ãŒã€å®Ÿéš›ã«ã¯1è¡Œã®ãƒ‡ãƒ¼ã‚¿ã ã€‚\nã“ã“ã§to_jsonã«ã¤ã„ã¦ã‚‚èª¬æ˜ã—ã¦ãŠãã€‚ã¾ãšã€ŒJSONã€ã¨ã„ã†ã®ã¯ã€ŒJavaScript Object Notationã€ã®ç•¥ã§ã€JavaScript ã¨ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨˜è¿°æ–¹å¼ã§ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã ã€‚ãã—ã¦ã€ãã®æ§‹é€ ã¯ GDScript ã‚’å«ã‚€å„ç¨®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã«ã‚‚ãã£ãã‚Šã®{\"key\": value}ã¨ã„ã†å½¢å¼ã ã€‚å…ˆã«ä¿å­˜ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸å‹ã§ã¾ã¨ã‚ã¦ãŠãã€ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã¨ãã«ãã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’to_jsonãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«ã—ã¦ã€JSONå½¢å¼ã«å¤‰æ›ã—ã¦ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ã—ãŸã¨ã„ã†ã‚ã‘ã ã€‚\næœ€å¾Œã«closeãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã¦ã„ã‚‹ã€‚é–‹ãã£ã±ãªã—ã«ã—ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè€—ã—ãªã„ã‚ˆã†æ³¨æ„ã—ã‚ˆã†ã€‚\nèª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã€ä»Šåº¦ã¯ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚\nfunc load_data(): var file = File.new() if file.file_exists(SCORE_FILE_PATH): file.open(SCORE_FILE_PATH, File.READ) var data = parse_json(file.get_line()) if data != null: high_score = data[\"high_score\"] high_level_num = data[\"high_level\"] file.close() hud_high_score.text = \"H Scr: \" + str(high_score) hud_high_level.text = \"H Lvl: \" + str(high_level_num) ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã®ã¯load_dataã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã ã€‚\nå…ˆã»ã©ã®æ›¸ãè¾¼ã¿ãƒ¡ã‚½ãƒƒãƒ‰save_dataã¨åŒæ§˜ã«ã€ã¾ãšã¯Fileã‚¯ãƒ©ã‚¹ã®newãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šã€Fileã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã€‚ãã“ã‹ã‚‰ã¾ãŸFileã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç¶šããŒé †ç•ªã«è¦‹ã¦ã„ã“ã†ã€‚\nã¾ãšã¯ifæ§‹æ–‡ã§ã€file_existsãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå®šæ•°SCORE_FILE_PATHã®å€¤ï¼‰ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¦ã„ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ifãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®å‡¦ç†ã‚’ç¶šè¡Œã™ã‚‹ã€‚\nã§ã¯ifãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ã“ã†ã€‚ã¾ãšã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’openãƒ¡ã‚½ãƒƒãƒ‰ã§é–‹ãã€‚ã“ã“ã§ã¯ãƒ¢ãƒ¼ãƒ‰ã‚’READã«ã—ã¦èª­ã¿è¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ã„ã‚‹ã€‚\næ¬¡ã¯get_lineãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ä¸€è¡Œã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã€‚ã“ã®æ™‚ã€ã“ã®èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã¯JSONå½¢å¼ãªã®ã§ã€ã“ã‚Œã‚’parse_jsonãƒ¡ã‚½ãƒƒãƒ‰ GDScript ã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã¦ã€å¤‰æ•°dataã«æ ¼ç´ã—ã¦ã„ã‚‹ã€‚\n2æ®µå›ç›®ã®ifæ§‹æ–‡ã ãŒã€ã‚‚ã—å¤‰æ•°dataãŒç©ºã£ã½ã®nullã§ãªã‘ã‚Œã°ã€å¤‰æ•°high_scoreã«ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ã„ã‚‹ãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€å¤‰æ•°high_level_numã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ã„ã‚‹ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä»£å…¥ã™ã‚‹ã€‚\nãã“ã¾ã§ã§ããŸã‚‰ã€å¿˜ã‚Œãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’closeãƒ¡ã‚½ãƒƒãƒ‰ã§é–‰ã˜ã‚‹ã€‚\næœ€å¾Œã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å¾—ãŸãã‚Œãã‚Œã®ãƒ‡ãƒ¼ã‚¿ã‚’stringå½¢ã«å¤‰æ›ã—ã¦ã€é ­ã«H Str: ã€H Lvl: ã‚’ä»˜ã‘è¶³ã—ã¦ã€HUD ã®ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã¨ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ãã‚Œãã‚Œã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«é©ç”¨ã—ã¦ã„ã‚‹ã€‚\nè¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã§ããŸã®ã§ã€ãã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¦ã„ãã€‚\nã¾ãšã¯_readyãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã€‚\nfunc _ready(): randomize() add_new_level() add_new_ball() update_hud_life() load_data() # è¿½åŠ  å˜ç´”ã«ã€å…ˆã»ã©ä½œæˆã—ãŸload_dataãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ãŸã ã‘ã ã€‚ã“ã‚Œã§ã€ã‚²ãƒ¼ãƒ é–‹å§‹å‰ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚„ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®å€¤ã‚’å–å¾—ã—ã¦ HUD ã«åæ˜ ã—ã¦ãã‚Œã‚‹ã€‚\næ¬¡ã«_on_Ball_tree_exitedãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã€‚ã¡ãªã¿ã«ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒœãƒ¼ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¶ˆãˆã‚‹æ™‚ã«ç™ºä¿¡ã•ã‚Œã‚‹ã‚·ã‚°ãƒŠãƒ«ã«ã‚ˆã£ã¦å‘¼ã°ã‚Œã‚‹ã€‚\nfunc _on_Ball_tree_exited(): print(\"_on_Ball_tree_exited() called\") var no_ball = true for child in get_children(): if child.is_in_group(\"Balls\"): print(\"found ball\") no_ball = false break if no_ball: if is_playing: life -= 1 if life \u003c= 0: if high_score \u003c score: # è¿½åŠ  high_score = score if high_level_num \u003c level_num: # è¿½åŠ  high_level_num = level_num save_data() # è¿½åŠ  get_tree().change_scene(\"res://scene/GameOverView.tscn\") else: update_hud_life() life_down_sound.play() #ï¼ˆå¾Œç•¥ï¼‰ ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®if no_ball:ã§ãƒã‚¹ãƒˆã•ã‚ŒãŸif is_playing:ã§ã•ã‚‰ã«ãƒã‚¹ãƒˆã•ã‚ŒãŸif life \u003c= 0:ãƒ–ãƒ­ãƒƒã‚¯å†…ã‚’ç·¨é›†ã™ã‚‹ã€‚ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã€ç”»é¢ã‹ã‚‰ãƒœãƒ¼ãƒ«ãŒä¸€ã¤ã‚‚ç„¡ããªã£ãŸå ´åˆã€ã€ã€ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ä¸­ã§ã‚ã‚Šã€ã€ã€ãƒ©ã‚¤ãƒ•ãŒ 0ã€ã®å ´åˆã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚ã¤ã¾ã‚Šã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã‚‹å ´åˆã ã€‚\nå…ƒã€…ã“ã®ãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ã€ã‚·ãƒ¼ãƒ³ã‚’ã€ŒGameOverView.tscnã€ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰get_tree().change_scene(\"res://scene/GameOverView.tscn\")ã®ã¿ã‚’è¨˜è¿°ã—ã¦ã„ãŸã€‚ä»Šå›ã¯ãã®ã‚³ãƒ¼ãƒ‰ã®å‰ã«ã€ãƒã‚¤ã‚¹ã‚³ã‚¢ã¨ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’æ›´æ–°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ãŸã€‚\nå…·ä½“çš„ã«ã¯ã€ã“ã‚Œã¾ã§ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚’è¡¨ã™å¤‰æ•°high_scoreã®å€¤ãŒä»Šãƒ—ãƒ¬ã‚¤ã—ã¦ã„ãŸæ™‚ã®ã‚¹ã‚³ã‚¢ã‚’è¡¨ã™å¤‰æ•°scoreã®å€¤ã‚ˆã‚Šå°ã•ã‘ã‚Œã°ã€scoreã®å€¤ã‚’æ–°ã—ã„ãƒã‚¤ã‚¹ã‚³ã‚¢ã¨ã—ã¦high_scoreã¸ä»£å…¥ã™ã‚‹ã€ã¨ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ifæ§‹æ–‡ã§è¨˜è¿°ã—ãŸã€‚\nåŒæ§˜ã«ã€ã“ã‚Œã¾ã§ã®ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’è¡¨ã™å¤‰æ•°high_level_numã®å€¤ãŒä»Šãƒ—ãƒ¬ã‚¤ã—ã¦ã„ãŸæ™‚ã®ãƒ¬ãƒ™ãƒ«ã‚’è¡¨ã™å¤‰æ•°level_numã®å€¤ã‚ˆã‚Šå°ã•ã‘ã‚Œã°ã€level_numã®å€¤ã‚’æ–°ã—ã„ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã¨ã—ã¦high_level_numã¸ä»£å…¥ã™ã‚‹ã‚ˆã†è¨˜è¿°ã—ãŸã€‚\nã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã‚’æ›´æ–°ã™ã‚‹ æ¬¡ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®è¡¨ç¤ºãŒå¿…è¦ãªã®ãŒã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å¿ƒæƒ…ã¨ã—ã¦ã¯ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã«ã€æœ€çµ‚çš„ã«è‡ªåˆ†ã®ã‚¹ã‚³ã‚¢ãŒã©ã®ç¨‹åº¦ã§ã©ã®ãƒ¬ãƒ™ãƒ«ã¾ã§åˆ°é”ã—ãŸã®ã‹ã‚’ç¢ºèªã—ãŸã„ã€‚ã•ã‚‰ã«ã€ãã®çµæœã¯ã“ã‚Œã¾ã§ã®æœ€é«˜è¨˜éŒ²ã‚’å¡—ã‚Šæ›¿ãˆãŸã®ã‹ã©ã†ã‹ã‚‚çŸ¥ã‚ŠãŸã„ã‚‚ã®ã ã€‚\nã—ãŸãŒã£ã¦ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«ã¯ä»¥ä¸‹ã®4ã¤ã®çµæœã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã€‚\nãƒã‚¤ã‚¹ã‚³ã‚¢ï¼ˆéå»æœ€é«˜ç²å¾—ã‚¹ã‚³ã‚¢ï¼‰ ãƒ©ã‚¹ãƒˆã‚¹ã‚³ã‚¢ï¼ˆä»Šã®ãƒ—ãƒ¬ã‚¤ã§æœ€çµ‚çš„ã«ç²å¾—ã—ãŸã‚¹ã‚³ã‚¢ï¼‰ ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜åˆ°é”ãƒ¬ãƒ™ãƒ«ï¼‰ ãƒ©ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆä»Šã®ãƒ—ãƒ¬ã‚¤ã§æœ€çµ‚çš„ã«åˆ°é”ã—ãŸãƒ¬ãƒ™ãƒ«ï¼‰ ãã‚Œã§ã¯ã€ŒGameOverView.tscnã€ã‚·ãƒ¼ãƒ³ã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚\nãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹ ä»¥ä¸‹ã®æ‰‹é †ã§ã€ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ãŠã‚ˆã³ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã«ã¦ã€å¿…è¦ãªãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã—ã¦ã„ã“ã†ã€‚\nã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒVBoxã€ãƒãƒ¼ãƒ‰ã«ã€ŒVBoxContainerã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ä¸€ã¤è¿½åŠ ã—ã¦ã€åå‰ã‚’ã€ŒResultsContainerã€ã«å¤‰æ›´ã™ã‚‹ã€‚\nã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã®é †ç•ªã‚’ã€ŒGameOverLavelã€ãƒãƒ¼ãƒ‰ã®ä¸‹ã€ã€ŒMessageã€ãƒãƒ¼ãƒ‰ã®å‰ã«ç§»å‹•ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Constantsã€ï¼ã€ŒSeparationã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’10ã«ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹ã€‚\nã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã«ã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ 1 ã¤è¿½åŠ ã—ã€åå‰ã‚’ã€ŒHighScoreã€ã«å¤‰æ›´ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒAlignã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒCenterã€ã«å¤‰æ›´ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒUppercaseã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€Œã‚ªãƒ³ã€ã«ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§æ—¢å­˜ã®ã€ŒMessageã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã«è²¼ã‚Šä»˜ã‘ã™ã‚‹ã€‚\nã•ã‚‰ã«ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯åŒ–ã™ã‚‹ã€‚\nã•ã‚‰ã«ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒSettingsã€ï¼ã€ŒSizeã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’16ã«ã™ã‚‹ã€‚\nã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã‚’3ã¤è¤‡è£½ã—ã€ãã‚Œã‚‰ã®åå‰ã‚’ä¸Šã‹ã‚‰é †ç•ªã«ã€ŒLastScoreã€ã€ã€ŒHighLevelã€ã€ã€ŒLastLevelã€ã«å¤‰æ›´ã™ã‚‹ã€‚ã“ã®æ™‚ç‚¹ã§ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\nã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒHigh Score: 0ã€ã«ã™ã‚‹ã€‚\nåŒæ§˜ã«ã€ŒLastScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒLast Score: 0ã€ã«ã™ã‚‹ã€‚\nåŒæ§˜ã«ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒHigh Level: 0ã€ã«ã™ã‚‹ã€‚\nåŒæ§˜ã«ã€ŒLastLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒLast Level: 0ã€ã«ã™ã‚‹ã€‚\nã“ã“ã¾ã§ã®æ‰‹é †ãŒã§ããŸã‚‰ã€2D ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã‚‹ã¯ãšã ã€‚\nGameOverView.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹ ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã®ãƒãƒ¼ãƒ‰ã®è¿½åŠ ã¨ç·¨é›†ãŒã§ããŸã®ã§ã€ã“ã“ã‹ã‚‰ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹éš›ã®ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’å®Ÿè£…ã—ã¦ã„ãã€‚ã¡ãªã¿ã«ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ãªã®ã§ã€ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜æ©Ÿèƒ½ã¯ä¸è¦ã ã€‚\nãã‚Œã§ã¯ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚\nå¿…è¦ãªå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹ ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨ãã®èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’ç”»é¢ã«åæ˜ ã•ã›ã‚‹ãŸã‚ã«ã€ã¾ãšã¯å¤‰æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ãŠãã€‚\nconst SCORE_FILE_PATH = \"user://score_record.save\" onready var high_score = $VBox/ResultsContainer/HighScore onready var last_score = $VBox/ResultsContainer/LastScore onready var high_level = $VBox/ResultsContainer/HighLevel onready var last_level = $VBox/ResultsContainer/LastLevel #ï¼ˆå¾Œç•¥ï¼‰ constã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å®šæ•°SCORE_FILE_PATHã‚’å®šç¾©ã—ãŸã€‚å€¤ã¯ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã ã€‚ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚åŒã˜å®šæ•°ã‚’å®šç¾©ã—ãŸã¨ã“ã‚ã§ã‚ã‚‹ã€‚\næ¬¡ã«onreadyã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä»˜ãã®å¤‰æ•°ã‚’high_scoreã‚’ã¯ã˜ã‚ã¨ã—ã¦ 4 ã¤å®šç¾©ã—ã¦ã„ã‚‹ãŒã€ã“ã‚Œã‚‰ã¯ä»Šå›è¿½åŠ ã—ãŸã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã—ã¦ã„ã‚‹ã€‚\nèª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ ã»ã©ã‚“ã©ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã—ãŸå†…å®¹ã¨åŒã˜ã«ãªã‚‹ãŒã€ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ–¹ã§ã‚‚ã€ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nfunc load_data(): var file = File.new() if file.file_exists(SCORE_FILE_PATH): file.open(SCORE_FILE_PATH, File.READ) var data = parse_json(file.get_line()) if data != null: high_score.text = \"High Score: \" + str(data[\"high_score\"]) last_score.text = \"Last Score: \" + str(data[\"last_score\"]) high_level.text = \"High Level: \" + str(data[\"high_level\"]) last_level.text = \"Last Level: \" + str(data[\"last_level\"]) file.close() laod_dataã¨ã„ã†åå‰ã§èª­ã¿è¾¼ã¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ãŸã€‚if data != null:ã®è¡Œã¾ã§ã¯ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨å…¨ãåŒã˜ã ãŒã€ãã®ifãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®ã‚³ãƒ¼ãƒ‰ãŒã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ä»•æ§˜ã«ãªã£ã¦ã„ã‚‹ã€‚\nã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦ç´„ã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ãã®ã‚ã¨ãƒ‡ãƒ¼ã‚¿ãŒç©ºã£ã½ã§ãªã‘ã‚Œã°ã€å˜ç´”ã«ã€ŒHighScoreã€ã€ã€ŒLastScoreã€ã€ã€ŒHighLevelã€ã€ã€ŒLastLevelã€ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ã—ãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’æœ€çµ‚çš„ã«stringå‹ã«å¤‰æ›ã—ã¦åæ˜ ã™ã‚‹ã€‚ã‚‚ã—ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã€ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãŒãªã‘ã‚Œã°ã€ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\nãªãŠã€ç¹°ã‚Šè¿”ã—ã«ãªã‚‹ãŒã€æœ€å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹closeãƒ¡ã‚½ãƒƒãƒ‰ã¯å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„ã€‚\nè¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹ èª­ã¿è¾¼ã¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®šç¾©ã§ããŸã®ã§ã€ã“ã‚Œã‚’_readyãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®Ÿè¡Œã•ã›ã‚‹ã€‚ã‚³ãƒ¼ãƒ‰ã¯è‡³ã£ã¦ã‚·ãƒ³ãƒ—ãƒ«ã ã€‚\nfunc _ready(): load_data() ã“ã‚Œã ã‘ã§ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã—ãŸæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã•ãˆã—ãªã‘ã‚Œã°ã€ãã¡ã‚“ã¨ç”»é¢ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã¯ãšã ã€‚ä»Šã¯ã¾ã ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ãªã„ã®ã§ã€ã‚·ãƒ¼ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\næœ€çµ‚ç¢ºèª ãã‚Œã§ã¯æœ€å¾Œã«ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãŒã†ã¾ãã„ãã‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚\nåˆå›ãƒ—ãƒ¬ã‚¤æ™‚ã€ãƒ©ã‚¤ãƒ•ãŒ 0 ã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ‡ãƒ¼ã‚¿ãŒãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã—ãŸæ™‚ã«ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œç”»é¢ä¸Šã«çµæœãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚ 2å›ç›®ã€3å›ç›®ãƒ—ãƒ¬ã‚¤æ™‚ã¯ã€æœ€åˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œ HUD ä¸­å¤®ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã«åæ˜ ã•ã‚ŒãŸã€‚ 2å›ç›®ãƒ—ãƒ¬ã‚¤ã§åˆå›ã‚ˆã‚Šé«˜ã„ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã—ã¦ã‹ã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã€ç”»é¢ã«ã¯æ›´æ–°ã•ã‚ŒãŸãƒã‚¤ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚ 3å›ç›®ãƒ—ãƒ¬ã‚¤ã§2å›ç›®ãƒ—ãƒ¬ã‚¤ã‚ˆã‚Šä½ã„ã‚¹ã‚³ã‚¢ã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã€ç”»é¢ã«ã¯2å›ç›®ãƒ—ãƒ¬ã‚¤æ™‚ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚ 1 ~ 3å›ç›®ã®ãƒ—ãƒ¬ã‚¤ã§ã®ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã§ãã®æ™‚ã€…ã®ã‚¹ã‚³ã‚¢ãŒã€ŒLast Scoreã€ã«åæ˜ ã•ã‚ŒãŸã€‚ ä»¥ä¸Šã®ã“ã¨ãŒç¢ºèªã§ããŸã®ã§ã€ä»Šå›ã®ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨èª­ã¿è¾¼ã¿ã¯å•é¡Œãªãå®Ÿè£…ã§ããŸã¨åˆ¤æ–­ã§ãã‚‹ã€‚ãªãŠã€ãƒ¬ãƒ™ãƒ«ã®æ–¹ã®ç¢ºèªã¯ã‚«ãƒƒãƒˆã™ã‚‹ãŒã€ã“ã¡ã‚‰ã‚‚å•é¡Œãªã„ã¯ãšã ã€‚\nã¨ã“ã‚ã§ã€å®Ÿéš›ã«ãƒ‡ãƒãƒƒã‚°ä½œæ¥­ã‚’è¡Œã†ä¸­ã§ã€ä½œæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã‚‚ç™ºç”Ÿã™ã‚‹ã ã‚ã†ã€‚ãã®å ´åˆã¯ã€ã”åˆ©ç”¨ã®OSã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆWindows ãªã‚‰ Explorerã€macOS ãªã‚‰ Finderï¼‰ã‹ã‚‰ä¿å­˜å…ˆã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‰Šé™¤ã—ã¦ã»ã—ã„ã€‚ãªãŠã€ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆã¯ä»¥ä¸‹ã®é€šã‚Šã ã€‚\nWindows: %APPDATA%Â¥GodotÂ¥app_userdataÂ¥[ProjectName]Â¥ macOS: ~/Library/Application Support/Godot/app_userdata/[ProjectName]/ Linux: ~/.local/share/godot/app_userdata/[ProjectName]/ Memo: è©³ç´°ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® File paths in Godot projects ã®é …ç›®ã‚’ã”å‚ç…§ãã ã•ã„ã€‚\næœ€å¾Œã«ä»Šå›ç·¨é›†ã—ãŸã€ŒGame.gdã€ã¨ã€ŒGameOverView.gdã€ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ã‚‚ã“ã“ã«å…¬é–‹ã—ã¦ãŠãã€‚\nã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã‚’è¦‹ã‚‹ extends Node2D const POINT = 100 const MAX_LIFE = 5 # Added @ P11 const SCORE_FILE_PATH = \"user://score_record.save\" # Added @ P13 export var drop_rate = 0.2 var level_num: int = 1 var high_level_num: int = 0 # Added @ P13 var score: int = 0 var high_score: int = 0 # Added @ P13 var bonus_rate = 1.0 var life = 3 var is_playing = true var is_multiple_on = false # Added @ P11 var is_laser_on = false # Added @ P11 #onready var level = $Level1 # Removed @ P11 onready var next_screen = $NextScreen onready var next_screen_level = $NextScreen/VBox/Level onready var next_screen_score = $NextScreen/VBox/Score onready var next_screen_life = $NextScreen/VBox/HBox/Life onready var hud_level = $HUD/LeftBox/Level onready var hud_high_level = $HUD/MidBox/HighLevel # Added @ P13 onready var hud_score = $HUD/LeftBox/Score onready var hud_high_score = $HUD/MidBox/HighScore # Added @ P13 onready var hud_rightbox = $HUD/RightBox onready var paddle = $Paddle #onready var ball = $Ball # Removed @ P11 onready var pause_screen = $PauseScreen onready var life_down_sound = $LifeDownSound onready var slow_collide_sound = $SlowCollideSound onready var expand_collide_sound = $ExpandCollideSound onready var multiple_collide_sound = $MultipleCollideSound onready var laser_collide_sound = $LaserCollideSound onready var life_collide_sound = $LifeCollideSound onready var play_bgm = $PlayBGM onready var paddle_position = paddle.position onready var paddle_scale = paddle.scale # Added @ P11 #onready var ball_position = ball.position # Removed @ P11 onready var ball = preload(\"res://scene/Ball.tscn\") # Added @ P11 onready var laser = preload(\"res://scene/Laser.tscn\") # Added @ P11 onready var powerup = preload(\"res://scene/Powerup.tscn\") # Added @ P10 onready var level = null # Updated @ P11 func _ready(): randomize() # Added @ P10 add_new_level() # Added @ P11 add_new_ball() # Added @ P11 update_hud_life() load_data() # Added @ P13 # For debug #leave_one_brick(43) # Moved @ P11 #ball.connect(\"tree_exited\", self, \"_on_Ball_tree_exited\") # Removed @ P11 #for brick in level.get_children(): # Removed @ P11 #brick.connect(\"tree_exited\", self, \"_on_Brick_tree_exited\", [brick.global_position]) # Updated @ P10 func _process(_delta): # Added @ P11 if is_multiple_on and Input.is_action_just_pressed(\"launch_ball\"): add_new_ball() if is_laser_on and Input.is_action_just_pressed(\"ui_up\"): fire_laser() # For debug func leave_one_brick(brick_num: int): for child in level.get_children(): if child.get_name() == \"Brick\" + str(brick_num): continue child.queue_free() # Method receiving Ball signal func _on_Ball_tree_exited(): print(\"_on_Ball_tree_exited() called\") var no_ball = true # Added @ P11 for child in get_children(): # Added @ P11 if child.is_in_group(\"Balls\"): print(\"found ball\") no_ball = false break if no_ball: # Added and Edited @ P11 if is_playing: life -= 1 if life \u003c= 0: if high_score \u003c score: # Added @ P13 high_score = score if high_level_num \u003c level_num: # Added @ P13 high_level_num = level_num save_data() # Added @ P13 get_tree().change_scene(\"res://scene/GameOverView.tscn\") else: update_hud_life() life_down_sound.play() else: is_playing = true # Clear powerup items for child in get_children(): # Added @ P10 if child.is_in_group(\"PowerupItems\"): child.queue_free() # Set Paddle and Balls as default is_multiple_on = false # Added @ P11 is_laser_on = false # Added @ P11 paddle.position = paddle_position paddle.scale = paddle_scale # Added @ P11 add_new_ball() # Added @ P11 #ball = load(\"res://scene/Ball.tscn\").instance() # Removed @ P11 #call_deferred(\"add_child\", ball) # Removed @ P11 #call_deferred(\"move_child\", ball, 3) # Removed @ P11 #ball.connect(\"tree_exited\", self, \"_on_Ball_tree_exited\") # Removed @ P11 # Set life nodes shown and hidden as life variable func update_hud_life(): var count = 0 for child in hud_rightbox.get_children(): count += 1 if count \u003c= life: child.show() else: child.hide() # Add a new ball func add_new_ball(): # Added @ P11 print(\"add_new_ball() called\") var instance = ball.instance() instance.position = Vector2(paddle.position.x, paddle.position.y - 10) # Added @ P11 call_deferred(\"add_child\", instance) call_deferred(\"move_child\", instance, 4) instance.connect(\"tree_exited\", self, \"_on_Ball_tree_exited\")\t#instance.mode = 3 # Removed @ P11 # Method receiving Brick signal func _on_Brick_tree_exited(brick_position): # Update Score score += POINT * bonus_rate bonus_rate += 0.1 hud_score.text = \"Score: \" + str(score) # Exit current Level node if level.get_child_count() \u003c= 0: set_next_level() else: # Added @ P11 # Drop powerup item drop_powerup(brick_position) # Added @ P10 func drop_powerup(brick_position: Vector2): # Added @ P10 if randf() \u003c= drop_rate: var powerup_instance = powerup.instance() powerup_instance.position = brick_position call_deferred(\"add_child\", powerup_instance) call_deferred(\"move_child\", powerup_instance, 5) # Added @ P 11 powerup_instance.connect(\"item_collided\", self, \"_on_Powerup_item_collided\") # Action when powerup item collided func _on_Powerup_item_collided(item): # Updated @ P11 match item: 0: # SLOW slow_balls() 1: # EXPAND expand_paddle() 2: # MULTIPLE enable_multiple_balls() 3: # LASER enable_laser() 4: # LIFE add_life() # slow balls func slow_balls(): # Added @ P11 slow_collide_sound.play() # Added @ P12 for child in get_children(): if child.is_in_group(\"Balls\"): child.ball_speed = child.first_speed # Stretch paddle func expand_paddle(): # Added @ P11 expand_collide_sound.play() # Added @ P12 if paddle.scale \u003c= paddle_scale: paddle.scale.x *= 2 yield(get_tree().create_timer(10), \"timeout\") paddle.scale = paddle_scale # enable powerup Multiple func enable_multiple_balls(): # Added @ P11 multiple_collide_sound.play() # Added @ P12 if not is_multiple_on: is_multiple_on = true yield(get_tree().create_timer(3), \"timeout\") is_multiple_on = false # enable powerup Laser func enable_laser(): # Added @ P11 laser_collide_sound.play() # Added @ P12 if not is_laser_on: is_laser_on = true yield(get_tree().create_timer(3), \"timeout\") is_laser_on = false # fire laser beam func fire_laser(): var instance = laser.instance() call_deferred(\"add_child\", instance) call_deferred(\"move_child\", instance, 6) instance.position.x = paddle.position.x instance.position.y = paddle.position.y - 16 # Add a life if less than 5 func add_life(): # Added @ P11 life_collide_sound.play() # Added @ P12 if life \u003c MAX_LIFE: life += 1 update_hud_life() # set next level func set_next_level(): print(\"set_next_level() called\") # Change status is_playing = false is_multiple_on = false # Added @ P11 is_laser_on = false # Added @ P11 # Clear left objects level.queue_free() for child in get_children(): if child.is_in_group(\"Balls\") or child.is_in_group(\"Lasers\"): # è¿½åŠ  child.queue_free() # Increment level number level_num += 1 # Stop PauseScreen node pause_screen.pause_mode = 1 # Show NextScreen node next_screen.pause_mode = 2 next_screen_level.text = \"Level: \" + str(level_num) next_screen_score.text = \"Score: \" + str(score) next_screen_life.text = \"x \" + str(life) next_screen.show() # Set Level of HUD the next level hud_level.text = \"Level: \" + str(level_num) # Set Paddle and Ball the first position #paddle.position = paddle_position # Removed @ P11 #paddle.scale = paddle_scale # Removed @ P11 #ball.position = ball_position # Removed @ P11 #ball.mode = 3 # Removed @ P11 # Set next Level node add_new_level() # Added @ P11 #level = load(\"res://scene/Level\" + str(level_num) + \".tscn\").instance() # Removed @ P11 #add_child(level) # Removed @ P11 #move_child(level, 5) # Removed @ P11 #for child in level.get_children(): # Removed @ P11 #child.connect(\"tree_exited\", self, \"_on_Brick_tree_exited\") # Removed @ P11 # Pause game until NextScreen is hidden get_tree().paused = true # Add new level func add_new_level(): # Added @ P11 level = load(\"res://scene/Level\" + str(level_num) + \".tscn\").instance() add_child(level) move_child(level, 3) # Changed from 5 to 3 @ P11 for child in level.get_children(): child.connect(\"tree_exited\", self, \"_on_Brick_tree_exited\", [child.global_position]) # Updated to add th 4th arg @ P11 func _on_PauseScreen_visibility_changed(): play_bgm.stream_paused = not play_bgm.stream_paused # Save data func save_data(): # Added @ P13 var data = { \"last_level\": level_num, \"high_level\": high_level_num, \"last_score\": score, \"high_score\": high_score, } var file = File.new() file.open(SCORE_FILE_PATH, File.WRITE) file.store_line(to_json(data)) file.close() # Load data func load_data(): # Added @ P13 var file = File.new() if file.file_exists(SCORE_FILE_PATH): file.open(SCORE_FILE_PATH, File.READ) var data = parse_json(file.get_line()) if data != null: high_score = data[\"high_score\"] high_level_num = data[\"high_level\"] file.close() hud_high_score.text = \"H Scr: \" + str(high_score) hud_high_level.text = \"H Lvl: \" + str(high_level_num) ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã‚’è¦‹ã‚‹ extends Control const SCORE_FILE_PATH = \"user://score_record.save\" # Added @ P13 onready var high_score = $VBox/ResultsContainer/HighScore # Added @ P13 onready var last_score = $VBox/ResultsContainer/LastScore # Added @ P13 onready var high_level = $VBox/ResultsContainer/HighLevel # Added @ P13 onready var last_level = $VBox/ResultsContainer/LastLevel # Added @ P13 onready var sound = $KeySound func _ready(): # Added @ P13 load_data() func _input(event): if event is InputEventKey: print(\"Input at Game Over: \", event.as_text()) if event.is_action_released(\"Quit\"): sound.play() yield(sound, \"finished\") get_tree().quit() elif event.is_action_released(\"ui_accept\"): sound.play() yield(sound, \"finished\") get_tree().change_scene(\"res://scene/GameStartView.tscn\") func load_data(): # Added @ P13 var file = File.new() if file.file_exists(SCORE_FILE_PATH): file.open(SCORE_FILE_PATH, File.READ) var data = parse_json(file.get_line()) if data != null: high_score.text = \"High Score: \" + str(data[\"high_score\"]) last_score.text = \"Last Score: \" + str(data[\"last_score\"]) high_level.text = \"High Level: \" + str(data[\"high_level\"]) last_level.text = \"Last Level: \" + str(data[\"last_level\"]) file.close() ãŠã‚ã‚Šã« ä»¥ä¸Šã§ Part 13 ã¯å®Œäº†ã ã€‚ä»Šå›ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã€ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ãŸã€‚ã‚²ãƒ¼ãƒ ã«ã‚ˆã£ã¦ã€ä¿å­˜ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã¯å¤‰ã‚ã‚Šã€è¦æ¨¡ãŒå¤§ãããªã‚‹ã»ã©ã€ä¿å­˜ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚‚è¤‡é›‘åŒ–ã™ã‚‹ã ã‚ã†ã€‚ã—ã‹ã—ã€ä½•äº‹ã‚‚åŸºæœ¬ãŒé‡è¦ãªã®ã§ã€ä»Šå›ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å†…å®¹ã‚’ãœã²ä»Šå¾Œã®é–‹ç™ºã«å½¹ç«‹ã¦ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚\næ¬¡å› Part 14 ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã®ç¨®é¡ï¼ˆä¾‹ãˆã°ä¸€å›ã®è¡çªã§ã¯æ¶ˆãˆãªã„ç¡¬ã„ãƒ–ãƒ­ãƒƒã‚¯ãªã©ï¼‰ã‚’å¢—ã‚„ã—ã¦ã€ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦é›£æ˜“åº¦ã®å¹…ã‚’åºƒãã§ãã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã€è¤‡æ•°ã®ãƒ¬ãƒ™ãƒ«ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ã€‚\n","wordCount":"9257","inLanguage":"ja","image":"https://www.peanuts-code.com/images/tutorials/gd0004_breakout/breakout_13/img_16.gif","datePublished":"2021-12-23T16:55:59+09:00","dateModified":"2021-12-23T16:55:59+09:00","author":{"@type":"Person","name":"gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_13/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/ja/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://www.peanuts-code.com/en/ title=English aria-label=ğŸ‡¬ğŸ‡§English>ğŸ‡¬ğŸ‡§English</a></li></ul></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/ja/ title=ãƒ›ãƒ¼ãƒ ><span>ãƒ›ãƒ¼ãƒ </span></a></li><li><a href=https://www.peanuts-code.com/ja/portfolio/ title=ã‚²ãƒ¼ãƒ ><span>ã‚²ãƒ¼ãƒ </span></a></li><li><a href=https://www.peanuts-code.com/ja/posts/ title=ãƒ–ãƒ­ã‚°><span>ãƒ–ãƒ­ã‚°</span></a></li><li><a href=https://www.peanuts-code.com/ja/tutorials/ title=ãƒãƒ¥ãƒ¼ãƒˆ><span>ãƒãƒ¥ãƒ¼ãƒˆ</span></a></li><li><a href=https://www.peanuts-code.com/ja/about/ title=ã‚µã‚¤ãƒˆç´¹ä»‹><span>ã‚µã‚¤ãƒˆç´¹ä»‹</span></a></li><li><a href=https://www.peanuts-code.com/ja/search/ title="ã‚µã‚¤ãƒˆå†…æ¤œç´¢ (Alt + /)" accesskey=/><span>ã‚µã‚¤ãƒˆå†…æ¤œç´¢</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/ja/>ãƒ›ãƒ¼ãƒ </a>&nbsp;Â»&nbsp;<a href=https://www.peanuts-code.com/ja/tutorials/>ğŸ¤– ãƒãƒ¥ãƒ¼ãƒˆ</a>&nbsp;Â»&nbsp;<a href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/>ğŸ¤– ã‚·ãƒªãƒ¼ã‚ºï¼šGodot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—</a></div><h1 class="post-title entry-hint-parent">Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼</h1><div class=post-meta><span title='2021-12-23 16:55:59 +0900 +0900'>2021-12-23</span>&nbsp;Â·&nbsp;19 åˆ†</div><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on x" href="https://x.com/intent/tweet/?text=Godot%20%e3%81%a7%e4%bd%9c%e3%82%8b%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%20Part%2013%ef%bc%9a%e3%83%8f%e3%82%a4%e3%82%b9%e3%82%b3%e3%82%a2%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%97%e3%82%88%e3%81%86%ef%bc%81&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f&amp;hashtags=GodotEngine%2cGameDev%2c%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%2c2D"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f&title=Godot%20%e3%81%a7%e4%bd%9c%e3%82%8b%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%20Part%2013%ef%bc%9a%e3%83%8f%e3%82%a4%e3%82%b9%e3%82%b3%e3%82%a2%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%97%e3%82%88%e3%81%86%ef%bc%81"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul><ul class=post-tags><li><a href=https://www.peanuts-code.com/ja/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/ja/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/ja/tags/%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E5%B4%A9%E3%81%97/>ãƒ–ãƒ­ãƒƒã‚¯å´©ã—</a></li><li><a href=https://www.peanuts-code.com/ja/tags/2d/>2D</a></li></ul></header><figure class=entry-cover><img loading=eager src=https://www.peanuts-code.com/images/tutorials/gd0004_breakout/breakout_13/img_16.gif alt="ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13 ã‚µãƒ ãƒã‚¤ãƒ«"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®æ¬¡</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#è¿½åŠ ã—ãŸãƒãƒ¼ãƒ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹>è¿½åŠ ã—ãŸãƒãƒ¼ãƒ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹</a></li><li><a href=#gamegd-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹>Game.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹</a><ul><li><a href=#å¿…è¦ãªå®šæ•°ã¨å¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹>å¿…è¦ãªå®šæ•°ã¨å¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#ä¿å­˜ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹>ä¿å­˜ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹>èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹>è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹</a></li></ul></li></ul><ul><li><a href=#ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹</a></li><li><a href=#gameoverviewgd-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹>GameOverView.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹</a><ul><li><a href=#å¿…è¦ãªå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹>å¿…è¦ãªå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹-1>èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</a></li><li><a href=#è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹-1>è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹</a></li></ul></li></ul></nav></div></details></div><div class=post-content><p>Part 13 ã®ä»Šå›ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯å´©ã—ã® HUD ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜ã‚¯ãƒªã‚¢ãƒ¬ãƒ™ãƒ«ã®ã“ã¨ã‚’ã“ã†å‘¼ã¶ã“ã¨ã«ã™ã‚‹ï¼‰ã®è¦ç´ ã‚’è¿½åŠ ã—ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ç‚¹ã§ãã®ãƒ‡ãƒ¼ã‚¿ãŒè‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã€ä¸€åº¦ã‚²ãƒ¼ãƒ ã‚’çµ‚äº†ã—ã¦ã‚‚è¨˜éŒ²ãŒæ¶ˆãˆãªã„ä»•çµ„ã¿ã‚’ä½œã£ã¦ã„ãã€‚</p><br><blockquote><p><em><strong><span style=color:salmon>Memo:</span></strong><br>éå»ã®ã‚·ãƒªãƒ¼ã‚ºã‚’ã¾ã ã”è¦§ã«ãªã£ã¦ã„ãªã„æ–¹ã¯ã€ãã¡ã‚‰ã‚’å…ˆã«ã”è¦§ã„ãŸã ãã“ã¨ã‚’ãŠã™ã™ã‚ã—ã¾ã™ã€‚<br><a href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/ title="Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—">Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã—</a></em></p></blockquote><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h1 id=hud-ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹>HUD ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹</h1><p>ä»Šå›ã€ã€Œãƒã‚¤ã‚¹ã‚³ã‚¢ã€ã¨ã€Œãƒã‚¤ãƒ¬ãƒ™ãƒ«ã€ã®è¦ç´ ã‚’ã‚²ãƒ¼ãƒ ã«è¿½åŠ ã™ã‚‹ã€‚ã“ã‚Œã«ä¼´ã„ã€HUD ã«ã‚‚ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã—ã¦ã„ãã€‚</p><p>ã§ã¯ã€ã€ŒGame.tscnã€ã‚·ãƒ¼ãƒ³ã‚’é–‹ã„ã¦æ‰‹é †ã‚’é€²ã‚ã¦ã„ã“ã†ã€‚</p><br><h2 id=ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹</h2><p>ã€ŒHUDã€ãƒãƒ¼ãƒ‰ã®ã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰ã®æ¬¡ã«ã€æ–°ãŸã«ã€ŒVBoxContainerã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€åå‰ã‚’ã€ŒMidBoxã€ã«å¤‰æ›´ã—ã‚ˆã†ã€‚<br>ã•ã‚‰ã«ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã«ã¯ã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ 2 ã¤è¿½åŠ ã—ã€ãã‚Œãã‚Œã®åå‰ã‚’ã€ŒHighScoreã€ã€ã€ŒHighLevelã€ã«å¤‰æ›´ã—ã‚ˆã†ã€‚ã“ã‚Œã§ã€ŒHUDã€ãƒãƒ¼ãƒ‰ã®æ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ãŸã¯ãšã ã€‚</p><p><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_1.png alt=HUDã®æ§‹æˆ></p><br><h2 id=è¿½åŠ ã—ãŸãƒãƒ¼ãƒ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹>è¿½åŠ ã—ãŸãƒãƒ¼ãƒ‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹</h2><p>ã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰ã¨ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã®ä½ç½®ã¨æ ã®å¤§ãã•ã‚’ç·¨é›†ã™ã‚‹ã€‚HUD ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ã®é…ç½®ã®éƒ½åˆä¸Šã€å…¨ã¦ç”»é¢ä¸Šç«¯ã«ä¸¦ã¹ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p><p>2D ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã§ã€ŒMidBoxã€ã‚’ãƒ‰ãƒ©ãƒƒã‚°ã—ã¦ç”»é¢ä¸Šç«¯ä¸­å¤®ã«é…ç½®ã—ã¦ã‚‚å•é¡Œãªã„ãŒã€ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§æ•°å€¤ã‚’èª¿æ•´ã™ã‚‹ãªã‚‰ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã§ã€ŒMarginã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä»¥ä¸‹ã®å€¤ã«ãªã‚‹ã‚ˆã†ã«ã—ã‚ˆã†ã€‚</p><ul><li>ã€ŒLeftBoxã€ãƒãƒ¼ãƒ‰<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_2.png alt=LeftBoxã®Marginãƒ—ãƒ­ãƒ‘ãƒ†ã‚£></li><li>ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_3.png alt=MidBoxã®Marginãƒ—ãƒ­ãƒ‘ãƒ†ã‚£></li></ul><p>ã“ã‚Œã§ã€ç”»é¢ä¸Šç«¯ä¸­å¤®ã«ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ãŒé…ç½®ã•ã‚ŒãŸã€‚</p><p>æ¬¡ã«ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ã€ŒMidBoxã€ãƒãƒ¼ãƒ‰ã®å­ãƒãƒ¼ãƒ‰ã§ã‚ã‚‹ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã¨ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’è¨­å®šã™ã‚‹ã€‚</p><ul><li>ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼šã€ŒH Scr: 0ã€</li><li>ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼šã€ŒH Lvl: 1ã€</li></ul><p>ã“ã®æ™‚ç‚¹ã§ã€ã‚²ãƒ¼ãƒ ç”»é¢ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ãŸã¯ãšã ã€‚</p><p><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_4.png alt=ã‚²ãƒ¼ãƒ ç”»é¢ã§HUDã®è¦‹ãŸç›®ã‚’ç¢ºèª></p><br><h2 id=gamegd-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹>Game.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹</h2><p>HUD ã®è¦‹ãŸç›®ã¯æ›´æ–°ã§ããŸã®ã§ã€æ¬¡ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§è¡¨ç¤ºã•ã‚Œã‚‹å€¤ã‚’åˆ¶å¾¡ã—ã¦ã„ãã€‚ã“ã“ã§ã€ã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã¨ä¿å­˜ã•ã‚ŒãŸã‚²ãƒ¼ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€æ©Ÿèƒ½ã‚’æ–°ãŸã«å®Ÿè£…ã—ã¦ã„ãã€‚</p><p>ã§ã¯ã“ã“ã‹ã‚‰ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚</p><br><h3 id=å¿…è¦ãªå®šæ•°ã¨å¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹>å¿…è¦ãªå®šæ•°ã¨å¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹</h3><p>ã¾ãšã¯æ–°ãŸã«ã„ãã¤ã‹å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ãã€‚ã€Œ# è¿½åŠ ã€ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’è¨˜è¿°ã—ã¦ã„ã‚‹è¡ŒãŒä»Šå›å®šç¾©ã—ãŸå®šæ•°ã¨å¤‰æ•°ã ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>extends</span> <span class=nc>Node2D</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>POINT</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>MAX_LIFE</span> <span class=o>=</span> <span class=mi>5</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>SCORE_FILE_PATH</span> <span class=o>=</span> <span class=s2>&#34;user://score_record.save&#34;</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>export</span> <span class=kd>var</span> <span class=n>drop_rate</span> <span class=o>=</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>level_num</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>high_level_num</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>score</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>high_score</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ï¼ˆä¸­ç•¥ï¼‰</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_level</span> <span class=o>=</span> <span class=nx>$HUD/LeftBox/Level</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_high_level</span> <span class=o>=</span> <span class=nx>$HUD/MidBox/HighLevel</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_score</span> <span class=o>=</span> <span class=nx>$HUD/LeftBox/Score</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_high_score</span> <span class=o>=</span> <span class=nx>$HUD/MidBox/HighScore</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ï¼ˆå¾Œç•¥ï¼‰</span>
</span></span></code></pre></div><p>ã¾ãš<code>const</code>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å®šç¾©ã—ã¦ã„ã‚‹ã®ã¯<code>SCORE_FILE_PATH</code>ã¨ã„ã†å®šæ•°ã ã€‚ãã®å€¤ã‚’<code>"user://score_record.save"</code>ã¨ã—ã¦ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ãŸã€‚</p><p>ã“ã®ã‚ˆã†ã«ã€ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®é ­ã«<code>user://</code>ã‚’ã¤ã‘ã‚‹ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ‰€å®šã®å ´æ‰€ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ãã‚Œã‚‹ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚ã°ã€ã‚·ãƒ¼ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã€ã‚²ãƒ¼ãƒ ã‚’ä¸€åº¦çµ‚äº†ã—ã¦ã‹ã‚‰å†é–‹ã—ã¦ã‚‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã€ä»¥å‰ãƒ—ãƒ¬ã‚¤ã—ãŸæ™‚ã®çŠ¶æ…‹ã‚’å¼•ãç¶™ãã“ã¨ãŒå¯èƒ½ã ã€‚</p><p>æ¬¡ã«å¤‰æ•°<code>high_level_num</code>ã ãŒã€ã“ã‚Œã¯ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«å‰å›ã¾ã§ã®ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’æ¸¡ã—ã¦ãŠããŸã‚ã®ã‚‚ã®ã ã€‚åŒæ§˜ã«ã€ã‚‚ã†ä¸€ã¤ã®å¤‰æ•°<code>high_score</code>ã«ã¯ã€ã‚²ãƒ¼ãƒ é–‹å§‹æ™‚ã«å‰å›ã¾ã§ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚’æ¸¡ã—ã¦ãŠãã€‚ã¾ãŸã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã®æ™‚ã«ã€è¨˜éŒ²ãŒæ›´æ–°ã•ã‚Œã‚‹éš›ã«ã‚‚åˆ©ç”¨ã™ã‚‹ã€‚</p><p>ç¶šã„ã¦<code>onready</code>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä»˜ãã®å¤‰æ•°ã ãŒã€ã“ã‚Œã‚‰ã¯ç‰¹å®šã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã™ã®ã«ä½¿ã£ã¦ã„ã‚‹ã€‚<code>hud_high_level</code>ã¯ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã‚’ã€<code>hud_high_score</code>ã¯ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã—ã¦ã„ã‚‹ã€‚</p><br><h3 id=ä¿å­˜ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹>ä¿å­˜ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</h3><p>å¼•ãç¶šãã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã€ã‚²ãƒ¼ãƒ ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãŸã‚ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>save_data</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;last_level&#34;</span><span class=p>:</span> <span class=n>level_num</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;high_level&#34;</span><span class=p>:</span> <span class=n>high_level_num</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;last_score&#34;</span><span class=p>:</span> <span class=n>score</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;high_score&#34;</span><span class=p>:</span> <span class=n>high_score</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>WRITE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>store_line</span><span class=p>(</span><span class=nf>to_json</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span></code></pre></div><p><code>save_data</code>ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ãŸã€‚ã¾ãšå¤‰æ•°<code>data</code>ã‚’ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®šç¾©ã—ã¦ã„ã‚‹ã€‚ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®šç¾©ã—ãŸå¤‰æ•°ã¯ã€ãã®ãƒ¡ã‚½ãƒƒãƒ‰ã®å¤–ã§ã¯ä½¿ãˆãªã„ã®ã§æ³¨æ„ã—ã¦ã»ã—ã„ã€‚<code>data</code>ã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã§<code>{"key": value}</code>ã®çµ„ã¿åˆã‚ã›ã§è¤‡æ•°ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã¾ã¨ã‚ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚</p><p>ã“ã“ã§ã¯ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦ä¿å­˜ã—ãŸã„å€¤ã‚’æ ¼ç´ã—ãŸ<code>level_num</code>ã€<code>high_level_num</code>ã€<code>score</code>ã€<code>high_score</code>ã®4ã¤ã®å¤‰æ•°ãã‚Œãã‚Œã‚’ Value ã¨ã—ã€å¯¾å¿œã™ã‚‹ Key ã‚’"last_level"ã€&ldquo;high_level&rdquo;ã€&ldquo;last_score&rdquo;ã€&ldquo;high_score"ã¨ã—ã¦å®šç¾©ã—ãŸã€‚</p><p>ãã®ã‚ã¨ã¯<code>file</code>ã¨ã„ã†å¤‰æ•°ã‚’å®šç¾©ã—ã¦ã„ã‚‹ã€‚<code>new</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã¦ä½œæˆã•ã‚ŒãŸ<code>File</code>ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’å€¤ã¨ã—ã¦ä»£å…¥ã—ã¦ã„ã‚‹ã€‚ã“ã‚Œä»¥é™<code>File</code>ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç¶šãã€‚</p><p>ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ã«ã¯ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãå¿…è¦ãŒã‚ã‚‹ã€‚<code>open</code>ã¯ç¬¬ä¸€å¼•æ•°ã§æŒ‡å®šã—ãŸãƒ‘ã‚¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ããƒ¡ã‚½ãƒƒãƒ‰ã ã€‚ã“ã“ã§ã¯ã€å…ˆã«å®šç¾©ã—ãŸå®šæ•°<code>SCORE_FILE_PATH</code>ï¼ˆ<code>"user://score_record.save"</code>ï¼‰ã‚’ç¬¬ä¸€å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¦ã„ã‚‹ã€‚ç¬¬äºŒå¼•æ•°ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ãã®ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹ã€‚ã“ã“ã§ã¯ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ä¿å­˜ã—ãŸã„ã®ã§ã€<code>WRITE</code>ã‚’æŒ‡å®šã—ã¦æ›¸ãè¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ã„ã‚‹ã€‚</p><p>æ¬¡ã«<code>store_line</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãè¾¼ã‚“ã§ã„ã‚‹ã€‚<code>store_xxx</code>ã¨ã„ã†åå‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ä»–ã«ã‚‚ã„ãã¤ã‹ã‚ã‚‹ãŒã€ã“ã®<code>store_line</code>ã¯1è¡Œã®<code>string</code>å‹ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€ã€‚ãã—ã¦ã€<code>store_line</code>ã®å¼•æ•°ãŒæ›¸ãè¾¼ã‚€ãƒ‡ãƒ¼ã‚¿ã«ãªã‚‹ãŒã€ã“ã“ã§ã¯å…ˆã«å®šç¾©ã—ãŸè¾æ›¸å‹ã®å¤‰æ•°<code>data</code>ã‚’<code>to_json</code>ã§å¤‰æ›ã—ãŸå€¤ã‚’æŒ‡å®šã—ã¦ã„ã‚‹ã€‚<code>data</code>ã¯è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã§ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆä¸Šã¯è¦‹ã‚„ã™ã•ã®ãŸã‚æ”¹è¡Œã—ã¦ã„ã‚‹ãŒã€å®Ÿéš›ã«ã¯1è¡Œã®ãƒ‡ãƒ¼ã‚¿ã ã€‚</p><p>ã“ã“ã§<code>to_json</code>ã«ã¤ã„ã¦ã‚‚èª¬æ˜ã—ã¦ãŠãã€‚ã¾ãšã€ŒJSONã€ã¨ã„ã†ã®ã¯ã€ŒJavaScript Object Notationã€ã®ç•¥ã§ã€JavaScript ã¨ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã§ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¨˜è¿°æ–¹å¼ã§ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã ã€‚ãã—ã¦ã€ãã®æ§‹é€ ã¯ GDScript ã‚’å«ã‚€å„ç¨®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã«ã‚‚ãã£ãã‚Šã®<code>{"key": value}</code>ã¨ã„ã†å½¢å¼ã ã€‚å…ˆã«ä¿å­˜ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã‚’è¾æ›¸å‹ã§ã¾ã¨ã‚ã¦ãŠãã€ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã¨ãã«ãã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã‚’<code>to_json</code>ãƒ¡ã‚½ãƒƒãƒ‰ã®å¼•æ•°ã«ã—ã¦ã€JSONå½¢å¼ã«å¤‰æ›ã—ã¦ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ã—ãŸã¨ã„ã†ã‚ã‘ã ã€‚</p><p>æœ€å¾Œã«<code>close</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã¦ã„ã‚‹ã€‚é–‹ãã£ã±ãªã—ã«ã—ã¦ã€ãƒ¡ãƒ¢ãƒªã‚’æ¶ˆè€—ã—ãªã„ã‚ˆã†æ³¨æ„ã—ã‚ˆã†ã€‚</p><br><h3 id=èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹>èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</h3><p>ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã€ä»Šåº¦ã¯ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>load_data</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=nf>file_exists</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>READ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=nf>parse_json</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=nf>get_line</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>data</span> <span class=o>!=</span> <span class=kt>null</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>high_score</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_score&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>			<span class=n>high_level_num</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_level&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_high_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;H Scr: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>high_score</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_high_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;H Lvl: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>high_level_num</span><span class=p>)</span>
</span></span></code></pre></div><p>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã®ã¯<code>load_data</code>ã¨ã„ã†ãƒ¡ã‚½ãƒƒãƒ‰ã ã€‚</p><p>å…ˆã»ã©ã®æ›¸ãè¾¼ã¿ãƒ¡ã‚½ãƒƒãƒ‰<code>save_data</code>ã¨åŒæ§˜ã«ã€ã¾ãšã¯<code>File</code>ã‚¯ãƒ©ã‚¹ã®<code>new</code>ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šã€<code>File</code>ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã€‚ãã“ã‹ã‚‰ã¾ãŸ<code>File</code>ã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãŒç¶šããŒé †ç•ªã«è¦‹ã¦ã„ã“ã†ã€‚</p><p>ã¾ãšã¯<code>if</code>æ§‹æ–‡ã§ã€<code>file_exists</code>ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚Šãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆå®šæ•°<code>SCORE_FILE_PATH</code>ã®å€¤ï¼‰ãŒã‚ã‚‹ã‹ç¢ºèªã—ã¦ã„ã‚‹ã€‚ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°<code>if</code>ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®å‡¦ç†ã‚’ç¶šè¡Œã™ã‚‹ã€‚</p><p>ã§ã¯<code>if</code>ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã„ã“ã†ã€‚ã¾ãšã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’<code>open</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§é–‹ãã€‚ã“ã“ã§ã¯ãƒ¢ãƒ¼ãƒ‰ã‚’<code>READ</code>ã«ã—ã¦èª­ã¿è¾¼ã¿ãƒ¢ãƒ¼ãƒ‰ã«ã—ã¦ã„ã‚‹ã€‚</p><p>æ¬¡ã¯<code>get_line</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ä¸€è¡Œã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ã€‚ã“ã®æ™‚ã€ã“ã®èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã¯JSONå½¢å¼ãªã®ã§ã€ã“ã‚Œã‚’<code>parse_json</code>ãƒ¡ã‚½ãƒƒãƒ‰ GDScript ã®è¾æ›¸å‹ãƒ‡ãƒ¼ã‚¿ã«å¤‰æ›ã—ã¦ã€å¤‰æ•°<code>data</code>ã«æ ¼ç´ã—ã¦ã„ã‚‹ã€‚</p><p>2æ®µå›ç›®ã®<code>if</code>æ§‹æ–‡ã ãŒã€ã‚‚ã—å¤‰æ•°<code>data</code>ãŒç©ºã£ã½ã®<code>null</code>ã§ãªã‘ã‚Œã°ã€å¤‰æ•°<code>high_score</code>ã«ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ã„ã‚‹ãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ã€å¤‰æ•°<code>high_level_num</code>ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ã„ã‚‹ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä»£å…¥ã™ã‚‹ã€‚</p><p>ãã“ã¾ã§ã§ããŸã‚‰ã€å¿˜ã‚Œãšã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’<code>close</code>ãƒ¡ã‚½ãƒƒãƒ‰ã§é–‰ã˜ã‚‹ã€‚</p><p>æœ€å¾Œã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å¾—ãŸãã‚Œãã‚Œã®ãƒ‡ãƒ¼ã‚¿ã‚’<code>string</code>å½¢ã«å¤‰æ›ã—ã¦ã€é ­ã«<code>H Str: </code>ã€<code>H Lvl: </code>ã‚’ä»˜ã‘è¶³ã—ã¦ã€HUD ã®ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã¨ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ãã‚Œãã‚Œã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«é©ç”¨ã—ã¦ã„ã‚‹ã€‚</p><br><h3 id=è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹>è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹</h3><p>ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã¨ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç”¨æ„ã§ããŸã®ã§ã€ãã‚Œã‚‰ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›´æ–°ã—ã¦ã„ãã€‚</p><p>ã¾ãšã¯<code>_ready</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_ready</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nb>randomize</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_new_level</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_new_ball</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>update_hud_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>load_data</span><span class=p>()</span> <span class=c1># è¿½åŠ </span>
</span></span></code></pre></div><p>å˜ç´”ã«ã€å…ˆã»ã©ä½œæˆã—ãŸ<code>load_data</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã—ãŸã ã‘ã ã€‚ã“ã‚Œã§ã€ã‚²ãƒ¼ãƒ é–‹å§‹å‰ã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚„ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®å€¤ã‚’å–å¾—ã—ã¦ HUD ã«åæ˜ ã—ã¦ãã‚Œã‚‹ã€‚</p><br><p>æ¬¡ã«<code>_on_Ball_tree_exited</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã™ã‚‹ã€‚ã¡ãªã¿ã«ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã¯ã€ãƒœãƒ¼ãƒ«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ¶ˆãˆã‚‹æ™‚ã«ç™ºä¿¡ã•ã‚Œã‚‹ã‚·ã‚°ãƒŠãƒ«ã«ã‚ˆã£ã¦å‘¼ã°ã‚Œã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_Ball_tree_exited</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;_on_Ball_tree_exited() called&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>no_ball</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;Balls&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;found ball&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=n>no_ball</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>			<span class=k>break</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>no_ball</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>is_playing</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>life</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=n>life</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=n>high_score</span> <span class=o>&lt;</span> <span class=n>score</span><span class=p>:</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>					<span class=n>high_score</span> <span class=o>=</span> <span class=n>score</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=n>high_level_num</span> <span class=o>&lt;</span> <span class=n>level_num</span><span class=p>:</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>					<span class=n>high_level_num</span> <span class=o>=</span> <span class=n>level_num</span>
</span></span><span class=line><span class=cl>				<span class=nf>save_data</span><span class=p>()</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>				<span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>change_scene</span><span class=p>(</span><span class=s2>&#34;res://scene/GameOverView.tscn&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>				<span class=nf>update_hud_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>				<span class=n>life_down_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>		<span class=c1>#ï¼ˆå¾Œç•¥ï¼‰</span>
</span></span></code></pre></div><p>ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰å†…ã®<code>if no_ball:</code>ã§ãƒã‚¹ãƒˆã•ã‚ŒãŸ<code>if is_playing:</code>ã§ã•ã‚‰ã«ãƒã‚¹ãƒˆã•ã‚ŒãŸ<code>if life &lt;= 0:</code>ãƒ–ãƒ­ãƒƒã‚¯å†…ã‚’ç·¨é›†ã™ã‚‹ã€‚ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã‚³ãƒ¼ãƒ‰ã¯ã€ã€ç”»é¢ã‹ã‚‰ãƒœãƒ¼ãƒ«ãŒä¸€ã¤ã‚‚ç„¡ããªã£ãŸå ´åˆã€ã€ã€ã‚²ãƒ¼ãƒ ãƒ—ãƒ¬ã‚¤ä¸­ã§ã‚ã‚Šã€ã€ã€ãƒ©ã‚¤ãƒ•ãŒ 0ã€ã®å ´åˆã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚ã¤ã¾ã‚Šã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã‚‹å ´åˆã ã€‚</p><p>å…ƒã€…ã“ã®ãƒ–ãƒ­ãƒƒã‚¯ã«ã¯ã€ã‚·ãƒ¼ãƒ³ã‚’ã€ŒGameOverView.tscnã€ã«åˆ‡ã‚Šæ›¿ãˆã¦ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã™ã‚‹ãŸã‚ã®ã‚³ãƒ¼ãƒ‰<code>get_tree().change_scene("res://scene/GameOverView.tscn")</code>ã®ã¿ã‚’è¨˜è¿°ã—ã¦ã„ãŸã€‚ä»Šå›ã¯ãã®ã‚³ãƒ¼ãƒ‰ã®å‰ã«ã€ãƒã‚¤ã‚¹ã‚³ã‚¢ã¨ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’æ›´æ–°ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ãŸã€‚</p><p>å…·ä½“çš„ã«ã¯ã€ã“ã‚Œã¾ã§ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã‚’è¡¨ã™å¤‰æ•°<code>high_score</code>ã®å€¤ãŒä»Šãƒ—ãƒ¬ã‚¤ã—ã¦ã„ãŸæ™‚ã®ã‚¹ã‚³ã‚¢ã‚’è¡¨ã™å¤‰æ•°<code>score</code>ã®å€¤ã‚ˆã‚Šå°ã•ã‘ã‚Œã°ã€<code>score</code>ã®å€¤ã‚’æ–°ã—ã„ãƒã‚¤ã‚¹ã‚³ã‚¢ã¨ã—ã¦<code>high_score</code>ã¸ä»£å…¥ã™ã‚‹ã€ã¨ã„ã†ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’<code>if</code>æ§‹æ–‡ã§è¨˜è¿°ã—ãŸã€‚</p><p>åŒæ§˜ã«ã€ã“ã‚Œã¾ã§ã®ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã‚’è¡¨ã™å¤‰æ•°<code>high_level_num</code>ã®å€¤ãŒä»Šãƒ—ãƒ¬ã‚¤ã—ã¦ã„ãŸæ™‚ã®ãƒ¬ãƒ™ãƒ«ã‚’è¡¨ã™å¤‰æ•°<code>level_num</code>ã®å€¤ã‚ˆã‚Šå°ã•ã‘ã‚Œã°ã€<code>level_num</code>ã®å€¤ã‚’æ–°ã—ã„ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã¨ã—ã¦<code>high_level_num</code>ã¸ä»£å…¥ã™ã‚‹ã‚ˆã†è¨˜è¿°ã—ãŸã€‚</p><br><hr><h1 id=ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã‚’æ›´æ–°ã™ã‚‹>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã‚’æ›´æ–°ã™ã‚‹</h1><p>æ¬¡ã«ãƒã‚¤ã‚¹ã‚³ã‚¢ã€ãƒã‚¤ãƒ¬ãƒ™ãƒ«ã®è¡¨ç¤ºãŒå¿…è¦ãªã®ãŒã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã ã€‚ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å¿ƒæƒ…ã¨ã—ã¦ã¯ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã«ã€æœ€çµ‚çš„ã«è‡ªåˆ†ã®ã‚¹ã‚³ã‚¢ãŒã©ã®ç¨‹åº¦ã§ã©ã®ãƒ¬ãƒ™ãƒ«ã¾ã§åˆ°é”ã—ãŸã®ã‹ã‚’ç¢ºèªã—ãŸã„ã€‚ã•ã‚‰ã«ã€ãã®çµæœã¯ã“ã‚Œã¾ã§ã®æœ€é«˜è¨˜éŒ²ã‚’å¡—ã‚Šæ›¿ãˆãŸã®ã‹ã©ã†ã‹ã‚‚çŸ¥ã‚ŠãŸã„ã‚‚ã®ã ã€‚</p><p>ã—ãŸãŒã£ã¦ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«ã¯ä»¥ä¸‹ã®4ã¤ã®çµæœã‚’è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã€‚</p><ul><li>ãƒã‚¤ã‚¹ã‚³ã‚¢ï¼ˆéå»æœ€é«˜ç²å¾—ã‚¹ã‚³ã‚¢ï¼‰</li><li>ãƒ©ã‚¹ãƒˆã‚¹ã‚³ã‚¢ï¼ˆä»Šã®ãƒ—ãƒ¬ã‚¤ã§æœ€çµ‚çš„ã«ç²å¾—ã—ãŸã‚¹ã‚³ã‚¢ï¼‰</li><li>ãƒã‚¤ãƒ¬ãƒ™ãƒ«ï¼ˆéå»æœ€é«˜åˆ°é”ãƒ¬ãƒ™ãƒ«ï¼‰</li><li>ãƒ©ã‚¹ãƒˆãƒ¬ãƒ™ãƒ«ï¼ˆä»Šã®ãƒ—ãƒ¬ã‚¤ã§æœ€çµ‚çš„ã«åˆ°é”ã—ãŸãƒ¬ãƒ™ãƒ«ï¼‰</li></ul><p>ãã‚Œã§ã¯ã€ŒGameOverView.tscnã€ã‚·ãƒ¼ãƒ³ã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚</p><br><h2 id=ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹>ãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã™ã‚‹</h2><p>ä»¥ä¸‹ã®æ‰‹é †ã§ã€ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ãŠã‚ˆã³ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã«ã¦ã€å¿…è¦ãªãƒãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†ã—ã¦ã„ã“ã†ã€‚</p><ol><li><p>ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒVBoxã€ãƒãƒ¼ãƒ‰ã«ã€ŒVBoxContainerã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ä¸€ã¤è¿½åŠ ã—ã¦ã€åå‰ã‚’ã€ŒResultsContainerã€ã«å¤‰æ›´ã™ã‚‹ã€‚</p></li><li><p>ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã®é †ç•ªã‚’ã€ŒGameOverLavelã€ãƒãƒ¼ãƒ‰ã®ä¸‹ã€ã€ŒMessageã€ãƒãƒ¼ãƒ‰ã®å‰ã«ç§»å‹•ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_4.1.png alt=ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ä¸Šã®ResultsContainerãƒãƒ¼ãƒ‰ã®é †ç•ª></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Constantsã€ï¼ã€ŒSeparationã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’<code>10</code>ã«ã—ã¦æœ‰åŠ¹ã«ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_5.png alt=ResultsContainerã®Separationãƒ—ãƒ­ãƒ‘ãƒ†ã‚£></p></li><li><p>ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒResultsContainerã€ãƒãƒ¼ãƒ‰ã«ã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãƒãƒ¼ãƒ‰ã‚’ 1 ã¤è¿½åŠ ã—ã€åå‰ã‚’ã€ŒHighScoreã€ã«å¤‰æ›´ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_5.1.png alt=HighScoreãƒãƒ¼ãƒ‰ã®è¿½åŠ ></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒAlignã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒCenterã€ã«å¤‰æ›´ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_6.png alt=HighScoreãƒãƒ¼ãƒ‰ã®Alignãƒ—ãƒ­ãƒ‘ãƒ†ã‚£></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒUppercaseã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€Œã‚ªãƒ³ã€ã«ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_7.png alt=HighScoreãƒãƒ¼ãƒ‰ã®Uppercaseãƒ—ãƒ­ãƒ‘ãƒ†ã‚£></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§æ—¢å­˜ã®ã€ŒMessageã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_8.png alt=Messageãƒãƒ¼ãƒ‰ã®DynamicFontã‚’ã‚³ãƒ”ãƒ¼></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã«è²¼ã‚Šä»˜ã‘ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_9.png alt=HighScoreãƒãƒ¼ãƒ‰ã®DynamicFontã«è²¼ã‚Šä»˜ã‘></p></li><li><p>ã•ã‚‰ã«ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒFontã€ã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯åŒ–ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_10.png alt=HighScoreãƒãƒ¼ãƒ‰ã®DynamicFontã‚’ãƒ¦ãƒ‹ãƒ¼ã‚¯åŒ–></p></li><li><p>ã•ã‚‰ã«ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒCustom Fontsã€ï¼ã€ŒSettingsã€ï¼ã€ŒSizeã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’<code>16</code>ã«ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_11.png alt=HighScoreãƒãƒ¼ãƒ‰ã®DynamicFontã®Sizeã‚’ç·¨é›†></p></li><li><p>ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã‚’3ã¤è¤‡è£½ã—ã€ãã‚Œã‚‰ã®åå‰ã‚’ä¸Šã‹ã‚‰é †ç•ªã«ã€ŒLastScoreã€ã€ã€ŒHighLevelã€ã€ã€ŒLastLevelã€ã«å¤‰æ›´ã™ã‚‹ã€‚ã“ã®æ™‚ç‚¹ã§ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_12.png alt=GameOverView.tscnãƒãƒ¼ãƒ‰è¿½åŠ å¾Œã®ã‚·ãƒ¼ãƒ³ãƒ‰ãƒƒã‚¯></p></li><li><p>ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ‰ãƒƒã‚¯ã§ã€ŒHighScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒHigh Score: 0ã€ã«ã™ã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_13.png alt=HighScoreãƒãƒ¼ãƒ‰ã®Textãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç·¨é›†></p></li><li><p>åŒæ§˜ã«ã€ŒLastScoreã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒLast Score: 0ã€ã«ã™ã‚‹ã€‚</p></li><li><p>åŒæ§˜ã«ã€ŒHighLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒHigh Level: 0ã€ã«ã™ã‚‹ã€‚</p></li><li><p>åŒæ§˜ã«ã€ŒLastLevelã€ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ã€ŒLast Level: 0ã€ã«ã™ã‚‹ã€‚</p></li></ol><p>ã“ã“ã¾ã§ã®æ‰‹é †ãŒã§ããŸã‚‰ã€2D ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã‚‹ã¯ãšã ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_14.png alt=GameOverViewç·¨é›†å¾Œã®2Dãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹></p><br><h2 id=gameoverviewgd-ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹>GameOverView.gd ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›´æ–°ã™ã‚‹</h2><p>ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã®ãƒãƒ¼ãƒ‰ã®è¿½åŠ ã¨ç·¨é›†ãŒã§ããŸã®ã§ã€ã“ã“ã‹ã‚‰ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«åˆ‡ã‚Šæ›¿ã‚ã‚‹éš›ã®ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã‚’å®Ÿè£…ã—ã¦ã„ãã€‚ã¡ãªã¿ã«ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ãªã®ã§ã€ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜æ©Ÿèƒ½ã¯ä¸è¦ã ã€‚</p><p>ãã‚Œã§ã¯ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ã„ã“ã†ã€‚</p><br><h3 id=å¿…è¦ãªå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹>å¿…è¦ãªå¤‰æ•°ã‚’è¿½åŠ ã™ã‚‹</h3><p>ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨ãã®èª­ã¿è¾¼ã‚“ã ãƒ‡ãƒ¼ã‚¿ã‚’ç”»é¢ã«åæ˜ ã•ã›ã‚‹ãŸã‚ã«ã€ã¾ãšã¯å¤‰æ•°ã‚’ã„ãã¤ã‹è¿½åŠ ã—ã¦ãŠãã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>const</span> <span class=n>SCORE_FILE_PATH</span> <span class=o>=</span> <span class=s2>&#34;user://score_record.save&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>high_score</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/HighScore</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>last_score</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/LastScore</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>high_level</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/HighLevel</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>last_level</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/LastLevel</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ï¼ˆå¾Œç•¥ï¼‰</span>
</span></span></code></pre></div><p><code>const</code>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§å®šæ•°<code>SCORE_FILE_PATH</code>ã‚’å®šç¾©ã—ãŸã€‚å€¤ã¯ãƒ‡ãƒ¼ã‚¿ãŒä¿å­˜ã•ã‚Œã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹ã ã€‚ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚‚åŒã˜å®šæ•°ã‚’å®šç¾©ã—ãŸã¨ã“ã‚ã§ã‚ã‚‹ã€‚</p><p>æ¬¡ã«<code>onready</code>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ä»˜ãã®å¤‰æ•°ã‚’<code>high_score</code>ã‚’ã¯ã˜ã‚ã¨ã—ã¦ 4 ã¤å®šç¾©ã—ã¦ã„ã‚‹ãŒã€ã“ã‚Œã‚‰ã¯ä»Šå›è¿½åŠ ã—ãŸã€ŒLabelã€ã‚¯ãƒ©ã‚¹ã®ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã‚’æŒ‡ã—ã¦ã„ã‚‹ã€‚</p><br><h3 id=èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹-1>èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹</h3><p>ã»ã©ã‚“ã©ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§å®Ÿè£…ã—ãŸå†…å®¹ã¨åŒã˜ã«ãªã‚‹ãŒã€ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ–¹ã§ã‚‚ã€ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ç”¨ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>load_data</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=nf>file_exists</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>READ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=nf>parse_json</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=nf>get_line</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>data</span> <span class=o>!=</span> <span class=kt>null</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>high_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;High Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_score&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>last_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Last Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;last_score&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>high_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;High Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_level&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>last_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Last Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;last_level&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span></code></pre></div><p><code>laod_data</code>ã¨ã„ã†åå‰ã§èª­ã¿è¾¼ã¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã—ãŸã€‚<code>if data != null:</code>ã®è¡Œã¾ã§ã¯ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨å…¨ãåŒã˜ã ãŒã€ãã®<code>if</code>ãƒ–ãƒ­ãƒƒã‚¯ã®ä¸­ã®ã‚³ãƒ¼ãƒ‰ãŒã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ä»•æ§˜ã«ãªã£ã¦ã„ã‚‹ã€‚</p><p>ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦ç´„ã™ã‚‹ã¨ã€ãƒ‡ãƒ¼ã‚¿ä¿å­˜å…ˆã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚Œã°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã€ãã®ã‚ã¨ãƒ‡ãƒ¼ã‚¿ãŒç©ºã£ã½ã§ãªã‘ã‚Œã°ã€å˜ç´”ã«ã€ŒHighScoreã€ã€ã€ŒLastScoreã€ã€ã€ŒHighLevelã€ã€ã€ŒLastLevelã€ãã‚Œãã‚Œã®ãƒãƒ¼ãƒ‰ã®ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰å–å¾—ã—ãŸJSONãƒ‡ãƒ¼ã‚¿ã‚’æœ€çµ‚çš„ã«<code>string</code>å‹ã«å¤‰æ›ã—ã¦åæ˜ ã™ã‚‹ã€‚ã‚‚ã—ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã€ã¾ãŸã¯ãƒ‡ãƒ¼ã‚¿ãŒãªã‘ã‚Œã°ã€ã€ŒTextã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¨­å®šã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚</p><p>ãªãŠã€ç¹°ã‚Šè¿”ã—ã«ãªã‚‹ãŒã€æœ€å¾Œã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‰ã˜ã‚‹<code>close</code>ãƒ¡ã‚½ãƒƒãƒ‰ã¯å¿˜ã‚Œã¦ã¯ã„ã‘ãªã„ã€‚</p><br><h3 id=è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹-1>è¿½åŠ ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§å®Ÿè¡Œã•ã›ã‚‹</h3><p>èª­ã¿è¾¼ã¿ç”¨ãƒ¡ã‚½ãƒƒãƒ‰ãŒå®šç¾©ã§ããŸã®ã§ã€ã“ã‚Œã‚’<code>_ready</code>ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§å®Ÿè¡Œã•ã›ã‚‹ã€‚ã‚³ãƒ¼ãƒ‰ã¯è‡³ã£ã¦ã‚·ãƒ³ãƒ—ãƒ«ã ã€‚</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_ready</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nf>load_data</span><span class=p>()</span>
</span></span></code></pre></div><p>ã“ã‚Œã ã‘ã§ã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã—ãŸæ™‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã•ãˆã—ãªã‘ã‚Œã°ã€ãã¡ã‚“ã¨ç”»é¢ä¸Šã«ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã—ã¦ãã‚Œã‚‹ã¯ãšã ã€‚ä»Šã¯ã¾ã ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ãªã„ã®ã§ã€ã‚·ãƒ¼ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ã§è¡¨ç¤ºã•ã‚Œã‚‹ã€‚<br><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_15.png alt=GameOverViewã‚·ãƒ¼ãƒ³ã‚’å®Ÿè¡Œ></p><br><hr><h1 id=æœ€çµ‚ç¢ºèª>æœ€çµ‚ç¢ºèª</h1><p>ãã‚Œã§ã¯æœ€å¾Œã«ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ãŒã†ã¾ãã„ãã‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’å®Ÿè¡Œã—ã¦ç¢ºèªã—ã¦ã¿ã‚ˆã†ã€‚</p><p><img loading=lazy src=/images/tutorials/gd0004_breakout/breakout_13/img_16.gif alt=GameOverViewã‚·ãƒ¼ãƒ³ã‚’å®Ÿè¡Œ></p><ul><li>åˆå›ãƒ—ãƒ¬ã‚¤æ™‚ã€ãƒ©ã‚¤ãƒ•ãŒ 0 ã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ‡ãƒ¼ã‚¿ãŒãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã•ã‚Œã€ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã«é·ç§»ã—ãŸæ™‚ã«ãã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œç”»é¢ä¸Šã«çµæœãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚</li><li>2å›ç›®ã€3å›ç›®ãƒ—ãƒ¬ã‚¤æ™‚ã¯ã€æœ€åˆã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‡ãƒ¼ã‚¿ãŒèª­ã¿è¾¼ã¾ã‚Œ HUD ä¸­å¤®ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ã«åæ˜ ã•ã‚ŒãŸã€‚</li><li>2å›ç›®ãƒ—ãƒ¬ã‚¤ã§åˆå›ã‚ˆã‚Šé«˜ã„ã‚¹ã‚³ã‚¢ã‚’ç²å¾—ã—ã¦ã‹ã‚‰ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã€ç”»é¢ã«ã¯æ›´æ–°ã•ã‚ŒãŸãƒã‚¤ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚</li><li>3å›ç›®ãƒ—ãƒ¬ã‚¤ã§2å›ç›®ãƒ—ãƒ¬ã‚¤ã‚ˆã‚Šä½ã„ã‚¹ã‚³ã‚¢ã§ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ã«ãªã£ãŸæ™‚ã€ç”»é¢ã«ã¯2å›ç›®ãƒ—ãƒ¬ã‚¤æ™‚ã®ãƒã‚¤ã‚¹ã‚³ã‚¢ãŒè¡¨ç¤ºã•ã‚ŒãŸã€‚</li><li>1 ~ 3å›ç›®ã®ãƒ—ãƒ¬ã‚¤ã§ã®ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ç”»é¢ã§ãã®æ™‚ã€…ã®ã‚¹ã‚³ã‚¢ãŒã€ŒLast Scoreã€ã«åæ˜ ã•ã‚ŒãŸã€‚</li></ul><p>ä»¥ä¸Šã®ã“ã¨ãŒç¢ºèªã§ããŸã®ã§ã€ä»Šå›ã®ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã¨èª­ã¿è¾¼ã¿ã¯å•é¡Œãªãå®Ÿè£…ã§ããŸã¨åˆ¤æ–­ã§ãã‚‹ã€‚ãªãŠã€ãƒ¬ãƒ™ãƒ«ã®æ–¹ã®ç¢ºèªã¯ã‚«ãƒƒãƒˆã™ã‚‹ãŒã€ã“ã¡ã‚‰ã‚‚å•é¡Œãªã„ã¯ãšã ã€‚</p><p>ã¨ã“ã‚ã§ã€å®Ÿéš›ã«ãƒ‡ãƒãƒƒã‚°ä½œæ¥­ã‚’è¡Œã†ä¸­ã§ã€ä½œæˆã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ãŸã„å ´åˆã‚‚ç™ºç”Ÿã™ã‚‹ã ã‚ã†ã€‚ãã®å ´åˆã¯ã€ã”åˆ©ç”¨ã®OSã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ï¼ˆWindows ãªã‚‰ Explorerã€macOS ãªã‚‰ Finderï¼‰ã‹ã‚‰ä¿å­˜å…ˆã®ãƒ•ã‚©ãƒ«ãƒ€ãƒ‘ã‚¹ã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å‰Šé™¤ã—ã¦ã»ã—ã„ã€‚ãªãŠã€ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜å…ˆã¯ä»¥ä¸‹ã®é€šã‚Šã ã€‚</p><ul><li>Windows: %APPDATA%Â¥GodotÂ¥app_userdataÂ¥[ProjectName]Â¥</li><li>macOS: ~/Library/Application Support/Godot/app_userdata/[ProjectName]/</li><li>Linux: ~/.local/share/godot/app_userdata/[ProjectName]/</li></ul><blockquote><p><strong><span style=color:salmon>Memo:</span></strong><br><em>è©³ç´°ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® <a href=https://docs.godotengine.org/en/3.4/tutorials/io/data_paths.html target=_blank>File paths in Godot projects</a>
ã®é …ç›®ã‚’ã”å‚ç…§ãã ã•ã„ã€‚</em></p></blockquote><br><p>æœ€å¾Œã«ä»Šå›ç·¨é›†ã—ãŸã€ŒGame.gdã€ã¨ã€ŒGameOverView.gdã€ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã®ã‚³ãƒ¼ãƒ‰ã‚‚ã“ã“ã«å…¬é–‹ã—ã¦ãŠãã€‚</p><details><summary>ã€ŒGame.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã‚’è¦‹ã‚‹</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>extends</span> <span class=nc>Node2D</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>POINT</span> <span class=o>=</span> <span class=mi>100</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>MAX_LIFE</span> <span class=o>=</span> <span class=mi>5</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>SCORE_FILE_PATH</span> <span class=o>=</span> <span class=s2>&#34;user://score_record.save&#34;</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>export</span> <span class=kd>var</span> <span class=n>drop_rate</span> <span class=o>=</span> <span class=mf>0.2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>level_num</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>high_level_num</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>score</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>high_score</span><span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>0</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>bonus_rate</span> <span class=o>=</span> <span class=mf>1.0</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>life</span> <span class=o>=</span> <span class=mi>3</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>is_playing</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>is_multiple_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>is_laser_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#onready var level = $Level1 # Removed @ P11</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>next_screen</span> <span class=o>=</span> <span class=nx>$NextScreen</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>next_screen_level</span> <span class=o>=</span> <span class=nx>$NextScreen/VBox/Level</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>next_screen_score</span> <span class=o>=</span> <span class=nx>$NextScreen/VBox/Score</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>next_screen_life</span> <span class=o>=</span> <span class=nx>$NextScreen/VBox/HBox/Life</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_level</span> <span class=o>=</span> <span class=nx>$HUD/LeftBox/Level</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_high_level</span> <span class=o>=</span> <span class=nx>$HUD/MidBox/HighLevel</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_score</span> <span class=o>=</span> <span class=nx>$HUD/LeftBox/Score</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_high_score</span> <span class=o>=</span> <span class=nx>$HUD/MidBox/HighScore</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>hud_rightbox</span> <span class=o>=</span> <span class=nx>$HUD/RightBox</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>paddle</span> <span class=o>=</span> <span class=nx>$Paddle</span>
</span></span><span class=line><span class=cl><span class=c1>#onready var ball = $Ball # Removed @ P11</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>pause_screen</span> <span class=o>=</span> <span class=nx>$PauseScreen</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>life_down_sound</span> <span class=o>=</span> <span class=nx>$LifeDownSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>slow_collide_sound</span> <span class=o>=</span> <span class=nx>$SlowCollideSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>expand_collide_sound</span> <span class=o>=</span> <span class=nx>$ExpandCollideSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>multiple_collide_sound</span> <span class=o>=</span> <span class=nx>$MultipleCollideSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>laser_collide_sound</span> <span class=o>=</span> <span class=nx>$LaserCollideSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>life_collide_sound</span> <span class=o>=</span> <span class=nx>$LifeCollideSound</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>play_bgm</span> <span class=o>=</span> <span class=nx>$PlayBGM</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>paddle_position</span> <span class=o>=</span> <span class=n>paddle</span><span class=o>.</span><span class=n>position</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>paddle_scale</span> <span class=o>=</span> <span class=n>paddle</span><span class=o>.</span><span class=n>scale</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl><span class=c1>#onready var ball_position = ball.position # Removed @ P11</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>ball</span> <span class=o>=</span> <span class=nb>preload</span><span class=p>(</span><span class=s2>&#34;res://scene/Ball.tscn&#34;</span><span class=p>)</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>laser</span> <span class=o>=</span> <span class=nb>preload</span><span class=p>(</span><span class=s2>&#34;res://scene/Laser.tscn&#34;</span><span class=p>)</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>powerup</span> <span class=o>=</span> <span class=nb>preload</span><span class=p>(</span><span class=s2>&#34;res://scene/Powerup.tscn&#34;</span><span class=p>)</span> <span class=c1># Added @ P10</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>level</span> <span class=o>=</span> <span class=kt>null</span> <span class=c1># Updated @ P11</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_ready</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nb>randomize</span><span class=p>()</span> <span class=c1># Added @ P10</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_new_level</span><span class=p>()</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_new_ball</span><span class=p>()</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=nf>update_hud_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>load_data</span><span class=p>()</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>	<span class=c1># For debug</span>
</span></span><span class=line><span class=cl>	<span class=c1>#leave_one_brick(43) # Moved @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#ball.connect(&#34;tree_exited&#34;, self, &#34;_on_Ball_tree_exited&#34;) # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#for brick in level.get_children(): # Removed @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#brick.connect(&#34;tree_exited&#34;, self, &#34;_on_Brick_tree_exited&#34;, [brick.global_position]) # Updated @ P10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_process</span><span class=p>(</span><span class=n>_delta</span><span class=p>):</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>is_multiple_on</span> <span class=ow>and</span> <span class=nc>Input</span><span class=o>.</span><span class=nf>is_action_just_pressed</span><span class=p>(</span><span class=s2>&#34;launch_ball&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=nf>add_new_ball</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>is_laser_on</span> <span class=ow>and</span> <span class=nc>Input</span><span class=o>.</span><span class=nf>is_action_just_pressed</span><span class=p>(</span><span class=s2>&#34;ui_up&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=nf>fire_laser</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># For debug</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>leave_one_brick</span><span class=p>(</span><span class=n>brick_num</span><span class=p>:</span> <span class=kt>int</span><span class=p>):</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>level</span><span class=o>.</span><span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>get_name</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&#34;Brick&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>brick_num</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=k>continue</span>
</span></span><span class=line><span class=cl>		<span class=n>child</span><span class=o>.</span><span class=nf>queue_free</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Method receiving Ball signal</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_Ball_tree_exited</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;_on_Ball_tree_exited() called&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>no_ball</span> <span class=o>=</span> <span class=kc>true</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=nf>get_children</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;Balls&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;found ball&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=n>no_ball</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>			<span class=k>break</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>no_ball</span><span class=p>:</span> <span class=c1># Added and Edited @ P11</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>is_playing</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>life</span> <span class=o>-=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=n>life</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=n>high_score</span> <span class=o>&lt;</span> <span class=n>score</span><span class=p>:</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>					<span class=n>high_score</span> <span class=o>=</span> <span class=n>score</span>
</span></span><span class=line><span class=cl>				<span class=k>if</span> <span class=n>high_level_num</span> <span class=o>&lt;</span> <span class=n>level_num</span><span class=p>:</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>					<span class=n>high_level_num</span> <span class=o>=</span> <span class=n>level_num</span>
</span></span><span class=line><span class=cl>				<span class=nf>save_data</span><span class=p>()</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>				<span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>change_scene</span><span class=p>(</span><span class=s2>&#34;res://scene/GameOverView.tscn&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>				<span class=nf>update_hud_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>				<span class=n>life_down_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>is_playing</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>		<span class=c1># Clear powerup items</span>
</span></span><span class=line><span class=cl>		<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=nf>get_children</span><span class=p>():</span> <span class=c1># Added @ P10</span>
</span></span><span class=line><span class=cl>			<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;PowerupItems&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>				<span class=n>child</span><span class=o>.</span><span class=nf>queue_free</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=c1># Set Paddle and Balls as default</span>
</span></span><span class=line><span class=cl>		<span class=n>is_multiple_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=n>is_laser_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=n>paddle</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>paddle_position</span>
</span></span><span class=line><span class=cl>		<span class=n>paddle</span><span class=o>.</span><span class=n>scale</span> <span class=o>=</span> <span class=n>paddle_scale</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=nf>add_new_ball</span><span class=p>()</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#ball = load(&#34;res://scene/Ball.tscn&#34;).instance() # Removed @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#call_deferred(&#34;add_child&#34;, ball) # Removed @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#call_deferred(&#34;move_child&#34;, ball, 3) # Removed @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#ball.connect(&#34;tree_exited&#34;, self, &#34;_on_Ball_tree_exited&#34;) # Removed @ P11</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Set life nodes shown and hidden as life variable</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>update_hud_life</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>hud_rightbox</span><span class=o>.</span><span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>count</span> <span class=o>&lt;=</span> <span class=n>life</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=o>.</span><span class=nf>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=o>.</span><span class=nf>hide</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add a new ball</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>add_new_ball</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;add_new_ball() called&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>instance</span> <span class=o>=</span> <span class=n>ball</span><span class=o>.</span><span class=nf>instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>instance</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=nc>Vector2</span><span class=p>(</span><span class=n>paddle</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>paddle</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>y</span> <span class=o>-</span> <span class=mi>10</span><span class=p>)</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;add_child&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;move_child&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=p>,</span> <span class=mi>4</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>instance</span><span class=o>.</span><span class=nf>connect</span><span class=p>(</span><span class=s2>&#34;tree_exited&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=s2>&#34;_on_Ball_tree_exited&#34;</span><span class=p>)</span>	
</span></span><span class=line><span class=cl>	<span class=c1>#instance.mode = 3 # Removed @ P11</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Method receiving Brick signal</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_Brick_tree_exited</span><span class=p>(</span><span class=n>brick_position</span><span class=p>):</span>
</span></span><span class=line><span class=cl>	<span class=c1># Update Score</span>
</span></span><span class=line><span class=cl>	<span class=n>score</span> <span class=o>+=</span> <span class=n>POINT</span> <span class=o>*</span> <span class=n>bonus_rate</span>
</span></span><span class=line><span class=cl>	<span class=n>bonus_rate</span> <span class=o>+=</span> <span class=mf>0.1</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>score</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># Exit current Level node</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>level</span><span class=o>.</span><span class=nf>get_child_count</span><span class=p>()</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nf>set_next_level</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>else</span><span class=p>:</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1># Drop powerup item</span>
</span></span><span class=line><span class=cl>		<span class=nf>drop_powerup</span><span class=p>(</span><span class=n>brick_position</span><span class=p>)</span> <span class=c1># Added @ P10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>drop_powerup</span><span class=p>(</span><span class=n>brick_position</span><span class=p>:</span> <span class=nc>Vector2</span><span class=p>):</span> <span class=c1># Added @ P10</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nb>randf</span><span class=p>()</span> <span class=o>&lt;=</span> <span class=n>drop_rate</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=n>powerup_instance</span> <span class=o>=</span> <span class=n>powerup</span><span class=o>.</span><span class=nf>instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=n>powerup_instance</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>brick_position</span>
</span></span><span class=line><span class=cl>		<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;add_child&#34;</span><span class=p>,</span> <span class=n>powerup_instance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;move_child&#34;</span><span class=p>,</span> <span class=n>powerup_instance</span><span class=p>,</span> <span class=mi>5</span><span class=p>)</span> <span class=c1># Added @ P 11</span>
</span></span><span class=line><span class=cl>		<span class=n>powerup_instance</span><span class=o>.</span><span class=nf>connect</span><span class=p>(</span><span class=s2>&#34;item_collided&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=s2>&#34;_on_Powerup_item_collided&#34;</span><span class=p>)</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Action when powerup item collided</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_Powerup_item_collided</span><span class=p>(</span><span class=n>item</span><span class=p>):</span> <span class=c1># Updated @ P11</span>
</span></span><span class=line><span class=cl>	<span class=k>match</span> <span class=n>item</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=mi>0</span><span class=p>:</span> <span class=c1># SLOW</span>
</span></span><span class=line><span class=cl>			<span class=nf>slow_balls</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=mi>1</span><span class=p>:</span> <span class=c1># EXPAND</span>
</span></span><span class=line><span class=cl>			<span class=nf>expand_paddle</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=mi>2</span><span class=p>:</span> <span class=c1># MULTIPLE</span>
</span></span><span class=line><span class=cl>			<span class=nf>enable_multiple_balls</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=mi>3</span><span class=p>:</span> <span class=c1># LASER</span>
</span></span><span class=line><span class=cl>			<span class=nf>enable_laser</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=mi>4</span><span class=p>:</span> <span class=c1># LIFE</span>
</span></span><span class=line><span class=cl>			<span class=nf>add_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># slow balls</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>slow_balls</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>slow_collide_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span> <span class=c1># Added @ P12</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;Balls&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=o>.</span><span class=n>ball_speed</span> <span class=o>=</span> <span class=n>child</span><span class=o>.</span><span class=n>first_speed</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Stretch paddle</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>expand_paddle</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>expand_collide_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span> <span class=c1># Added @ P12</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>paddle</span><span class=o>.</span><span class=n>scale</span> <span class=o>&lt;=</span> <span class=n>paddle_scale</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=n>paddle</span><span class=o>.</span><span class=n>scale</span><span class=o>.</span><span class=n>x</span> <span class=o>*=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>		<span class=k>yield</span><span class=p>(</span><span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>create_timer</span><span class=p>(</span><span class=mi>10</span><span class=p>),</span> <span class=s2>&#34;timeout&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=n>paddle</span><span class=o>.</span><span class=n>scale</span> <span class=o>=</span> <span class=n>paddle_scale</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable powerup Multiple</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>enable_multiple_balls</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>multiple_collide_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span> <span class=c1># Added @ P12</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=ow>not</span> <span class=n>is_multiple_on</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=n>is_multiple_on</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>		<span class=k>yield</span><span class=p>(</span><span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>create_timer</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span> <span class=s2>&#34;timeout&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=n>is_multiple_on</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># enable powerup Laser</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>enable_laser</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>laser_collide_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span> <span class=c1># Added @ P12</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=ow>not</span> <span class=n>is_laser_on</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=n>is_laser_on</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>		<span class=k>yield</span><span class=p>(</span><span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>create_timer</span><span class=p>(</span><span class=mi>3</span><span class=p>),</span> <span class=s2>&#34;timeout&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=n>is_laser_on</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># fire laser beam</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>fire_laser</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>instance</span> <span class=o>=</span> <span class=n>laser</span><span class=o>.</span><span class=nf>instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;add_child&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;move_child&#34;</span><span class=p>,</span> <span class=n>instance</span><span class=p>,</span> <span class=mi>6</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>instance</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>paddle</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>	<span class=n>instance</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>paddle</span><span class=o>.</span><span class=n>position</span><span class=o>.</span><span class=n>y</span> <span class=o>-</span> <span class=mi>16</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add a life if less than 5</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>add_life</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>life_collide_sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span> <span class=c1># Added @ P12</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>life</span> <span class=o>&lt;</span> <span class=n>MAX_LIFE</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=n>life</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>		<span class=nf>update_hud_life</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># set next level</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>set_next_level</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;set_next_level() called&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=c1># Change status</span>
</span></span><span class=line><span class=cl>	<span class=n>is_playing</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>	<span class=n>is_multiple_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>is_laser_on</span> <span class=o>=</span> <span class=kc>false</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1># Clear left objects</span>
</span></span><span class=line><span class=cl>	<span class=n>level</span><span class=o>.</span><span class=nf>queue_free</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;Balls&#34;</span><span class=p>)</span> <span class=ow>or</span> <span class=n>child</span><span class=o>.</span><span class=nf>is_in_group</span><span class=p>(</span><span class=s2>&#34;Lasers&#34;</span><span class=p>):</span> <span class=c1># è¿½åŠ </span>
</span></span><span class=line><span class=cl>			<span class=n>child</span><span class=o>.</span><span class=nf>queue_free</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>	<span class=c1># Increment level number</span>
</span></span><span class=line><span class=cl>	<span class=n>level_num</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>	<span class=c1># Stop PauseScreen node</span>
</span></span><span class=line><span class=cl>	<span class=n>pause_screen</span><span class=o>.</span><span class=n>pause_mode</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>	<span class=c1># Show NextScreen node</span>
</span></span><span class=line><span class=cl>	<span class=n>next_screen</span><span class=o>.</span><span class=n>pause_mode</span> <span class=o>=</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>	<span class=n>next_screen_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>level_num</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>next_screen_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>score</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>next_screen_life</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;x &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>life</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>next_screen</span><span class=o>.</span><span class=nf>show</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=c1># Set Level of HUD the next level</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>level_num</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=c1># Set Paddle and Ball the first position</span>
</span></span><span class=line><span class=cl>	<span class=c1>#paddle.position = paddle_position # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#paddle.scale = paddle_scale # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#ball.position = ball_position # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#ball.mode = 3 # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1># Set next Level node</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_new_level</span><span class=p>()</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#level = load(&#34;res://scene/Level&#34; + str(level_num) + &#34;.tscn&#34;).instance() # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#add_child(level) # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#move_child(level, 5) # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1>#for child in level.get_children(): # Removed @ P11</span>
</span></span><span class=line><span class=cl>		<span class=c1>#child.connect(&#34;tree_exited&#34;, self, &#34;_on_Brick_tree_exited&#34;) # Removed @ P11</span>
</span></span><span class=line><span class=cl>	<span class=c1># Pause game until NextScreen is hidden</span>
</span></span><span class=line><span class=cl>	<span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=n>paused</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Add new level</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>add_new_level</span><span class=p>():</span> <span class=c1># Added @ P11</span>
</span></span><span class=line><span class=cl>	<span class=n>level</span> <span class=o>=</span> <span class=nb>load</span><span class=p>(</span><span class=s2>&#34;res://scene/Level&#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>level_num</span><span class=p>)</span> <span class=o>+</span> <span class=s2>&#34;.tscn&#34;</span><span class=p>)</span><span class=o>.</span><span class=nf>instance</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>add_child</span><span class=p>(</span><span class=n>level</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=nf>move_child</span><span class=p>(</span><span class=n>level</span><span class=p>,</span> <span class=mi>3</span><span class=p>)</span> <span class=c1># Changed from 5 to 3 @ P11</span>
</span></span><span class=line><span class=cl>	<span class=k>for</span> <span class=n>child</span> <span class=ow>in</span> <span class=n>level</span><span class=o>.</span><span class=nf>get_children</span><span class=p>():</span>
</span></span><span class=line><span class=cl>		<span class=n>child</span><span class=o>.</span><span class=nf>connect</span><span class=p>(</span><span class=s2>&#34;tree_exited&#34;</span><span class=p>,</span> <span class=bp>self</span><span class=p>,</span> <span class=s2>&#34;_on_Brick_tree_exited&#34;</span><span class=p>,</span> <span class=p>[</span><span class=n>child</span><span class=o>.</span><span class=n>global_position</span><span class=p>])</span> <span class=c1># Updated to add th 4th arg @ P11 </span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_PauseScreen_visibility_changed</span><span class=p>():</span>
</span></span><span class=line><span class=cl>	<span class=n>play_bgm</span><span class=o>.</span><span class=n>stream_paused</span> <span class=o>=</span> <span class=ow>not</span> <span class=n>play_bgm</span><span class=o>.</span><span class=n>stream_paused</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Save data</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>save_data</span><span class=p>():</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;last_level&#34;</span><span class=p>:</span> <span class=n>level_num</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;high_level&#34;</span><span class=p>:</span> <span class=n>high_level_num</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;last_score&#34;</span><span class=p>:</span> <span class=n>score</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=s2>&#34;high_score&#34;</span><span class=p>:</span> <span class=n>high_score</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>WRITE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>store_line</span><span class=p>(</span><span class=nf>to_json</span><span class=p>(</span><span class=n>data</span><span class=p>))</span>
</span></span><span class=line><span class=cl>	<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># Load data</span>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>load_data</span><span class=p>():</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=nf>file_exists</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>READ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=nf>parse_json</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=nf>get_line</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>data</span> <span class=o>!=</span> <span class=kt>null</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>high_score</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_score&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>			<span class=n>high_level_num</span> <span class=o>=</span> <span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_level&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_high_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;H Scr: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>high_score</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=n>hud_high_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;H Lvl: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>high_level_num</span><span class=p>)</span>
</span></span><span class=line><span class=cl>  
</span></span></code></pre></div></details><br><details><summary>ã€ŒGameOverView.gdã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå…¨ä½“ã‚’è¦‹ã‚‹</summary><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>extends</span> <span class=nc>Control</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=n>SCORE_FILE_PATH</span> <span class=o>=</span> <span class=s2>&#34;user://score_record.save&#34;</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>high_score</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/HighScore</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>last_score</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/LastScore</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>high_level</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/HighLevel</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>last_level</span> <span class=o>=</span> <span class=nx>$VBox/ResultsContainer/LastLevel</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl><span class=n>onready</span> <span class=kd>var</span> <span class=n>sound</span> <span class=o>=</span> <span class=nx>$KeySound</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_ready</span><span class=p>():</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>	<span class=nf>load_data</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_input</span><span class=p>(</span><span class=n>event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>event</span> <span class=ow>is</span> <span class=nc>InputEventKey</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Input at Game Over: &#34;</span><span class=p>,</span> <span class=n>event</span><span class=o>.</span><span class=nf>as_text</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>event</span><span class=o>.</span><span class=nf>is_action_released</span><span class=p>(</span><span class=s2>&#34;Quit&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=n>sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>			<span class=k>yield</span><span class=p>(</span><span class=n>sound</span><span class=p>,</span> <span class=s2>&#34;finished&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>quit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>		<span class=k>elif</span> <span class=n>event</span><span class=o>.</span><span class=nf>is_action_released</span><span class=p>(</span><span class=s2>&#34;ui_accept&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>			<span class=n>sound</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>			<span class=k>yield</span><span class=p>(</span><span class=n>sound</span><span class=p>,</span> <span class=s2>&#34;finished&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>			<span class=nf>get_tree</span><span class=p>()</span><span class=o>.</span><span class=nf>change_scene</span><span class=p>(</span><span class=s2>&#34;res://scene/GameStartView.tscn&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>load_data</span><span class=p>():</span> <span class=c1># Added @ P13</span>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=n>File</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=nf>file_exists</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>):</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>SCORE_FILE_PATH</span><span class=p>,</span> <span class=n>File</span><span class=o>.</span><span class=n>READ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=kd>var</span> <span class=n>data</span> <span class=o>=</span> <span class=nf>parse_json</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=nf>get_line</span><span class=p>())</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=n>data</span> <span class=o>!=</span> <span class=kt>null</span><span class=p>:</span>
</span></span><span class=line><span class=cl>			<span class=n>high_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;High Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_score&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>last_score</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Last Score: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;last_score&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>high_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;High Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;high_level&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>			<span class=n>last_level</span><span class=o>.</span><span class=n>text</span> <span class=o>=</span> <span class=s2>&#34;Last Level: &#34;</span> <span class=o>+</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>[</span><span class=s2>&#34;last_level&#34;</span><span class=p>])</span>
</span></span><span class=line><span class=cl>		<span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span></code></pre></div></details><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h1 id=ãŠã‚ã‚Šã«>ãŠã‚ã‚Šã«</h1><p>ä»¥ä¸Šã§ Part 13 ã¯å®Œäº†ã ã€‚ä»Šå›ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹æ©Ÿèƒ½ã€ä¿å­˜ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ãŸã€‚ã‚²ãƒ¼ãƒ ã«ã‚ˆã£ã¦ã€ä¿å­˜ã—ãŸã„ãƒ‡ãƒ¼ã‚¿ã¯å¤‰ã‚ã‚Šã€è¦æ¨¡ãŒå¤§ãããªã‚‹ã»ã©ã€ä¿å­˜ã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã‚‚è¤‡é›‘åŒ–ã™ã‚‹ã ã‚ã†ã€‚ã—ã‹ã—ã€ä½•äº‹ã‚‚åŸºæœ¬ãŒé‡è¦ãªã®ã§ã€ä»Šå›ã®ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã®å†…å®¹ã‚’ãœã²ä»Šå¾Œã®é–‹ç™ºã«å½¹ç«‹ã¦ã¦ã„ãŸã ã‘ã‚Œã°ã¨æ€ã†ã€‚</p><p>æ¬¡å› Part 14 ã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã®ç¨®é¡ï¼ˆä¾‹ãˆã°ä¸€å›ã®è¡çªã§ã¯æ¶ˆãˆãªã„ç¡¬ã„ãƒ–ãƒ­ãƒƒã‚¯ãªã©ï¼‰ã‚’å¢—ã‚„ã—ã¦ã€ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ã¦é›£æ˜“åº¦ã®å¹…ã‚’åºƒãã§ãã‚‹ã‚ˆã†ã«èª¿æ•´ã—ã€è¤‡æ•°ã®ãƒ¬ãƒ™ãƒ«ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹ã€‚</p><hr></div><footer class=post-footer><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on x" href="https://x.com/intent/tweet/?text=Godot%20%e3%81%a7%e4%bd%9c%e3%82%8b%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%20Part%2013%ef%bc%9a%e3%83%8f%e3%82%a4%e3%82%b9%e3%82%b3%e3%82%a2%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%97%e3%82%88%e3%81%86%ef%bc%81&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f&amp;hashtags=GodotEngine%2cGameDev%2c%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%2c2D"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f&title=Godot%20%e3%81%a7%e4%bd%9c%e3%82%8b%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e5%b4%a9%e3%81%97%20Part%2013%ef%bc%9a%e3%83%8f%e3%82%a4%e3%82%b9%e3%82%b3%e3%82%a2%e3%81%ae%e3%83%87%e3%83%bc%e3%82%bf%e3%82%92%e4%bf%9d%e5%ad%98%e3%81%97%e3%82%88%e3%81%86%ef%bc%81"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 13ï¼šãƒã‚¤ã‚¹ã‚³ã‚¢ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã—ã‚ˆã†ï¼ on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0004_breakout%2fbreakout_13%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul><ul class=post-tags><li><a href=https://www.peanuts-code.com/ja/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/ja/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/ja/tags/%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E5%B4%A9%E3%81%97/>ãƒ–ãƒ­ãƒƒã‚¯å´©ã—</a></li><li><a href=https://www.peanuts-code.com/ja/tags/2d/>2D</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_14/><span class=title>Â« å‰ã¸</span><br><span>Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 14ï¼šãƒ–ãƒ­ãƒƒã‚¯ã®ç¨®é¡ã‚’å¢—ã‚„ã—ã¦ãƒ¬ãƒ™ãƒ«ã‚’ãƒ‡ã‚¶ã‚¤ãƒ³ã—ã‚ˆã†ï¼</span>
</a><a class=next href=https://www.peanuts-code.com/ja/tutorials/gd0004_breakout/breakout_12/><span class=title>æ¬¡ã¸ Â»</span><br><span>Godot ã§ä½œã‚‹ãƒ–ãƒ­ãƒƒã‚¯å´©ã— Part 12ï¼šBGMã¨ã‚µã‚¦ãƒ³ãƒ‰ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã—ã‚ˆã†ï¼</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/ja/>Peanuts Code</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="ã‚³ãƒ”ãƒ¼";function s(){t.innerHTML="ã‚³ãƒ”ãƒ¼ã•ã‚Œã¾ã—ãŸ!",setTimeout(()=>{t.innerHTML="ã‚³ãƒ”ãƒ¼"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>