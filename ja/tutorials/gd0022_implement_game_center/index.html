<!doctype html><html lang=ja dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>🤖 Game Center プラグインを追加したあとの実装 | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,プラグイン,iOS,App Store"><meta name=description content="前回の 🤖 プロジェクトに Game Center プラグインを追加する の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、"><meta name=author content="Gobo"><link rel=canonical href=https://www.peanuts-code.com/ja/tutorials/gd0022_implement_game_center/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0022_implement_game_center/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0022_implement_game_center/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="🤖 Game Center プラグインを追加したあとの実装"><meta property="og:description" content="前回の 🤖 プロジェクトに Game Center プラグインを追加する の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/ja/tutorials/gd0022_implement_game_center/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0022/13.png"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2024-05-11T00:00:00+09:00"><meta property="article:modified_time" content="2024-05-11T00:00:00+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0022/13.png"><meta name=twitter:title content="🤖 Game Center プラグインを追加したあとの実装"><meta name=twitter:description content="前回の 🤖 プロジェクトに Game Center プラグインを追加する の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"🤖 チュートリアル","item":"https://www.peanuts-code.com/ja/tutorials/"},{"@type":"ListItem","position":2,"name":"🤖 Game Center プラグインを追加したあとの実装","item":"https://www.peanuts-code.com/ja/tutorials/gd0022_implement_game_center/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"🤖 Game Center プラグインを追加したあとの実装","name":"🤖 Game Center プラグインを追加したあとの実装","description":"前回の 🤖 プロジェクトに Game Center プラグインを追加する の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、","keywords":["GameDev","GodotEngine","プラグイン","iOS","App Store"],"articleBody":"前回の 🤖 プロジェクトに Game Center プラグインを追加する の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、実際に Apple の Game Center の機能を実装する方法について書いてるで。\nそもそも Game Center って何？って人がいるかもしれんけど、前回の記事の冒頭で軽く説明してるから、よかったら先にそっち見てみてな。\nおおまかには、大きく次の2つのセクションに分けて説明していくことにするわ。\nApp Store Connect で Game Center の設定をする GDScript で Game Center の実装をする ちなみに、Godot Docs / iOS plugins / iOS用プラグイン にプラグインの使い方の基本は書いてあるから、まずそこを見てもらうのが順当な感じするわ。\nあと、Game Center プラグインのコードについては GitHub のほうにある Godot iOS GameCenter plugin で確認できるから、細かく確認したい人はこっちも見てみて。個人的には最初ちょっと難易度高めやなと思ったけどね。\n記事作成当時の筆者の環境 Godot のバージョン: 4.2.1\nコンピュータのモデル: MacBook Air M1, 2020\nOS: macOS 14.4.1\nXcode から App Store Connect にビルドをアップロードする まず大前提として、Godot から Export したプロジェクトを Xcode から App Store Connect にアップロードする必要があるねん。具体的な手順は、別の記事 🤖 Xcode から App Store Connect にゲームを配布する を参考にしてみてな。Xcode で Game Center 機能を有効にする手順も説明してるで。\nApp Store Connect で Game Center の設定をする まずは App Store Connect にアクセスして、Game Center と連携させたいアプリを選択したら、サイドバーの Game Center から Game Center の編集画面を開いてみよか。そしたら、そこで Leaderboard と 達成項目 を追加できそうな雰囲気漂ってんねん。一目瞭然やね。\nちなみに、下のスクリーンショットは僕がすでに Leaderboard と 達成項目 を追加した状態のものやから、最初はどっちも空っぽになってるで。\nLeaderboard の設定をする Leaderboard っていうのは、世界中の同じゲームのプレイヤー同士が何かしらのスコアを Apple の Game Center を通して競い合える機能やねんな。この Leaderboard を使いたかったら、次の手順でやったらええで。\nまず Leaderboard の (+) ボタンをクリックする。\n参照名 と Leaderboard ID を決める。どっちがどっちかわからなくならんように同じにしといたらええわ。\n標準Leaderboard か 周期Leaderboard どっちにするか選択。前者はその Leaderboard を削除するまで永遠にスコアが残るタイプ。後者は周期的にリセットするタイプ。周期はあとで自分で設定するで。\nスコアのフォーマット、スコア範囲、スコア送信タイプ、並び順をそれぞれ決めて。一番わかりやすいのは、フォーマットを整数にして、スコア範囲を最小値 0 から余裕持たせた最大値にすることやね。スコアが高い方が良いなら降順にして高いスコアが上にくるようにすればいいね。\nこんな感じで、必要な分だけ追加していくだけ。簡単やろ。例えば、最短クリア時間とか倒した敵の数とか、他のプレイヤーと競いたくなるようなスコアを設定してあげると、プレイヤーもモチベーションあがると思うねん。いろいろ考えて思いつくままに追加してってもええと思うよ。順番はいつでも自由に変更できるからね。\n達成項目の設定をする 達成項目 っていうのは、ゲームをプレイしていく中で、何かしらの目標を設定して、それを達成できたことを証明する機能やねん。例えば、ゲームをクリアするという最終ゴールに対して、中ボスを倒すごとに達成項目を用意したり、キャラクターの成長に合わせて達成項目を用意したりして、マイルストーンを置いてあげると、最後までゲームをプレイしてもらうのに役立ったりするねん。あとは、アイテム収集に関する達成項目とか、倒した敵の数なんかの達成項目とかのやり込み要素を追加すると、ゲームをより長く深く楽しんでもらえるかもしれんね。\n達成項目を追加したいときは、次の手順に沿ってやってみてな。\nまずは 達成項目 の (+) ボタンをクリックする。\n開いたパネルで 参照名 と 達成項目ID を入力してから 作成 ボタンをクリックしてな。これもどっちがどっちかわからんようになると思う人は同じにしといたらいいんとちゃうかな。\n💡 すでに作成済みの達成項目もその参照名のリンク踏んだら次の編集画面にいけるで。\n編集画面が開いたら、まずは「点数」「非表示」「複数回達成可能」を順番に設定してあげてな。設定項目の意味がわからんときは (?) ボタンをクリックしてみたらええよ。複数の達成項目を作る予定やったら、点数は合計1,000点を分配しなあかんから、割り算してうまいこと割り振ってね。\nつづいて、ローカリゼーションを追加 ボタンを押して、ゲームに対応する言語ごとの設定をしていくで。\n💡 すでに一つ以上ローカリゼーションを追加済みの場合は、こっちの (+) ボタンで追加してな。\nこんな感じで各入力欄を埋めて、あとはせっかくやからその達成項目のためのイメージもアップロードしとこ。イメージなしでもいけるけど、それはさすがに素っ気ないやん？ただし、アップロードするイメージには制限があって、以下のように書いてあるから、画像を用意するときは注意してな。\n『達成項目を表すローカライズされた画像。画像は、1024x1024ピクセル、72dip以上、およびRGB色空間の.jpeg、.jpg、または.pngファイルであるひつようがあります。』\n言語ごとに異なるイメージを用意する必要はないから、あくまで達成項目に対して一つイメージが用意できたらいい感じやね。\nローカリゼーションが追加できたらこんな感じになるで。\n達成項目としてありそうなのは、例えば「クリア回数」、「プレイ時間」、「入手したレアアイテム」、「解放したスキル」とかかな。色々考えて追加してみてな。ただ、先に達成項目を全部洗い出して、点数の割り振りを決めてから作業したほうがええと個人的には思うよ。なんでかっていうと、あとから達成項目を追加するとなると、点数を割り振り直さなあかんから、けっこうめんどくさいのよ。\nGame Center プラグインを使ってコーディングする ほな、ここからは GDscript で Game Center 機能をコーディングするとこ説明していくで。\nまずはプロジェクトの中に、game_center.gd とかそれっぽい名前で一つスクリプトつくろか。ファイルシステムドックで右クリックから追加できるで。\nゲームが始まるやいなやこのスクリプトを読み込むようにしたいよなあ。そういうときは、Godot の Project \u003e Project Settings… \u003e Autoload タブを開いて、作ったスクリプトを追加したらええねんで。これでゲーム開始したタイミングでこのスクリプトが読み込まれるわ。\n次は肝心のスクリプトの中身やな。game_center.gd スクリプトに Game Center のプログラムを実装していくわけやけど、最初はこんな感じで Game Center プラグインを入れるための変数を、例えば game_center って名前にして、先に宣言しとこか。\nextends Node # Game Center plugin var game_center = null つぎに _ready() 関数の中に、ゲーム開始直後から実行しておきたいプラグインの取得と認証の部分を追加していこか。コードは次のような感じやで。\nfunc _ready(): if OS.get_name() == \"iOS\": if Engine.has_singleton(\"GameCenter\"): print(\"Found GameCenter plugin\") game_center = Engine.get_singleton(\"GameCenter\") var res = game_center.authenticate() print(\"Authentication: \", res) else: print(\"There is no GameCenter game_center\") まず、OS が iOS かどうかを判定するのに OS.get_name() で OS の名前を取得してチェックしてるわ。 OS が iOS やったら、つぎは Engine.has_singleton(\"GameCenter\") で GameCenter プラグインが、ちゃんとあるかどうかもチェックしてるで。 ほんで、プラグインがみつかったら、Engine.get_singleton(\"GameCenter\") で Game Center プラグインを取得して、それを変数 game_center にぶっ込むというわけや。 そのあとそのまま認証までやってるんやけど、認証は Game Center プラグインに備え付けの authenticate() 関数呼び出すだけでええから簡単やね。この関数、認証の結果を返してくれるから res 変数に結果入れて、print() で出力したらデバッグしやすいんとちゃうかな。 ここまでが Game Center 機能を実装する上での下準備やね。つぎは、Game Center の Leaderboard と Achievements の機能の実装について、それぞれ順番に説明していくで。\nLeaderboard を実装する Leaderboard からいきましょか。めっちゃシンプルな例で説明していくで。\n最初に Leaderboard を更新するための関数を定義するで。ここでは update_leaderboard() っていう関数にしとくわ。\nfunc update_leaderboard(score:int, category:String): print(\"call update_leaderboard()\") if not game_center: print(\"No Game Center plugin\") return if not game_center.is_authenticated(): print(\"not authenticated, authenticating again\") game_center.authenticate() var data = {\"score\": score, \"category\": category} print(\"New Leaderboard data: \", data) var res = game_center.post_score(data) print(\"Update Leaderboard response: \" + str(res)) 関数の引数は、score:int と category:String の2つ設定してるで。 まず game_center 変数が空っぽの null やったら関数はそこで終了させる。 つぎに、認証ができてなかった場合はもう一回認証させるで。基本的には _ready() 実行時に認証完了してるはずやけどね。 data 変数に、辞書型のデータを代入するで。この辞書型データは \"score\" と \"category\" という2つのキーをもってるんやけど、\"category\" には App Store Connect で自分が用意した Leaderboard の名前を String 型で指定するねん。ほんで、\"score\" のほうに int 型で実際のスコアを入れてあげるわけや。これで、どの Leaderboard にどれだけのスコアを反映するのか、っていうのを指示するデータができあがるんやね。ちなみに、このデータの形式は、このあと登場する Game Center プラグインに備え付けの post_score() 関数の引数に渡すデータとして決められてるものやから、適当にはできへんとこなんよ。 そして、プラグインの post_score() の引数に data 変数を渡して呼び出すねん。これで Leaderboard のスコアを更新してくれるわ。更新の結果を戻り値で出してくれるから、これも print() で出力してデバッグできるようにするとええと思うよ。 関数 update_leaderboard() が定義できたので、あとは実際にゲームの中でスコアを反映するタイミングで、この関数を呼び出せばいいね。\nvar current_score : int = 0 var highscore : int = 0 func update_highscore(current_score: int): if high_score \u003c current_score: high_score = current_score update_leaderboard(high_score, \"highscore\") 例えば、簡単なシューティングゲームで考えてみよ。\n変数 current_score を宣言しといて、敵を撃ち落としたらこの値がどんどん加算されていくことにしよか。 もうひとつ highscore って変数も宣言しとくて。こっちは、過去最高記録を保存する変数で、Leaderboard に反映するやつやで。 あとは update_highscore って関数で以下のロジックをまとめといて、ゲームオーバーのタイミングでこの関数を呼び出したらうまいこといくんとちゃうかな。 highscore 変数の値を current_score 変数の値と比較 current_score のほうが大きかったら highscore を更新する ついでに Game Center の Leaderboard も更新する このへんはもうゲームによって全然変わってくるから各自で頑張ろね。\nあとは、ゲーム内で Game Center の画面に移動して、Leaderboard を確認したいよね。自分は何位なのか、順位は変わってるのか、そもそも誰か遊んでくれてるのか、って気になるからね。そのための関数は例えばつぎのようにしたらええかな。\nfunc show_leaderboard(): if not game_center: print(\"No Game Center plugin\") return if not game_center.is_authenticated(): print(\"not authenticated, authenticating again\") game_center.authenticate() var param := {\"view\": \"leaderboards\", \"leaderboard_name\": \"highscore\"} var res = game_center.show_game_center(param) print(\"Show Leaderboard response: \", res) Button ノードを押したときに上のような関数を呼び出して、Game Center の Leaderboard 画面に遷移させるわかりやすいんとちゃうかな。\n関数の名前は show_leaderboard()、引数はなし game_center 変数が空っぽの null やったら関数はそこで終了させる。 認証ができてなかった場合はもう一回認証させるで。基本的には _ready() 実行時に認証完了してるはず。 param 変数に辞書型データを入れる。これはプラグイン備え付けの show_game_center() 関数の引数で指定の形式。 \"view\" キーには \"leaderboards\" (複数形！)を、\"leaderboard_name\" キーには \"highscore\"（App Store Connect で設定した名前）をそれぞれ値として指定してな。 param 変数を引数に渡しつつ、プラグインの show_game_center() 関数を呼び出す。戻り値で結果がわかるから、関数を変数 res に入れて、そのあとデバッグ用として print() で出力するようにしておく。 達成項目を実装する つぎに 達成項目 に関わるプログラムをコーディングしていくで。といっても Leaderboard のほうで要領つかめてたら似たようなもんやから安心してな。こちらもシンプルな例でいこか。\nfunc update_achievement(item_name:String, progress:float): print(\"called report_achievement()\") if not game_center: print(\"No Game Center plugin\") return if not game_center.is_authenticated(): print(\"not authenticated, authenticating again\") game_center.authenticate() var data = {\"name\": item_name, \"progress\": progress} print(\"New Achievement data: \", data) var res = game_center.award_achievement(data) print(\"Update Achievement response: \" + str(res)) 関数は、例えば update_achievement() という名前で、引数は、item_name:String と progress:float の2つ設定して定義するで。 まず game_center 変数が空っぽの null やったら関数はそこで終了させる。 つぎに、認証ができてなかった場合はもう一回認証させるで。基本的には _ready() 実行時に認証完了してるはずやね。 data 変数に、辞書型のデータを代入するで。この辞書型データは \"name\" と \"progress\" という2つのキーをもってるんやけど、\"name\" には App Store Connect で自分が用意した達成項目の名前を String 型で指定するねん。ほんで、\"progress\" のほうに float 型でその達成項目についての達成率（単位は %）を渡してあげると。これで、どの達成項目の条件をどれくらい達成できているのかをを指示するデータができあがるねんな。ちなみに、この辞書型のデータ形式は、Game Center プラグインに備え付けの award_achievement() 関数の引数に渡すデータとして決められてるものやから、適当にやったらあかんのやね。 そして、プラグインの award_achievement() を引数に data 変数を渡して呼び出すねん。これで指定した達成項目の達成率を更新してくれるわ。更新の結果を戻り値で出してくれるから、これも print() で出力してデバッグできるようにするとええと思うよ。 つづいて、実際に達成項目の達成率を更新する部分のコードも見てみよか。\nvar play_count := 0 var play_count_100 := false func update_play_count_100(): if not play_count_100: var progress = play_count / 100 * 100.0 update_achievement(\"play_count_100\", progress) if progress == 100.0: play_count_100 = true 例えば、100回プレイしたら達成という条件の達成項目があったとしようや。 それに対して、プレイするたびにインクリメントされる変数 play_count: int を宣言しとくやん。 そして、達成項目をクリア済みかどうかを示す変数 play_count_100: bool も必要やから宣言しとこな。 ここで update_play_count_100() 関数を定義すんねん。プレイが始まるたびにこの関数を呼び出せば、達成項目の達成率が徐々に上がっていって、最終的に 100 % になるってわけやね。この関数の中には以下の内容を記述してな。 で、if 文を使って play_count_100 が false（未達成）の場合だけ処理するように条件分岐させて。 変数 progress に、分母を 100、現在の play_count を分子にして、単位 % に合わせて 100 掛けたものを代入するで。これが現在の達成率になるわ。 あとは、さっき作った関数 update_achievement() を、引数に \"play_count_100\" と progress 渡しつつ呼び出すねん。これで、Game Center の指定した達成項目が更新されるわ。 あとは、progress が 100 やったら、今後は計測する必要がないので play_count_100 は true に更新しとこな。 達成項目の実装についてはこれくらいにしとくわ。\nおわりに ということで、今回は iOS 用のゲームで Game Center 機能を実装する方法について紹介したで。実は、Godot 公式の iOS プラグインのリポジトリにある Readme にどうやって実装するのか説明はあるんやけど、説明がちょっと少なめやったり、プラグインのコードがちょっと難解やったりで、個人的にも想定してたより実装に時間がかかったんよ。そういうわけで、この記事を補足資料として役立ててもらえたら嬉しい限りです。\nゲームの宣伝 最後に、実際に Game Center プラグインを使っている僕のゲームの宣伝だけさせてな。\n👹 もの切り侍 今あなたの動体視力と反射神経が試される！侍を操作して、空から降ってくるあんな物やこんな物を見事空中で切ることができるか？！簡単片手操作でプレイできる、激ハマり必至の爽快カジュアル・タイミングゲーム！\n🃏 ステキなソリティア 「ソリティア（クロンダイク）」と言えば、言わずと知れた定番中の定番、一人遊びカードゲームの王様なわけですが、このたび、モバイルゲーム「ステキなソリティア」が App Store で配信中！\n","wordCount":"6190","inLanguage":"ja","image":"https://www.peanuts-code.com/images/tutorials/gd0022/13.png","datePublished":"2024-05-11T00:00:00+09:00","dateModified":"2024-05-11T00:00:00+09:00","author":{"@type":"Person","name":"Gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/ja/tutorials/gd0022_implement_game_center/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/ja/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/ja/ title=ホーム><span>ホーム</span></a></li><li><a href=https://www.peanuts-code.com/ja/portfolio/ title=作ったゲーム><span>作ったゲーム</span></a></li><li><a href=https://www.peanuts-code.com/ja/posts/ title=ブログ><span>ブログ</span></a></li><li><a href=https://www.peanuts-code.com/ja/tutorials/ title=チュートリアル><span>チュートリアル</span></a></li><li><a href=https://www.peanuts-code.com/ja/about/ title=サイト情報><span>サイト情報</span></a></li><li><a href=https://www.peanuts-code.com/ja/search/ title="検索 (Alt + /)" accesskey=/><span>検索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/ja/>ホーム</a>&nbsp;»&nbsp;<a href=https://www.peanuts-code.com/ja/tutorials/>🤖 チュートリアル</a></div><h1 class=post-title>🤖 Game Center プラグインを追加したあとの実装</h1><div class=post-meta><span title='2024-05-11 00:00:00 +0900 +0900'>2024-05-11</span>&nbsp;·&nbsp;13 分&nbsp;·&nbsp;Gobo&nbsp;|&nbsp;言語:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/en/tutorials/gd0022_implement_game_center/>En</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0022/13.png alt="Game Center プラグインを追加したあとの実装"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>目次</span></summary><div class=inner><ul><li><a href=#xcode-%e3%81%8b%e3%82%89-app-store-connect-%e3%81%ab%e3%83%93%e3%83%ab%e3%83%89%e3%82%92%e3%82%a2%e3%83%83%e3%83%97%e3%83%ad%e3%83%bc%e3%83%89%e3%81%99%e3%82%8b aria-label="Xcode から App Store Connect にビルドをアップロードする">Xcode から App Store Connect にビルドをアップロードする</a></li><li><a href=#app-store-connect-%e3%81%a7-game-center-%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%82%92%e3%81%99%e3%82%8b aria-label="App Store Connect で Game Center の設定をする">App Store Connect で Game Center の設定をする</a><ul><li><a href=#leaderboard-%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%82%92%e3%81%99%e3%82%8b aria-label="Leaderboard の設定をする">Leaderboard の設定をする</a></li><li><a href=#%e9%81%94%e6%88%90%e9%a0%85%e7%9b%ae%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%82%92%e3%81%99%e3%82%8b aria-label=達成項目の設定をする>達成項目の設定をする</a></li></ul></li><li><a href=#game-center-%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e4%bd%bf%e3%81%a3%e3%81%a6%e3%82%b3%e3%83%bc%e3%83%87%e3%82%a3%e3%83%b3%e3%82%b0%e3%81%99%e3%82%8b aria-label="Game Center プラグインを使ってコーディングする">Game Center プラグインを使ってコーディングする</a><ul><li><a href=#leaderboard-%e3%82%92%e5%ae%9f%e8%a3%85%e3%81%99%e3%82%8b aria-label="Leaderboard を実装する">Leaderboard を実装する</a></li><li><a href=#%e9%81%94%e6%88%90%e9%a0%85%e7%9b%ae%e3%82%92%e5%ae%9f%e8%a3%85%e3%81%99%e3%82%8b aria-label=達成項目を実装する>達成項目を実装する</a></li></ul></li><li><a href=#%e3%81%8a%e3%82%8f%e3%82%8a%e3%81%ab aria-label=おわりに>おわりに</a></li><li><a href=#%e3%82%b2%e3%83%bc%e3%83%a0%e3%81%ae%e5%ae%a3%e4%bc%9d aria-label=ゲームの宣伝>ゲームの宣伝</a><ul><li><a href=#-%e3%82%82%e3%81%ae%e5%88%87%e3%82%8a%e4%be%8d aria-label="👹 もの切り侍">👹 もの切り侍</a></li><li><a href=#-%e3%82%b9%e3%83%86%e3%82%ad%e3%81%aa%e3%82%bd%e3%83%aa%e3%83%86%e3%82%a3%e3%82%a2 aria-label="🃏 ステキなソリティア">🃏 ステキなソリティア</a></li></ul></li></ul></div></details></div><div class=post-content><p>前回の <a href=https://www.peanuts-code.com/ja/tutorials/gd0021_game_center_plugin/ title="プロジェクトに Game Center プラグインを追加する">🤖 プロジェクトに Game Center プラグインを追加する</a>
の記事では Godot 公式の iOS プラグインのうち Game Center のプラグインをプロジェクトに追加する手順について説明したんやけど、今回の記事では、その追加したプラグインを使って、実際に Apple の Game Center の機能を実装する方法について書いてるで。</p><p>そもそも Game Center って何？って人がいるかもしれんけど、前回の記事の冒頭で軽く説明してるから、よかったら先にそっち見てみてな。</p><p>おおまかには、大きく次の2つのセクションに分けて説明していくことにするわ。</p><ol><li>App Store Connect で Game Center の設定をする</li><li>GDScript で Game Center の実装をする</li></ol><p>ちなみに、<a href=https://docs.godotengine.org/ja/4.x/tutorials/platform/ios/plugins_for_ios.html target=_blank>Godot Docs / iOS plugins / iOS用プラグイン</a>
にプラグインの使い方の基本は書いてあるから、まずそこを見てもらうのが順当な感じするわ。</p><p>あと、Game Center プラグインのコードについては GitHub のほうにある <a href=https://github.com/godotengine/godot-ios-plugins/blob/master/plugins/gamecenter/game_center.mm target=_blank>Godot iOS GameCenter plugin</a>
で確認できるから、細かく確認したい人はこっちも見てみて。個人的には最初ちょっと難易度高めやなと思ったけどね。</p><blockquote><p><strong><span style=color:salmon>記事作成当時の筆者の環境</span></strong><br>Godot のバージョン: <strong>4.2.1</strong><br>コンピュータのモデル: <strong>MacBook Air M1, 2020</strong><br>OS: <strong>macOS 14.4.1</strong></p></blockquote><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h2 id=xcode-から-app-store-connect-にビルドをアップロードする>Xcode から App Store Connect にビルドをアップロードする<a hidden class=anchor aria-hidden=true href=#xcode-から-app-store-connect-にビルドをアップロードする>#</a></h2><p>まず大前提として、Godot から Export したプロジェクトを Xcode から App Store Connect にアップロードする必要があるねん。具体的な手順は、別の記事 <a href=https://www.peanuts-code.com/ja/tutorials/gd0023_distribute_app_from_xcode/ title="プロジェクトに Game Center プラグインを追加する">🤖 Xcode から App Store Connect にゲームを配布する</a>
を参考にしてみてな。Xcode で Game Center 機能を有効にする手順も説明してるで。</p><br><h2 id=app-store-connect-で-game-center-の設定をする>App Store Connect で Game Center の設定をする<a hidden class=anchor aria-hidden=true href=#app-store-connect-で-game-center-の設定をする>#</a></h2><p>まずは <a href=https://appstoreconnect.apple.com target=_blank>App Store Connect</a>
にアクセスして、Game Center と連携させたいアプリを選択したら、サイドバーの <strong>Game Center</strong> から Game Center の編集画面を開いてみよか。そしたら、そこで <strong>Leaderboard</strong> と <strong>達成項目</strong> を追加できそうな雰囲気漂ってんねん。一目瞭然やね。</p><p>ちなみに、下のスクリーンショットは僕がすでに <strong>Leaderboard</strong> と <strong>達成項目</strong> を追加した状態のものやから、最初はどっちも空っぽになってるで。<br><img loading=lazy src=/images/tutorials/gd0022/01.png alt="App Store Connect の Game Center 編集画面"></p><br><h3 id=leaderboard-の設定をする>Leaderboard の設定をする<a hidden class=anchor aria-hidden=true href=#leaderboard-の設定をする>#</a></h3><p><strong>Leaderboard</strong> っていうのは、世界中の同じゲームのプレイヤー同士が何かしらのスコアを Apple の Game Center を通して競い合える機能やねんな。この Leaderboard を使いたかったら、次の手順でやったらええで。</p><ol><li>まず <strong>Leaderboard</strong> の (+) ボタンをクリックする。<br><img loading=lazy src=/images/tutorials/gd0022/02.png alt="Leaderboard の追加ボタン"></li><li><strong>参照名</strong> と <strong>Leaderboard ID</strong> を決める。どっちがどっちかわからなくならんように同じにしといたらええわ。<br><img loading=lazy src=/images/tutorials/gd0022/03.png alt="Leaderboard の追加ボタン"></li><li><strong>標準Leaderboard</strong> か <strong>周期Leaderboard</strong> どっちにするか選択。前者はその Leaderboard を削除するまで永遠にスコアが残るタイプ。後者は周期的にリセットするタイプ。周期はあとで自分で設定するで。<br><img loading=lazy src=/images/tutorials/gd0022/04.png alt="Leaderboard の追加ボタン"></li><li>スコアのフォーマット、スコア範囲、スコア送信タイプ、並び順をそれぞれ決めて。一番わかりやすいのは、フォーマットを整数にして、スコア範囲を最小値 0 から余裕持たせた最大値にすることやね。スコアが高い方が良いなら降順にして高いスコアが上にくるようにすればいいね。<br><img loading=lazy src=/images/tutorials/gd0022/05.png alt="Leaderboard の追加ボタン"></li></ol><p>こんな感じで、必要な分だけ追加していくだけ。簡単やろ。例えば、最短クリア時間とか倒した敵の数とか、他のプレイヤーと競いたくなるようなスコアを設定してあげると、プレイヤーもモチベーションあがると思うねん。いろいろ考えて思いつくままに追加してってもええと思うよ。順番はいつでも自由に変更できるからね。<br><img loading=lazy src=/images/tutorials/gd0022/06.png alt="Leaderboard の順序を編集ボタン"></p><p><img loading=lazy src=/images/tutorials/gd0022/07.png alt="Leaderboard の順序を編集パネル"></p><br><h3 id=達成項目の設定をする>達成項目の設定をする<a hidden class=anchor aria-hidden=true href=#達成項目の設定をする>#</a></h3><p><strong>達成項目</strong> っていうのは、ゲームをプレイしていく中で、何かしらの目標を設定して、それを達成できたことを証明する機能やねん。例えば、ゲームをクリアするという最終ゴールに対して、中ボスを倒すごとに達成項目を用意したり、キャラクターの成長に合わせて達成項目を用意したりして、マイルストーンを置いてあげると、最後までゲームをプレイしてもらうのに役立ったりするねん。あとは、アイテム収集に関する達成項目とか、倒した敵の数なんかの達成項目とかのやり込み要素を追加すると、ゲームをより長く深く楽しんでもらえるかもしれんね。</p><p>達成項目を追加したいときは、次の手順に沿ってやってみてな。</p><ol><li>まずは <strong>達成項目</strong> の (+) ボタンをクリックする。<br><img loading=lazy src=/images/tutorials/gd0022/08.png alt=達成項目追加手順1></li><li>開いたパネルで <strong>参照名</strong> と <strong>達成項目ID</strong> を入力してから <strong>作成</strong> ボタンをクリックしてな。これもどっちがどっちかわからんようになると思う人は同じにしといたらいいんとちゃうかな。<br><img loading=lazy src=/images/tutorials/gd0022/09.png alt=達成項目追加手順2><br>💡 <em>すでに作成済みの達成項目もその参照名のリンク踏んだら次の編集画面にいけるで。</em><br><img loading=lazy src=/images/tutorials/gd0022/10.png alt=達成項目追加手順3></li><li>編集画面が開いたら、まずは「点数」「非表示」「複数回達成可能」を順番に設定してあげてな。設定項目の意味がわからんときは (?) ボタンをクリックしてみたらええよ。複数の達成項目を作る予定やったら、点数は合計1,000点を分配しなあかんから、割り算してうまいこと割り振ってね。<br><img loading=lazy src=/images/tutorials/gd0022/11.png alt=達成項目追加手順4></li><li>つづいて、<strong>ローカリゼーションを追加</strong> ボタンを押して、ゲームに対応する言語ごとの設定をしていくで。<br><img loading=lazy src=/images/tutorials/gd0022/12.png alt=達成項目追加手順5><br>💡 <em>すでに一つ以上ローカリゼーションを追加済みの場合は、こっちの (+) ボタンで追加してな。</em><br><img loading=lazy src=/images/tutorials/gd0022/12a.png alt=達成項目追加手順6></li><li>こんな感じで各入力欄を埋めて、あとはせっかくやからその達成項目のためのイメージもアップロードしとこ。イメージなしでもいけるけど、それはさすがに素っ気ないやん？ただし、アップロードするイメージには制限があって、以下のように書いてあるから、画像を用意するときは注意してな。<br><em>『達成項目を表すローカライズされた画像。画像は、1024x1024ピクセル、72dip以上、およびRGB色空間の.jpeg、.jpg、または.pngファイルであるひつようがあります。』</em><br>言語ごとに異なるイメージを用意する必要はないから、あくまで達成項目に対して一つイメージが用意できたらいい感じやね。<br><img loading=lazy src=/images/tutorials/gd0022/13.png alt=達成項目追加手順7></li><li>ローカリゼーションが追加できたらこんな感じになるで。<br><img loading=lazy src=/images/tutorials/gd0022/14.png alt=達成項目追加手順8></li></ol><p>達成項目としてありそうなのは、例えば「クリア回数」、「プレイ時間」、「入手したレアアイテム」、「解放したスキル」とかかな。色々考えて追加してみてな。ただ、先に達成項目を全部洗い出して、点数の割り振りを決めてから作業したほうがええと個人的には思うよ。なんでかっていうと、あとから達成項目を追加するとなると、点数を割り振り直さなあかんから、けっこうめんどくさいのよ。</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h2 id=game-center-プラグインを使ってコーディングする>Game Center プラグインを使ってコーディングする<a hidden class=anchor aria-hidden=true href=#game-center-プラグインを使ってコーディングする>#</a></h2><p>ほな、ここからは GDscript で Game Center 機能をコーディングするとこ説明していくで。</p><p>まずはプロジェクトの中に、<strong>game_center.gd</strong> とかそれっぽい名前で一つスクリプトつくろか。ファイルシステムドックで右クリックから追加できるで。</p><p><img loading=lazy src=/images/tutorials/gd0022/15.png alt=プロジェクトにスクリプトを追加する></p><p>ゲームが始まるやいなやこのスクリプトを読み込むようにしたいよなあ。そういうときは、Godot の <strong>Project</strong> > <strong>Project Settings&mldr;</strong> > <strong>Autoload</strong> タブを開いて、作ったスクリプトを追加したらええねんで。これでゲーム開始したタイミングでこのスクリプトが読み込まれるわ。</p><p><img loading=lazy src=/images/tutorials/gd0022/16.png alt=Autoloadにスクリプトを追加する></p><p>次は肝心のスクリプトの中身やな。<strong>game_center.gd</strong> スクリプトに Game Center のプログラムを実装していくわけやけど、最初はこんな感じで Game Center プラグインを入れるための変数を、例えば <code>game_center</code> って名前にして、先に宣言しとこか。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Game Center plugin</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> game_center <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>
</span></span></code></pre></div><p>つぎに <code>_ready()</code> 関数の中に、ゲーム開始直後から実行しておきたいプラグインの取得と認証の部分を追加していこか。コードは次のような感じやで。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>OS</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get_name</span>() <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;iOS&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Engine</span><span style=color:#f92672>.</span><span style=color:#a6e22e>has_singleton</span>(<span style=color:#e6db74>&#34;GameCenter&#34;</span>):
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#34;Found GameCenter plugin&#34;</span>)
</span></span><span style=display:flex><span>            game_center <span style=color:#f92672>=</span> <span style=color:#a6e22e>Engine</span><span style=color:#f92672>.</span><span style=color:#a6e22e>get_singleton</span>(<span style=color:#e6db74>&#34;GameCenter&#34;</span>)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> res <span style=color:#f92672>=</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>authenticate</span>()
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#34;Authentication: &#34;</span>, res)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            print(<span style=color:#e6db74>&#34;There is no GameCenter game_center&#34;</span>)
</span></span></code></pre></div><ol><li>まず、OS が <strong>iOS</strong> かどうかを判定するのに <code>OS.get_name()</code> で OS の名前を取得してチェックしてるわ。</li><li>OS が <strong>iOS</strong> やったら、つぎは <code>Engine.has_singleton("GameCenter")</code> で GameCenter プラグインが、ちゃんとあるかどうかもチェックしてるで。</li><li>ほんで、プラグインがみつかったら、<code>Engine.get_singleton("GameCenter")</code> で Game Center プラグインを取得して、それを変数 <code>game_center</code> にぶっ込むというわけや。</li><li>そのあとそのまま認証までやってるんやけど、認証は Game Center プラグインに備え付けの <code>authenticate()</code> 関数呼び出すだけでええから簡単やね。この関数、認証の結果を返してくれるから <code>res</code> 変数に結果入れて、<code>print()</code> で出力したらデバッグしやすいんとちゃうかな。</li></ol><p>ここまでが Game Center 機能を実装する上での下準備やね。つぎは、Game Center の <strong>Leaderboard</strong> と <strong>Achievements</strong> の機能の実装について、それぞれ順番に説明していくで。</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h3 id=leaderboard-を実装する>Leaderboard を実装する<a hidden class=anchor aria-hidden=true href=#leaderboard-を実装する>#</a></h3><p><strong>Leaderboard</strong> からいきましょか。めっちゃシンプルな例で説明していくで。</p><p>最初に Leaderboard を更新するための関数を定義するで。ここでは <code>update_leaderboard()</code> っていう関数にしとくわ。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_leaderboard</span>(score:<span style=color:#66d9ef>int</span>, category:<span style=color:#a6e22e>String</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;call update_leaderboard()&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;No Game Center plugin&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>is_authenticated</span>():
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;not authenticated, authenticating again&#34;</span>)
</span></span><span style=display:flex><span>        game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>authenticate</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> data <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;score&#34;</span>: score, <span style=color:#e6db74>&#34;category&#34;</span>: category}
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;New Leaderboard data: &#34;</span>, data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> res <span style=color:#f92672>=</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>post_score</span>(data)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Update Leaderboard response: &#34;</span> <span style=color:#f92672>+</span> str(res))
</span></span></code></pre></div><ol><li>関数の引数は、<code>score:int</code> と <code>category:String</code> の2つ設定してるで。</li><li>まず <code>game_center</code> 変数が空っぽの <code>null</code> やったら関数はそこで終了させる。</li><li>つぎに、認証ができてなかった場合はもう一回認証させるで。基本的には <code>_ready()</code> 実行時に認証完了してるはずやけどね。</li><li><code>data</code> 変数に、辞書型のデータを代入するで。この辞書型データは <code>"score"</code> と <code>"category"</code> という2つのキーをもってるんやけど、<code>"category"</code> には App Store Connect で自分が用意した Leaderboard の名前を String 型で指定するねん。ほんで、<code>"score"</code> のほうに int 型で実際のスコアを入れてあげるわけや。これで、どの Leaderboard にどれだけのスコアを反映するのか、っていうのを指示するデータができあがるんやね。ちなみに、このデータの形式は、このあと登場する Game Center プラグインに備え付けの <code>post_score()</code> 関数の引数に渡すデータとして決められてるものやから、適当にはできへんとこなんよ。</li><li>そして、プラグインの <code>post_score()</code> の引数に <code>data</code> 変数を渡して呼び出すねん。これで Leaderboard のスコアを更新してくれるわ。更新の結果を戻り値で出してくれるから、これも <code>print()</code> で出力してデバッグできるようにするとええと思うよ。</li></ol><p>関数 <code>update_leaderboard()</code> が定義できたので、あとは実際にゲームの中でスコアを反映するタイミングで、この関数を呼び出せばいいね。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>var</span> current_score : <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> highscore : <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_highscore</span>(current_score: <span style=color:#66d9ef>int</span>):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> high_score <span style=color:#f92672>&lt;</span> current_score:
</span></span><span style=display:flex><span>        high_score <span style=color:#f92672>=</span> current_score
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>update_leaderboard</span>(high_score, <span style=color:#e6db74>&#34;highscore&#34;</span>)
</span></span></code></pre></div><p>例えば、簡単なシューティングゲームで考えてみよ。</p><ol><li>変数 <code>current_score</code> を宣言しといて、敵を撃ち落としたらこの値がどんどん加算されていくことにしよか。</li><li>もうひとつ <code>highscore</code> って変数も宣言しとくて。こっちは、過去最高記録を保存する変数で、Leaderboard に反映するやつやで。</li><li>あとは <code>update_highscore</code> って関数で以下のロジックをまとめといて、ゲームオーバーのタイミングでこの関数を呼び出したらうまいこといくんとちゃうかな。<ol><li><code>highscore</code> 変数の値を <code>current_score</code> 変数の値と比較</li><li><code>current_score</code> のほうが大きかったら <code>highscore</code> を更新する</li><li>ついでに Game Center の Leaderboard も更新する</li></ol></li></ol><p>このへんはもうゲームによって全然変わってくるから各自で頑張ろね。</p><p>あとは、ゲーム内で Game Center の画面に移動して、Leaderboard を確認したいよね。自分は何位なのか、順位は変わってるのか、そもそも誰か遊んでくれてるのか、って気になるからね。そのための関数は例えばつぎのようにしたらええかな。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>show_leaderboard</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;No Game Center plugin&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>is_authenticated</span>():
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;not authenticated, authenticating again&#34;</span>)
</span></span><span style=display:flex><span>        game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>authenticate</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> param <span style=color:#f92672>:=</span> {<span style=color:#e6db74>&#34;view&#34;</span>: <span style=color:#e6db74>&#34;leaderboards&#34;</span>, <span style=color:#e6db74>&#34;leaderboard_name&#34;</span>: <span style=color:#e6db74>&#34;highscore&#34;</span>}
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> res <span style=color:#f92672>=</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>show_game_center</span>(param)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Show Leaderboard response: &#34;</span>, res)
</span></span></code></pre></div><p>Button ノードを押したときに上のような関数を呼び出して、Game Center の Leaderboard 画面に遷移させるわかりやすいんとちゃうかな。</p><ol><li>関数の名前は <code>show_leaderboard()</code>、引数はなし</li><li><code>game_center</code> 変数が空っぽの <code>null</code> やったら関数はそこで終了させる。</li><li>認証ができてなかった場合はもう一回認証させるで。基本的には <code>_ready()</code> 実行時に認証完了してるはず。</li><li><code>param</code> 変数に辞書型データを入れる。これはプラグイン備え付けの <code>show_game_center()</code> 関数の引数で指定の形式。 <code>"view"</code> キーには <code>"leaderboards"</code> (複数形！)を、<code>"leaderboard_name"</code> キーには <code>"highscore"</code>（App Store Connect で設定した名前）をそれぞれ値として指定してな。</li><li><code>param</code> 変数を引数に渡しつつ、プラグインの <code>show_game_center()</code> 関数を呼び出す。戻り値で結果がわかるから、関数を変数 <code>res</code> に入れて、そのあとデバッグ用として <code>print()</code> で出力するようにしておく。</li></ol><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h3 id=達成項目を実装する>達成項目を実装する<a hidden class=anchor aria-hidden=true href=#達成項目を実装する>#</a></h3><p>つぎに <strong>達成項目</strong> に関わるプログラムをコーディングしていくで。といっても <strong>Leaderboard</strong> のほうで要領つかめてたら似たようなもんやから安心してな。こちらもシンプルな例でいこか。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_achievement</span>(item_name:<span style=color:#a6e22e>String</span>, progress:<span style=color:#66d9ef>float</span>):
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;called report_achievement()&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;No Game Center plugin&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>is_authenticated</span>():
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;not authenticated, authenticating again&#34;</span>)
</span></span><span style=display:flex><span>        game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>authenticate</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> data <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;name&#34;</span>: item_name, <span style=color:#e6db74>&#34;progress&#34;</span>: progress}
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;New Achievement data: &#34;</span>, data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> res <span style=color:#f92672>=</span> game_center<span style=color:#f92672>.</span><span style=color:#a6e22e>award_achievement</span>(data)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;Update Achievement response: &#34;</span> <span style=color:#f92672>+</span> str(res))
</span></span></code></pre></div><ol><li>関数は、例えば <code>update_achievement()</code> という名前で、引数は、<code>item_name:String</code> と <code>progress:float</code> の2つ設定して定義するで。</li><li>まず <code>game_center</code> 変数が空っぽの <code>null</code> やったら関数はそこで終了させる。</li><li>つぎに、認証ができてなかった場合はもう一回認証させるで。基本的には <code>_ready()</code> 実行時に認証完了してるはずやね。</li><li><code>data</code> 変数に、辞書型のデータを代入するで。この辞書型データは <code>"name"</code> と <code>"progress"</code> という2つのキーをもってるんやけど、<code>"name"</code> には App Store Connect で自分が用意した達成項目の名前を String 型で指定するねん。ほんで、<code>"progress"</code> のほうに float 型でその達成項目についての達成率（単位は %）を渡してあげると。これで、どの達成項目の条件をどれくらい達成できているのかをを指示するデータができあがるねんな。ちなみに、この辞書型のデータ形式は、Game Center プラグインに備え付けの <code>award_achievement()</code> 関数の引数に渡すデータとして決められてるものやから、適当にやったらあかんのやね。</li><li>そして、プラグインの <code>award_achievement()</code> を引数に <code>data</code> 変数を渡して呼び出すねん。これで指定した達成項目の達成率を更新してくれるわ。更新の結果を戻り値で出してくれるから、これも <code>print()</code> で出力してデバッグできるようにするとええと思うよ。</li></ol><p>つづいて、実際に達成項目の達成率を更新する部分のコードも見てみよか。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>var</span> play_count <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> play_count_100 <span style=color:#f92672>:=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_play_count_100</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> play_count_100:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> progress <span style=color:#f92672>=</span> play_count <span style=color:#f92672>/</span> <span style=color:#ae81ff>100</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>100.0</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>update_achievement</span>(<span style=color:#e6db74>&#34;play_count_100&#34;</span>, progress)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> progress <span style=color:#f92672>==</span> <span style=color:#ae81ff>100.0</span>:
</span></span><span style=display:flex><span>            play_count_100 <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span></code></pre></div><ol><li>例えば、100回プレイしたら達成という条件の達成項目があったとしようや。</li><li>それに対して、プレイするたびにインクリメントされる変数 <code>play_count: int</code> を宣言しとくやん。</li><li>そして、達成項目をクリア済みかどうかを示す変数 <code>play_count_100: bool</code> も必要やから宣言しとこな。</li><li>ここで <code>update_play_count_100()</code> 関数を定義すんねん。プレイが始まるたびにこの関数を呼び出せば、達成項目の達成率が徐々に上がっていって、最終的に 100 % になるってわけやね。この関数の中には以下の内容を記述してな。<ol><li>で、<code>if</code> 文を使って <code>play_count_100</code> が <code>false</code>（未達成）の場合だけ処理するように条件分岐させて。</li><li>変数 <code>progress</code> に、分母を 100、現在の <code>play_count</code> を分子にして、単位 % に合わせて 100 掛けたものを代入するで。これが現在の達成率になるわ。</li><li>あとは、さっき作った関数 <code>update_achievement()</code> を、引数に <code>"play_count_100"</code> と <code>progress</code> 渡しつつ呼び出すねん。これで、Game Center の指定した達成項目が更新されるわ。</li><li>あとは、<code>progress</code> が 100 やったら、今後は計測する必要がないので <code>play_count_100</code> は <code>true</code> に更新しとこな。</li></ol></li></ol><p>達成項目の実装についてはこれくらいにしとくわ。</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><br><h2 id=おわりに>おわりに<a hidden class=anchor aria-hidden=true href=#おわりに>#</a></h2><p>ということで、今回は iOS 用のゲームで Game Center 機能を実装する方法について紹介したで。実は、Godot 公式の iOS プラグインのリポジトリにある Readme にどうやって実装するのか説明はあるんやけど、説明がちょっと少なめやったり、プラグインのコードがちょっと難解やったりで、個人的にも想定してたより実装に時間がかかったんよ。そういうわけで、この記事を補足資料として役立ててもらえたら嬉しい限りです。</p><br><h2 id=ゲームの宣伝>ゲームの宣伝<a hidden class=anchor aria-hidden=true href=#ゲームの宣伝>#</a></h2><p>最後に、実際に Game Center プラグインを使っている僕のゲームの宣伝だけさせてな。</p><h3 id=-もの切り侍>👹 もの切り侍<a hidden class=anchor aria-hidden=true href=#-もの切り侍>#</a></h3><p>今あなたの動体視力と反射神経が試される！侍を操作して、空から降ってくるあんな物やこんな物を見事空中で切ることができるか？！簡単片手操作でプレイできる、激ハマり必至の爽快カジュアル・タイミングゲーム！</p><figure><a href=https://apps.apple.com/jp/app/slashing-samurai/id6473121142><img loading=lazy src=/images/portfolio/slashing_samurai/app_icon/icon.png width=150px></a></figure><h3 id=-ステキなソリティア>🃏 ステキなソリティア<a hidden class=anchor aria-hidden=true href=#-ステキなソリティア>#</a></h3><p>「ソリティア（クロンダイク）」と言えば、言わずと知れた定番中の定番、一人遊びカードゲームの王様なわけですが、このたび、モバイルゲーム「ステキなソリティア」が App Store で配信中！</p><figure><a href=https://apps.apple.com/jp/app/%E3%82%B9%E3%83%86%E3%82%AD%E3%81%AA%E3%82%BD%E3%83%AA%E3%83%86%E3%82%A3%E3%82%A2/id6479584244><img loading=lazy src=/images/portfolio/lovely_solitaire/app_icon/app_icon.png width=150px></a></figure><br><hr></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on x" href="https://x.com/intent/tweet/?text=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f&amp;hashtags=GameDev%2cGodotEngine%2c%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%2ciOS%2cAppStore"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f&amp;title=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85&amp;summary=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f&title=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85%20-%20https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on telegram" href="https://telegram.me/share/url?text=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Game Center プラグインを追加したあとの実装 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%f0%9f%a4%96%20Game%20Center%20%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%82%92%e8%bf%bd%e5%8a%a0%e3%81%97%e3%81%9f%e3%81%82%e3%81%a8%e3%81%ae%e5%ae%9f%e8%a3%85&u=https%3a%2f%2fwww.peanuts-code.com%2fja%2ftutorials%2fgd0022_implement_game_center%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/ja/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/ja/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/ja/tags/%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3/>プラグイン</a></li><li><a href=https://www.peanuts-code.com/ja/tags/ios/>IOS</a></li><li><a href=https://www.peanuts-code.com/ja/tags/app-store/>App Store</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/ja/tutorials/gd0023_distribute_app_from_xcode/><span class=title>« 前へ</span><br><span>🤖 Xcode から App Store Connect にゲームを配布する</span>
</a><a class=next href=https://www.peanuts-code.com/ja/tutorials/gd0021_game_center_plugin/><span class=title>次へ »</span><br><span>🤖 プロジェクトに Game Center プラグインを追加する</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/ja/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="コピー";function s(){t.innerHTML="コピーされました!",setTimeout(()=>{t.innerHTML="コピー"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>