<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Bullet hell made by Godot | Peanuts Code</title>
<meta name="keywords" content="Godot, GodotEngine, GodotEngine, GameDev, Tutorials, 2D, Top-down, shooter, BulletHell" />
<meta name="description" content="In this time, we will create a bullet hell aka barrage for a barrage shooting game.">
<meta name="author" content="Masanao Sako">
<link rel="canonical" href="https://www.peanuts-code.com/en/tutorials/gd0007_bullethell/" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<link rel="preload" href="/images/logomark.png" as="image">
<link rel="icon" href="https://www.peanuts-code.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.peanuts-code.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.peanuts-code.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.peanuts-code.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.peanuts-code.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.99.1" />
<link rel="alternate" hreflang="ja" href="https://www.peanuts-code.com/ja/tutorials/gd0007_bullethell/" />
<link rel="alternate" hreflang="en" href="https://www.peanuts-code.com/en/tutorials/gd0007_bullethell/" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-DK0NK2RTTW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-DK0NK2RTTW', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Bullet hell made by Godot" />
<meta property="og:description" content="In this time, we will create a bullet hell aka barrage for a barrage shooting game." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0007_bullethell/" />
<meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0007_BulletHell/img20.gif" /><meta property="article:section" content="tutorials" />
<meta property="article:published_time" content="2022-05-23T01:30:00&#43;09:00" />
<meta property="article:modified_time" content="2022-05-23T01:30:00&#43;09:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.peanuts-code.com/images/tutorials/gd0007_BulletHell/img20.gif" />
<meta name="twitter:title" content="Bullet hell made by Godot"/>
<meta name="twitter:description" content="In this time, we will create a bullet hell aka barrage for a barrage shooting game."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Tutorials",
      "item": "https://www.peanuts-code.com/en/tutorials/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Bullet hell made by Godot",
      "item": "https://www.peanuts-code.com/en/tutorials/gd0007_bullethell/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Bullet hell made by Godot",
  "name": "Bullet hell made by Godot",
  "description": "In this time, we will create a bullet hell aka barrage for a barrage shooting game.",
  "keywords": [
    "Godot", "GodotEngine", "GodotEngine", "GameDev", "Tutorials", "2D", "Top-down", "shooter", "BulletHell"
  ],
  "articleBody": "In this time, we will create a bullet hell aka barrage for a barrage shooting game. The bullet hell is a large number of bullets (or similar long-range attacks) like a curtain. A “bullet hell shooter” is a game in which the player shoots at and defeats enemy characters while dodging and weaving through the gaps between the bullets. Some games specialize in simply dodging the bullets. Many games are based on the motif of spaceships and fighter planes that fit the image (in this tutorial, a ground battle between a wizard and a monster though).\nIn this tutorial, we will focus only on creating a bullet hell. Also, while bullet hell come in various shapes and sizes, we will focus on rotating-type bullet hell.\n Environment \nThis tutorial was created in the following environment\n・Godot version: 3.4.2\n・Computer OS version: macOS 11.6.5\n The project file for this tutorial is located at GitHub repository . After downloading the .zip file, import the “project.godot” file in the “Start” folder into the Godot Engine, and you will be able to start with a project that has only been prepped. If you would like to see the completed project in a hurry, import the “project.godot” file from the “End” folder.\nAll the assets imported into the project were downloaded from KENNEY  website. I used an asset pack called 1-Bit Pack . I can’t help but be thankful for this wonderful free material.\nNow, when you open the project in the “Start” folder in Godot Engine, the following are already created.\n1.Player character (wizard) 2.\n2.Player character’s long-range attack (magic) 3.\n3.Enemy character (the monster who releases a barrage of bullets) 4.\n4.Game world (the game world in which the above objects exist)\nFirst of all, please run the project in the “Start” folder, where only the preliminary work has been completed, to see how it works.\nThe game is set up as follows.\n The player character can control movement and magic long-range attacks with the keys below.  move_up: W key - the player character moves up. move_down: S key — moves the player character down. move_right: D key - moves the player character right. move_left: A key - moves the player character left. magic: Spacebar or left mouse button - Casts a spell.   The player character dies after 10 hits from enemy character bullets. If the player character dies, the game is over (debug panel closes automatically). The enemy character can only move for now. The enemy character will move toward the player character every 2 seconds. Enemy character dies after 5 magic hits. Magic is ineffective while Enemy characters are flashing red and white after a hit. When an enemy character dies, the next enemy character appears within a radius of 50px from the player character. The appearance of the enemy character changes randomly each time. The player character’s magic disappears 1 second after it is released. The game world can be moved unlimitedly.   \n (adsbygoogle = window.adsbygoogle || []).push({});   Creating a bullet scene To create a bullet hell scene, we need each of the bullets that make it up. Therefore, we will start by creating the bullet scene.\nCreating a scene Create a new scene of a bullet by following the steps below.\n Select “Scene” menu  “New Scene”. Select “Other Node” in “Generate Root Node”. Select a node of the “Area2D” class as a root node. Rename the root node “Area2D” to “Bullet”. Save the scene here once, setting the file path to “res://Enemy/Bullet.tscn”.  Adding nodes to the scene Next, add child nodes to the root node “Bullet.\n add a node of the class “Sprite” to the root node “Bullet”. This is the appearance of a bullet. Add a node of the “CollisionShape2D” class to the root node “Bullet”. This is used to detect when the bullet collides with the physical body. Add a node of the “VisibilityNotifier2D” class to the root node “Bullet”. This is used to detect when a bullet goes off the screen.   Official Godot Docs: \nVisibilityNotifier2D \n The scene tree should now look like this.\nEditing the properties of the nodes Continue to edit the properties of each node.\nBullet（Area2D）node No editing of the properties of this root node is required.\nSprite node In this case, we will use the method of setting the sprite texture by specifying the range of textures to be used from a single sprite sheet that contains a large number of textures.\n In the inspector, apply the resource file “res://colored-transparent_packed.png” to the “Texture” property of the “Sprite” node.\n Turn on “Region”  “Enabled”\n Open the “Texture Region” panel at the bottom of the editor and specify the region of the texture you want to use in the sprite sheet.\n First, expand the panel to the top of the editor for easy viewing, and then enlarge the sprite sheet to a size that is easy to see. Select “Grid Snap” in “Snap Mode” at the top of the “Texture Region” panel.\n Set the “Step” at the top of the panel to 16px 16px as well. This will make the grid the same size as the sprites on the sprite sheet.\n Select the texture you want to apply to the bullet on the sprite sheet. In this tutorial, we selected a skull texture. It is a horror that a monster will release a barrage of skull bullets.\n   Return to the inspector and change the color to the bullet color of your choice in the Visibility  Modulate property. Here, as a sample, we have chosen the somewhat eerie purple color #9da4d8.\n  CollisionShape2D node  In the inspector, apply the “New CircleShape2D” resource to the “Shape” property.\n In the 2D workspace, match the collision shape to the size of the “Sprite” node texture.\n If entering directly in the inspector, set the “Radius” property of the “CircleShape2D” resource to 8.\n  VisibilityNotifier2D node No editing of the properties of this root node is required.\nControlling bullets with a script Next, let’s program a script to control bullets. Let’s attach a new script to the root node “Bullet”. Create the file path as “res://Enemy/Bullet.gd”.\nFirst, edit the script as follows.\n### Bullet.gd ### extends Node2D  # Seconds of a bullet export var speed = 150  # Physical process method called 60 times/second func _physics_process(delta): \t# Move the bullet every frame by adding the current bullet position to.. \t# the current bullet direction x the current bullet direction x.. \t# the speed of the bullet per second x 1 frame of time \tposition += transform.x * speed * delta \nNext, since the root node “Bullet” is an Area2D class, we will use its signal to make the bullet disappear when it hits the physical body. Select “Bullet” in the inspector and connect the signal “body_entered(body)” to this “Bullet.gd” script in the Node Dock  Signal tab.\nExecute method queue_free in method _on_Bullet_body_entered generated by connecting signals.\n### Bullet.gd ### # Methods called by signals sent out when physical bodies collide func _on_Bullet_body_entered(body): \t# free Bullet \tqueue_free() \nSimilarly, use the signal of the “VisibilityNotifier2D” node to make the bullet disappear when it goes off the screen. Let’s connect the “VisibilityNotifier2D” signal “screen_exited()” to this “Bullet.gd” script.\nExecute method queue_free in method _on_VisibilityNotifier2D_screen_exited generated by connecting the signal.\n### Bullet.gd ### # Method called by a signal that is sent out when Bullet go off-screen func _on_VisibilityNotifier2D_screen_exited(): \t# free Bullet \tqueue_free() \nThis completes the Bullet scene. After this, the created bullet scene instance is added to the enemy character’s scene tree so that the enemy character can fire bullets.\n \n (adsbygoogle = window.adsbygoogle || []).push({});   Creating a bullet hell Controlling the bullet hell with a script From here, we will edit the script “Enemy.gd” attached to the root node “Enemy” in the “Enemy.tscn” scene of the enemy character to control the bullet hell. After opening “Enemy.gd” in the script editor, let’s first define the necessary properties. In the following code, please add the code where it is commented “# Add”.\n### Enemy.gd ### extends KinematicBody2D  signal died  # Add: reference to preloaded Bullet.tscn const bullet_scn = preload(\"res://Enemy/Bullet.tscn\")  var enemy_life = 5 var enemy_speed = 800 var delta_count = 0  # Add: Distance from the center of the Enemy to the firing position of the bullet var radius = 20 # Add: Rotation speed of the bullet's firing position around the Enemy export var rotate_speed = 40 # Add: Interval between firing bullets (seconds) export var interval = 0.4 # Add: Number of bullets fired at one time export var spawning_count = 4 It may be a little difficult to visualize from the comments in the code alone, so a diagram is attached.\nAs you can see, it is easy to imagine a circle with “Enemy” as its center and the value of the property radius as its radius. Of the bullets to be fired at a time specified by the property spawning_count, the first firing position should always be (x: radius, y: 0), and the second and subsequent bullets should be placed from there at equal intervals (angle difference) around the circumference of this circle. The bullets are shifted by the property rotate_speed in a clockwise direction every second specified by the property interval, and then fired.\nThen edit the _ready method, which is called the first time the scene is loaded. In the _ready method, add the code for initialization necessary to generate the bullet hell. It should be easier to understand if you can visualize the above diagram.\n### Enemy.gd ### func _ready(): \tanim_player.play(\"spawn\") \t\trandomize() \tsprite.frame = randi() % sprite.hframes \t\t### Add all of the following ### \t# Define step as the interval (angle difference) between bullets fired at once \t# step is 180° x 2 = 360° divided by the value of the property Spawning_count \tvar step = PI * 2 / spawning_count \t# Loop for the number of values in spawning_count \t# e.g) If spawning_count is 4, i will be filled with 0 ~ 3 in that order \tfor i in spawning_count: \t# Create a new Node2D node to be used as a marker of the bullet's firing position... \t# and define it as spawn_point \tvar spawn_point = Node2D.new() \t# Define the firing position as pos \t# Define pos as the position rotated by (step x i) from the base position (x: radius, y: 0) \tvar pos = Vector2(radius, 0).rotated(step * i) \t# Place spawn_point at the bullet's firing position \tspawn_point.position = pos \t# Align the orientation of the spawn_point with.. \t# the angle from the positive x-axis to the firing position \tspawn_point.rotation = pos.angle() \t# Make spawn_point a child of the Rotater node (Node2D)... \t# that has been prepared in advance as a node for rotation \trotater.add_child(spawn_point)  \t# Set the wait_time property of the Timer node with the value of the interval property \ttimer.wait_time = interval \t# Wait until the animation of the AnimationPlayer node is finished \tyield(anim_player, \"animation_finished\") \t# Start the timer of the Timer node \ttimer.start() \nNow, every time the “Timer” node times out, place an instance of the “Bullet.tscn” scene you created earlier at the same position as the child node of the “Rotater” node (the spawn_point in the above code), and the bullets should fly automatically. Now let’s edit the _on_Timer_timeout method called by the “timeout” signal of the “Timer” node. Since the signal has already been connected in the preparation, replace pass in the method with the following content.\n### Enemy.gd ### # Methods called on the timeout signal of a Timer node func _on_Timer_timeout(): \t# Loop over the child nodes of the Rotater node \tfor node2d in rotater.get_children(): \t# Instance of Bullet.tscn \tvar bullet = bullet_scn.instance() \t# make Bullet instance node a child of its parent node (World node) rather than Enemy node \tget_parent().add_child(bullet) \t# Make the Bullet instance position the same as the Rotater child node position \tbullet.position = node2d.global_position \t# set the direction of the Bullet instance to be the same as... \t# the direction of the child node of Rotater \tbullet.rotation = node2d.global_rotation \nThe firing position still does not rotate, but for the time being, it should now fire the specified number of bullets at the specified time difference. Let’s run the project.\nNext, let’s rotate the firing position of the bullets a bit to make it more like a bullet hell. This time, we will update the code in the _physics_process method a little. Please add the comment “# Add” in the following code.\n### Enemy.gd ### func _physics_process(delta): \tdelta_count += delta \tif delta_count  2: \tdelta_count = 0 \tif get_parent().has_node(\"Player\"): \tanim_player.stop() \tanim_player.play(\"move\") \tvar direction = global_position.direction_to(get_parent().get_node(\"Player\").global_position) \tvar velocity = direction * enemy_speed \tvelocity = move_and_slide(velocity) \t\t# Add: define next direction (angle) as new_rotation \t# new_rotation is the current rotation of the Rotater node + rotate_speed x the time of 1 frame \tvar new_rotation = rotater.rotation + rotate_speed * delta \t# Add: rotate the Rotater node by the remainder (angle) of new_rotation divided by 360 \trotater.rotate(fmod(new_rotation, 360)) \nNow the bullet’s firing position should rotate every 0.4 seconds as specified in the interval property. Let’s run the project again to see if it behaves as expected.\nCustomizing the bullet hell Properties defined in scripts can be easily edited in the inspector if the export keyword is added at the beginning. Let’s change the values to create a different bullet hell than the previous one.\n  Sample 1\n Rotate Speed: 45 Interval: 0.5 Spawning Count: 10\n    Sample 2\n Rotate Speed: 10 Interval: 0.1 Spawning Count: 8\n    Sample 2 has turned out to be a very devilish game. But what a thrilling and enjoyable experience.\n \n (adsbygoogle = window.adsbygoogle || []).push({});   Adding randomness At the preliminary stage, the appearance of the enemy character (sprite texture) is coded to be randomly determined from six different types. If the properties of the bullet hell are also randomly determined, it would be interesting because it is impossible to predict what kind of bullet hell will be unleashed each time. In fact, it is surprisingly easy to implement this script by just adding a few codes to the script described so far.\nNow, open the “Enemy.gd” script in the Script Editor. First, define the upper and lower limits of each property to form the bullet hell that has already been prepared in a separate property. Let’s update the lines commented “# Add” and “# Change” in the following code.\n### Enemy.gd ### var radius = 20 export var rotate_speed: float # Change: only define type and leave value undefined export var max_rotate_speed = 80 # Add export var min_rotate_speed = 20 # Add export var interval: float # Change: only define type and leave value undefined export var max_interval = 0.8 # Add export var min_interval = 0.2 # Add export var spawning_count: int # Change: only define type and leave value undefined export var max_spawning_count = 10 # Add export var min_spawning_count = 2 # Add \nNext, edit the _ready method, as we need to apply random values to each property at the time the scene is loaded. Let’s add the lines commented “# Add” in the code below.\nfunc _ready(): \tanim_player.play(\"spawn\") \t\t# enable random value generation \trandomize() \tsprite.frame = randi() % sprite.hframes # int, max: 5 \t\t# Add: assign a random fraction to rotate_speed with... \t# min_rotate_speed as the lower limit and max_rotate_speed as the upper limit \trotate_speed = rand_range(min_rotate_speed, max_rotate_speed) \t# Add: Assign a random fraction to interval with... \t# min_interval as the lower limit and max_interval as the upper limit \tinterval = rand_range(min_interval, max_interval) \t# Add: The upper limit is -1 from the specified value in the subsequent calculation... \t# so it is adjusted by +1 first. \tmax_spawning_count += 1 \t# Add: Assign a random integer to spawning_count with... \t# min_spawning_count as the lower limit and max_spawning_count as the upper limit \tspawning_count = randi() % max_spawning_count + min_spawning_count \t\tvar step = PI * 2 / spawning_count \tfor i in spawning_count: \tvar spawn_point = Node2D.new() \tvar pos = Vector2(radius, 0).rotated(step * i) \tspawn_point.position = pos \tspawn_point.rotation = pos.angle() \trotater.add_child(spawn_point)  \ttimer.wait_time = interval \tyield(anim_player, \"animation_finished\") \ttimer.start() A few additional notes on the generation of random values.\nFirst, rand_range returns a random float number with the first argument as the lower limit and the second argument as the upper limit. It is used for the properties rotate_speed and interval because these properties are defined as float types.\nNext, randi is a method that returns a random integer, but since it takes no arguments, it is not possible to specify an upper or lower limit.\nTherefore, we use the fact that the remainder when the returned value is divided by the upper limit is 0 or more and less than (upper limit -1). Since the maximum value is the specified upper limit -1, put a code max_spawning_count += 1 one line earlier to add +1.\nThe symbol % (modulo) can be used to obtain the remainder obtained by dividing a by b using a % b. If we add c to that value as a % b + c, the result cannot be smaller than c. In other words, a random integer with upper and lower bounds can be expressed as randi() % upper bound + lower bound. Remember that the maximum value returned is the upper limit -1.\nIn this case, the randomize method was written first, but without it, the result will be the same every time, so if you use methods that return a random value, it is good to remember to write it at the beginning of the _ready method.\nFinally, let’s run the project to see if each monster that appears will have a different bullet hell.\n \n (adsbygoogle = window.adsbygoogle || []).push({});   Conclusion In this tutorial, we created a bullet hell for a top-down shooter. For a rotating bullet hell like this one, the following points will be important.\n Set the radius of the circle, the rotation speed of the firing position, the time difference of firing, and the number of simultaneously fired bullets with properties Prepare a node for rotation. Calculate the firing position based on the radius of the circle and the number of rounds fired simultaneously. Add child nodes to the Rotater node to mark the firing position. Set the timer time to the time difference of the firing. In the physics process, always rotate the Rotater node according to the rotation speed When the timer times out, an instance of the bullet is created at the location of the marker node.  There might be better ways to implement this, and I hope that you will experiment with various methods and finally adopt the best one.\nIn addition, actual bullet shooters are not only rotating types like this one, but are also diverse, such as wave-shaped, fan-shaped, etc. If you are interested in this, please look into it.\n Links  Godot Docs: Matrices and transforms  YouTube: How to Make a Bullet Hell Projectile Pattern Generator in Godot  YouTube: How to Make a Bullet Hell Game in Godot [P1] - Basic Collisions   UPDATE\n2022/05/25 Added keys control settings.\n",
  "wordCount" : "3155",
  "inLanguage": "en",
  "image":"https://www.peanuts-code.com/images/tutorials/gd0007_BulletHell/img20.gif","datePublished": "2022-05-23T01:30:00+09:00",
  "dateModified": "2022-05-23T01:30:00+09:00",
  "author":{
    "@type": "Person",
    "name": "Masanao Sako"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.peanuts-code.com/en/tutorials/gd0007_bullethell/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Peanuts Code",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.peanuts-code.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.peanuts-code.com/en/" accesskey="h" title="Peanuts Code (Alt + H)">
                <img src="/images/logomark.png" alt="logo" aria-label="logo"
                    height="35">Peanuts Code</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.peanuts-code.com/ja/" title="日本語"
                            aria-label="日本語">Ja</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.peanuts-code.com/en/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/tutorials/" title="Tutorials">
                    <span>Tutorials</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.peanuts-code.com/en/">Home</a>&nbsp;»&nbsp;<a href="https://www.peanuts-code.com/en/tutorials/">Tutorials</a></div>
    <h1 class="post-title">
      Bullet hell made by Godot
    </h1>
    <div class="post-meta">2022-05-23&nbsp;·&nbsp;15 min&nbsp;·&nbsp;Masanao Sako&nbsp;|&nbsp;
<ul class="i18n_list">Translations:
    <li>
        <a href="https://www.peanuts-code.com/ja/tutorials/gd0007_bullethell/">Ja</a>
    </li>
</ul>
</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://www.peanuts-code.com/images/tutorials/gd0007_BulletHell/img20.gif" alt="Bullet hell made by Godot">
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#creating-a-bullet-scene" aria-label="Creating a bullet scene">Creating a bullet scene</a><ul>
                        
                <li>
                    <a href="#creating-a-scene" aria-label="Creating a scene">Creating a scene</a></li>
                <li>
                    <a href="#adding-nodes-to-the-scene" aria-label="Adding nodes to the scene">Adding nodes to the scene</a></li>
                <li>
                    <a href="#editing-the-properties-of-the-nodes" aria-label="Editing the properties of the nodes">Editing the properties of the nodes</a><ul>
                        
                <li>
                    <a href="#bulletarea2dnode" aria-label="Bullet（Area2D）node">Bullet（Area2D）node</a></li>
                <li>
                    <a href="#sprite-node" aria-label="Sprite node">Sprite node</a></li>
                <li>
                    <a href="#collisionshape2d-node" aria-label="CollisionShape2D node">CollisionShape2D node</a></li>
                <li>
                    <a href="#visibilitynotifier2d-node" aria-label="VisibilityNotifier2D node">VisibilityNotifier2D node</a></li></ul>
                </li>
                <li>
                    <a href="#controlling-bullets-with-a-script" aria-label="Controlling bullets with a script">Controlling bullets with a script</a></li>
                <li>
                    <a href="#creating-a-bullet-hell" aria-label="Creating a bullet hell">Creating a bullet hell</a></li>
                <li>
                    <a href="#controlling-the-bullet-hell-with-a-script" aria-label="Controlling the bullet hell with a script">Controlling the bullet hell with a script</a></li>
                <li>
                    <a href="#customizing-the-bullet-hell" aria-label="Customizing the bullet hell">Customizing the bullet hell</a></li></ul>
                </li>
                <li>
                    <a href="#adding-randomness" aria-label="Adding randomness">Adding randomness</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a></li>
                <li>
                    <a href="#links" aria-label="Links">Links</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>In this time, we will create a bullet hell aka barrage for a barrage shooting game. The bullet hell is a large number of bullets (or similar long-range attacks) like a curtain. A &ldquo;bullet hell shooter&rdquo; is a game in which the player shoots at and defeats enemy characters while dodging and weaving through the gaps between the bullets. Some games specialize in simply dodging the bullets. Many games are based on the motif of spaceships and fighter planes that fit the image (in this tutorial, a ground battle between a wizard and a monster though).</p>
<p>In this tutorial, we will focus only on creating a bullet hell. Also, while bullet hell come in various shapes and sizes, we will focus on rotating-type bullet hell.</p>
<blockquote>
<p><em><strong><span style="color:salmon">Environment</span>
</strong><br>
This tutorial was created in the following environment</em><br>
・<em>Godot version: <strong>3.4.2</strong></em><br>
・<em>Computer OS version: <strong>macOS 11.6.5</strong></em></p>
</blockquote>
<br>
<p>The project file for this tutorial is located at <strong><a href="https://github.com/msnsk/BulletHell.git" target="_blank">GitHub repository</a>
</strong>. After downloading the .zip file, import the &ldquo;project.godot&rdquo; file in the &ldquo;Start&rdquo; folder into the Godot Engine, and you will be able to start with a project that has only been prepped. If you would like to see the completed project in a hurry, import the &ldquo;project.godot&rdquo; file from the &ldquo;End&rdquo; folder.</p>
<p>All the assets imported into the project were downloaded from <strong><a href="https://www.kenney.nl/assets" target="_blank">KENNEY</a>
</strong> website. I used an asset pack called <strong><a href="https://www.kenney.nl/assets/bit-pack" target="_blank">1-Bit Pack</a>
</strong>. I can&rsquo;t help but be thankful for this wonderful free material.</p>
<br>
<p>Now, when you open the project in the &ldquo;Start&rdquo; folder in Godot Engine, the following are already created.<br>
1.<strong>Player character (wizard)</strong> 2.<br>
2.<strong>Player character&rsquo;s long-range attack (magic)</strong> 3.<br>
3.<strong>Enemy character (the monster who releases a barrage of bullets)</strong> 4.<br>
4.<strong>Game world (the game world in which the above objects exist)</strong></p>
<br>
<p>First of all, please run the project in the &ldquo;Start&rdquo; folder, where only the preliminary work has been completed, to see how it works.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img1.gif" alt="run project"  />
</p>
<p>The game is set up as follows.</p>
<ul>
<li>The player character can control movement and magic long-range attacks with the keys below.
<ul>
<li><strong>move_up</strong>: W key - the player character moves up.</li>
<li><strong>move_down</strong>: S key &mdash; moves the player character down.</li>
<li><strong>move_right</strong>: D key - moves the player character right.</li>
<li><strong>move_left</strong>: A key - moves the player character left.</li>
<li><strong>magic</strong>: Spacebar or left mouse button - Casts a spell.</li>
</ul>
</li>
<li>The player character dies after 10 hits from enemy character bullets.</li>
<li>If the player character dies, the game is over (debug panel closes automatically).</li>
<li>The enemy character can only move for now.</li>
<li>The enemy character will move toward the player character every 2 seconds.</li>
<li>Enemy character dies after 5 magic hits.</li>
<li>Magic is ineffective while Enemy characters are flashing red and white after a hit.</li>
<li>When an enemy character dies, the next enemy character appears within a radius of 50px from the player character.</li>
<li>The appearance of the enemy character changes randomly each time.</li>
<li>The player character&rsquo;s magic disappears 1 second after it is released.</li>
<li>The game world can be moved unlimitedly.</li>
</ul>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="creating-a-bullet-scene">Creating a bullet scene<a hidden class="anchor" aria-hidden="true" href="#creating-a-bullet-scene">#</a></h1>
<p>To create a bullet hell scene, we need each of the bullets that make it up. Therefore, we will start by creating the bullet scene.</p>
<br>
<h2 id="creating-a-scene">Creating a scene<a hidden class="anchor" aria-hidden="true" href="#creating-a-scene">#</a></h2>
<p>Create a new scene of a bullet by following the steps below.</p>
<ol>
<li>Select &ldquo;Scene&rdquo; menu &gt; &ldquo;New Scene&rdquo;.</li>
<li>Select &ldquo;Other Node&rdquo; in &ldquo;Generate Root Node&rdquo;.</li>
<li>Select a node of the &ldquo;Area2D&rdquo; class as a root node.</li>
<li>Rename the root node &ldquo;Area2D&rdquo; to &ldquo;Bullet&rdquo;.</li>
<li>Save the scene here once, setting the file path to &ldquo;res://Enemy/Bullet.tscn&rdquo;.</li>
</ol>
<br>
<h2 id="adding-nodes-to-the-scene">Adding nodes to the scene<a hidden class="anchor" aria-hidden="true" href="#adding-nodes-to-the-scene">#</a></h2>
<p>Next, add child nodes to the root node &ldquo;Bullet.</p>
<ol>
<li>add a node of the class &ldquo;Sprite&rdquo; to the root node &ldquo;Bullet&rdquo;. This is the appearance of a bullet.</li>
<li>Add a node of the &ldquo;CollisionShape2D&rdquo; class to the root node &ldquo;Bullet&rdquo;. This is used to detect when the bullet collides with the physical body.</li>
<li>Add a node of the &ldquo;VisibilityNotifier2D&rdquo; class to the root node &ldquo;Bullet&rdquo;. This is used to detect when a bullet goes off the screen.</li>
</ol>
<blockquote>
<p><em><strong><span style="color:salmon">Official Godot Docs:</span>
</strong><br>
<a href="https://docs.godotengine.org/ja/stable/classes/class_visibilitynotifier2d.html" target="_blank">VisibilityNotifier2D</a>
</em></p>
</blockquote>
<p>The scene tree should now look like this.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img2.png" alt="Bullet Scene Tree"  />
</p>
<br>
<h2 id="editing-the-properties-of-the-nodes">Editing the properties of the nodes<a hidden class="anchor" aria-hidden="true" href="#editing-the-properties-of-the-nodes">#</a></h2>
<p>Continue to edit the properties of each node.<br>
<br></p>
<h3 id="bulletarea2dnode">Bullet（Area2D）node<a hidden class="anchor" aria-hidden="true" href="#bulletarea2dnode">#</a></h3>
<p>No editing of the properties of this root node is required.<br>
<br></p>
<h3 id="sprite-node">Sprite node<a hidden class="anchor" aria-hidden="true" href="#sprite-node">#</a></h3>
<p>In this case, we will use the method of setting the sprite texture by specifying the range of textures to be used from a single sprite sheet that contains a large number of textures.</p>
<ol>
<li>In the inspector, apply the resource file &ldquo;res://colored-transparent_packed.png&rdquo; to the &ldquo;Texture&rdquo; property of the &ldquo;Sprite&rdquo; node.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img3.png" alt="Texture property of Sprite"  />
</li>
<li>Turn on &ldquo;Region&rdquo; &gt; &ldquo;Enabled&rdquo;<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img4.png" alt="Region&amp;gt;Enabled property of Sprite"  />
</li>
<li>Open the &ldquo;Texture Region&rdquo; panel at the bottom of the editor and specify the region of the texture you want to use in the sprite sheet.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img5.png" alt="Region pannel"  />

<ol>
<li>First, expand the panel to the top of the editor for easy viewing, and then enlarge the sprite sheet to a size that is easy to see.</li>
<li>Select &ldquo;Grid Snap&rdquo; in &ldquo;Snap Mode&rdquo; at the top of the &ldquo;Texture Region&rdquo; panel.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img6.png" alt="Region pannel &amp;gt; choose grid snap"  />
</li>
<li>Set the &ldquo;Step&rdquo; at the top of the panel to <strong>16px 16px</strong> as well. This will make the grid the same size as the sprites on the sprite sheet.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img7.png" alt="Region pannel &amp;gt; input grid step"  />
</li>
<li>Select the texture you want to apply to the bullet on the sprite sheet. In this tutorial, we selected a skull texture. It is a horror that a monster will release a barrage of skull bullets.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img8.png" alt="Region pannel Select region"  />
</li>
</ol>
</li>
<li>Return to the inspector and change the color to the bullet color of your choice in the Visibility &gt; Modulate property. Here, as a sample, we have chosen the somewhat eerie purple color #9da4d8.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img9.png" alt="Visibility&amp;gt;Modulate property"  />
</li>
</ol>
<br>
<h3 id="collisionshape2d-node">CollisionShape2D node<a hidden class="anchor" aria-hidden="true" href="#collisionshape2d-node">#</a></h3>
<ol>
<li>In the inspector, apply the &ldquo;New CircleShape2D&rdquo; resource to the &ldquo;Shape&rdquo; property.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img10.png" alt="Shape property"  />
</li>
<li>In the 2D workspace, match the collision shape to the size of the &ldquo;Sprite&rdquo; node texture.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img11.png" alt="CollisionShape in 2D workspace"  />
</li>
<li>If entering directly in the inspector, set the &ldquo;Radius&rdquo; property of the &ldquo;CircleShape2D&rdquo; resource to 8.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img12.png" alt="Visibility&amp;gt;Modulate property"  />
</li>
</ol>
<br>
<h3 id="visibilitynotifier2d-node">VisibilityNotifier2D node<a hidden class="anchor" aria-hidden="true" href="#visibilitynotifier2d-node">#</a></h3>
<p>No editing of the properties of this root node is required.</p>
<br>
<h2 id="controlling-bullets-with-a-script">Controlling bullets with a script<a hidden class="anchor" aria-hidden="true" href="#controlling-bullets-with-a-script">#</a></h2>
<p>Next, let&rsquo;s program a script to control bullets. Let&rsquo;s attach a new script to the root node &ldquo;Bullet&rdquo;. Create the file path as &ldquo;res://Enemy/Bullet.gd&rdquo;.</p>
<p>First, edit the script as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Bullet.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node2D</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Seconds of a bullet</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">150</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Physical process method called 60 times/second</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _physics_process(delta):
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Move the bullet every frame by adding the current bullet position to..</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># the current bullet direction x the current bullet direction x..</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># the speed of the bullet per second x 1 frame of time</span>
</span></span><span style="display:flex;"><span>	position <span style="color:#f92672">+=</span> transform<span style="color:#f92672">.</span>x <span style="color:#f92672">*</span> speed <span style="color:#f92672">*</span> delta
</span></span></code></pre></div><br>
<p>Next, since the root node &ldquo;Bullet&rdquo; is an Area2D class, we will use its signal to make the bullet disappear when it hits the physical body. Select &ldquo;Bullet&rdquo; in the inspector and connect the signal &ldquo;body_entered(body)&rdquo; to this &ldquo;Bullet.gd&rdquo; script in the Node Dock &gt; Signal tab.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img13.png" alt="connect signal body_entered"  />
</p>
<p>Execute method <code>queue_free</code> in method <code>_on_Bullet_body_entered</code> generated by connecting signals.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Bullet.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods called by signals sent out when physical bodies collide</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_Bullet_body_entered(body):
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># free Bullet</span>
</span></span><span style="display:flex;"><span>	queue_free()
</span></span></code></pre></div><br>
<p>Similarly, use the signal of the &ldquo;VisibilityNotifier2D&rdquo; node to make the bullet disappear when it goes off the screen. Let&rsquo;s connect the &ldquo;VisibilityNotifier2D&rdquo; signal &ldquo;screen_exited()&rdquo; to this &ldquo;Bullet.gd&rdquo; script.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img14.png" alt="connect signal screen_exited"  />
</p>
<p>Execute method <code>queue_free</code> in method <code>_on_VisibilityNotifier2D_screen_exited</code> generated by connecting the signal.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Bullet.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called by a signal that is sent out when Bullet go off-screen</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_VisibilityNotifier2D_screen_exited():
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># free Bullet</span>
</span></span><span style="display:flex;"><span>	queue_free()
</span></span></code></pre></div><br>
<p>This completes the Bullet scene. After this, the created bullet scene instance is added to the enemy character&rsquo;s scene tree so that the enemy character can fire bullets.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="creating-a-bullet-hell">Creating a bullet hell<a hidden class="anchor" aria-hidden="true" href="#creating-a-bullet-hell">#</a></h2>
<h2 id="controlling-the-bullet-hell-with-a-script">Controlling the bullet hell with a script<a hidden class="anchor" aria-hidden="true" href="#controlling-the-bullet-hell-with-a-script">#</a></h2>
<p>From here, we will edit the script &ldquo;Enemy.gd&rdquo; attached to the root node &ldquo;Enemy&rdquo; in the &ldquo;Enemy.tscn&rdquo; scene of the enemy character to control the bullet hell. After opening &ldquo;Enemy.gd&rdquo; in the script editor, let&rsquo;s first define the necessary properties. In the following code, please add the code where it is commented &ldquo;# Add&rdquo;.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Enemy.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">KinematicBody2D</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">signal</span> died
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add: reference to preloaded Bullet.tscn</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> bullet_scn <span style="color:#f92672">=</span> preload(<span style="color:#e6db74">&#34;res://Enemy/Bullet.tscn&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> enemy_life <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> enemy_speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">800</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> delta_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add: Distance from the center of the Enemy to the firing position of the bullet</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> radius <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add: Rotation speed of the bullet&#39;s firing position around the Enemy</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> rotate_speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">40</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add: Interval between firing bullets (seconds)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> interval <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.4</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Add: Number of bullets fired at one time</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> spawning_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>
</span></span></code></pre></div><p>It may be a little difficult to visualize from the comments in the code alone, so a diagram is attached.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/figure1.png" alt="figure"  />
</p>
<p>As you can see, it is easy to imagine a circle with &ldquo;Enemy&rdquo; as its center and the value of the property <code>radius</code> as its radius. Of the bullets to be fired at a time specified by the property <code>spawning_count</code>, the first firing position should always be (x: radius, y: 0), and the second and subsequent bullets should be placed from there at equal intervals (angle difference) around the circumference of this circle. The bullets are shifted by the property <code>rotate_speed</code> in a clockwise direction every second specified by the property <code>interval</code>, and then fired.</p>
<br>
<p>Then edit the <code>_ready</code> method, which is called the first time the scene is loaded. In the <code>_ready</code> method, add the code for initialization necessary to generate the bullet hell. It should be easier to understand if you can visualize the above diagram.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Enemy.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _ready():
</span></span><span style="display:flex;"><span>	anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;spawn&#34;</span>)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	randomize()
</span></span><span style="display:flex;"><span>	sprite<span style="color:#f92672">.</span>frame <span style="color:#f92672">=</span> randi() <span style="color:#f92672">%</span> sprite<span style="color:#f92672">.</span>hframes
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">### Add all of the following ###</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Define step as the interval (angle difference) between bullets fired at once</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># step is 180° x 2 = 360° divided by the value of the property Spawning_count</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> step <span style="color:#f92672">=</span> PI <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">/</span> spawning_count
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Loop for the number of values in spawning_count</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># e.g) If spawning_count is 4, i will be filled with 0 ~ 3 in that order</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> spawning_count:
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Create a new Node2D node to be used as a marker of the bullet&#39;s firing position...</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># and define it as spawn_point</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> spawn_point <span style="color:#f92672">=</span> <span style="color:#a6e22e">Node2D</span><span style="color:#f92672">.</span>new()
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Define the firing position as pos</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Define pos as the position rotated by (step x i) from the base position (x: radius, y: 0)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> pos <span style="color:#f92672">=</span> <span style="color:#a6e22e">Vector2</span>(radius, <span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>rotated(step <span style="color:#f92672">*</span> i)
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Place spawn_point at the bullet&#39;s firing position</span>
</span></span><span style="display:flex;"><span>		spawn_point<span style="color:#f92672">.</span>position <span style="color:#f92672">=</span> pos
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Align the orientation of the spawn_point with..</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># the angle from the positive x-axis to the firing position</span>
</span></span><span style="display:flex;"><span>		spawn_point<span style="color:#f92672">.</span>rotation <span style="color:#f92672">=</span> pos<span style="color:#f92672">.</span>angle()
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Make spawn_point a child of the Rotater node (Node2D)...</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># that has been prepared in advance as a node for rotation</span>
</span></span><span style="display:flex;"><span>		rotater<span style="color:#f92672">.</span>add_child(spawn_point)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Set the wait_time property of the Timer node with the value of the interval property</span>
</span></span><span style="display:flex;"><span>	timer<span style="color:#f92672">.</span>wait_time <span style="color:#f92672">=</span> interval
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Wait until the animation of the AnimationPlayer node is finished</span>
</span></span><span style="display:flex;"><span>	yield(anim_player, <span style="color:#e6db74">&#34;animation_finished&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Start the timer of the Timer node</span>
</span></span><span style="display:flex;"><span>	timer<span style="color:#f92672">.</span>start()
</span></span></code></pre></div><br>
<p>Now, every time the &ldquo;Timer&rdquo; node times out, place an instance of the &ldquo;Bullet.tscn&rdquo; scene you created earlier at the same position as the child node of the &ldquo;Rotater&rdquo; node (the <code>spawn_point</code> in the above code), and the bullets should fly automatically. Now let&rsquo;s edit the <code>_on_Timer_timeout</code> method called by the &ldquo;timeout&rdquo; signal of the &ldquo;Timer&rdquo; node. Since the signal has already been connected in the preparation, replace <code>pass</code> in the method with the following content.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Enemy.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods called on the timeout signal of a Timer node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_Timer_timeout():
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Loop over the child nodes of the Rotater node</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> node2d <span style="color:#f92672">in</span> rotater<span style="color:#f92672">.</span>get_children():
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Instance of Bullet.tscn</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> bullet <span style="color:#f92672">=</span> bullet_scn<span style="color:#f92672">.</span>instance()
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># make Bullet instance node a child of its parent node (World node) rather than Enemy node</span>
</span></span><span style="display:flex;"><span>		get_parent()<span style="color:#f92672">.</span>add_child(bullet)
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># Make the Bullet instance position the same as the Rotater child node position</span>
</span></span><span style="display:flex;"><span>		bullet<span style="color:#f92672">.</span>position <span style="color:#f92672">=</span> node2d<span style="color:#f92672">.</span>global_position
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># set the direction of the Bullet instance to be the same as...</span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e"># the direction of the child node of Rotater</span>
</span></span><span style="display:flex;"><span>		bullet<span style="color:#f92672">.</span>rotation <span style="color:#f92672">=</span> node2d<span style="color:#f92672">.</span>global_rotation
</span></span></code></pre></div><br>
<p>The firing position still does not rotate, but for the time being, it should now fire the specified number of bullets at the specified time difference. Let&rsquo;s run the project.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img15.gif" alt="run project"  />
</p>
<br>
<p>Next, let&rsquo;s rotate the firing position of the bullets a bit to make it more like a bullet hell. This time, we will update the code in the <code>_physics_process</code> method a little. Please add the comment &ldquo;# Add&rdquo; in the following code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Enemy.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _physics_process(delta):
</span></span><span style="display:flex;"><span>	delta_count <span style="color:#f92672">+=</span> delta
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> delta_count <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">2</span>:
</span></span><span style="display:flex;"><span>		delta_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> get_parent()<span style="color:#f92672">.</span>has_node(<span style="color:#e6db74">&#34;Player&#34;</span>):
</span></span><span style="display:flex;"><span>			anim_player<span style="color:#f92672">.</span>stop()
</span></span><span style="display:flex;"><span>			anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;move&#34;</span>)
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">var</span> direction <span style="color:#f92672">=</span> global_position<span style="color:#f92672">.</span>direction_to(get_parent()<span style="color:#f92672">.</span>get_node(<span style="color:#e6db74">&#34;Player&#34;</span>)<span style="color:#f92672">.</span>global_position)
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">var</span> velocity <span style="color:#f92672">=</span> direction <span style="color:#f92672">*</span> enemy_speed
</span></span><span style="display:flex;"><span>			velocity <span style="color:#f92672">=</span> move_and_slide(velocity)
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: define next direction (angle) as new_rotation</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># new_rotation is the current rotation of the Rotater node + rotate_speed x the time of 1 frame</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> new_rotation <span style="color:#f92672">=</span> rotater<span style="color:#f92672">.</span>rotation <span style="color:#f92672">+</span> rotate_speed <span style="color:#f92672">*</span> delta
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: rotate the Rotater node by the remainder (angle) of new_rotation divided by 360</span>
</span></span><span style="display:flex;"><span>	rotater<span style="color:#f92672">.</span>rotate(fmod(new_rotation, <span style="color:#ae81ff">360</span>))
</span></span></code></pre></div><br>
<p>Now the bullet&rsquo;s firing position should rotate every <code>0.4</code> seconds as specified in the <code>interval</code> property. Let&rsquo;s run the project again to see if it behaves as expected.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img16.gif" alt="run project"  />
</p>
<br>
<h2 id="customizing-the-bullet-hell">Customizing the bullet hell<a hidden class="anchor" aria-hidden="true" href="#customizing-the-bullet-hell">#</a></h2>
<p>Properties defined in scripts can be easily edited in the inspector if the <code>export</code> keyword is added at the beginning. Let&rsquo;s change the values to create a different bullet hell than the previous one.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img17.png" alt="run project"  />
</p>
<br>
<ul>
<li>
<p>Sample 1</p>
<ul>
<li>Rotate Speed: 45</li>
<li>Interval: 0.5</li>
<li>Spawning Count: 10<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img18.gif" alt="run project"  />
</li>
</ul>
</li>
<li>
<p>Sample 2</p>
<ul>
<li>Rotate Speed: 10</li>
<li>Interval: 0.1</li>
<li>Spawning Count: 8<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img19.gif" alt="run project"  />
</li>
</ul>
</li>
</ul>
<br>
<p>Sample 2 has turned out to be a very devilish game. But what a thrilling and enjoyable experience.</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="adding-randomness">Adding randomness<a hidden class="anchor" aria-hidden="true" href="#adding-randomness">#</a></h1>
<p>At the preliminary stage, the appearance of the enemy character (sprite texture) is coded to be randomly determined from six different types. If the properties of the bullet hell are also randomly determined, it would be interesting because it is impossible to predict what kind of bullet hell will be unleashed each time. In fact, it is surprisingly easy to implement this script by just adding a few codes to the script described so far.</p>
<p>Now, open the &ldquo;Enemy.gd&rdquo; script in the Script Editor. First, define the upper and lower limits of each property to form the bullet hell that has already been prepared in a separate property. Let&rsquo;s update the lines commented &ldquo;# Add&rdquo; and &ldquo;# Change&rdquo; in the following code.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Enemy.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> radius <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> rotate_speed: <span style="color:#a6e22e">float</span> <span style="color:#75715e"># Change: only define type and leave value undefined</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> max_rotate_speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">80</span> <span style="color:#75715e"># Add</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> min_rotate_speed <span style="color:#f92672">=</span> <span style="color:#ae81ff">20</span> <span style="color:#75715e"># Add</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> interval: <span style="color:#a6e22e">float</span> <span style="color:#75715e"># Change: only define type and leave value undefined</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> max_interval <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.8</span> <span style="color:#75715e"># Add</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> min_interval <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span> <span style="color:#75715e"># Add</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> spawning_count: <span style="color:#a6e22e">int</span> <span style="color:#75715e"># Change: only define type and leave value undefined</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> max_spawning_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span> <span style="color:#75715e"># Add</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> min_spawning_count <span style="color:#f92672">=</span> <span style="color:#ae81ff">2</span> <span style="color:#75715e"># Add</span>
</span></span></code></pre></div><br>
<p>Next, edit the <code>_ready</code> method, as we need to apply random values to each property at the time the scene is loaded. Let&rsquo;s add the lines commented &ldquo;# Add&rdquo; in the code below.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _ready():
</span></span><span style="display:flex;"><span>	anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;spawn&#34;</span>)
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># enable random value generation</span>
</span></span><span style="display:flex;"><span>	randomize()
</span></span><span style="display:flex;"><span>	sprite<span style="color:#f92672">.</span>frame <span style="color:#f92672">=</span> randi() <span style="color:#f92672">%</span> sprite<span style="color:#f92672">.</span>hframes <span style="color:#75715e"># int, max: 5</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: assign a random fraction to rotate_speed with...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># min_rotate_speed as the lower limit and max_rotate_speed as the upper limit</span>
</span></span><span style="display:flex;"><span>	rotate_speed <span style="color:#f92672">=</span> rand_range(min_rotate_speed, max_rotate_speed)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: Assign a random fraction to interval with...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># min_interval as the lower limit and max_interval as the upper limit</span>
</span></span><span style="display:flex;"><span>	interval <span style="color:#f92672">=</span> rand_range(min_interval, max_interval)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: The upper limit is -1 from the specified value in the subsequent calculation...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># so it is adjusted by +1 first.</span>
</span></span><span style="display:flex;"><span>	max_spawning_count <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Add: Assign a random integer to spawning_count with...</span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># min_spawning_count as the lower limit and max_spawning_count as the upper limit</span>
</span></span><span style="display:flex;"><span>	spawning_count <span style="color:#f92672">=</span> randi() <span style="color:#f92672">%</span> max_spawning_count <span style="color:#f92672">+</span> min_spawning_count
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> step <span style="color:#f92672">=</span> PI <span style="color:#f92672">*</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">/</span> spawning_count
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> spawning_count:
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> spawn_point <span style="color:#f92672">=</span> <span style="color:#a6e22e">Node2D</span><span style="color:#f92672">.</span>new()
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> pos <span style="color:#f92672">=</span> <span style="color:#a6e22e">Vector2</span>(radius, <span style="color:#ae81ff">0</span>)<span style="color:#f92672">.</span>rotated(step <span style="color:#f92672">*</span> i)
</span></span><span style="display:flex;"><span>		spawn_point<span style="color:#f92672">.</span>position <span style="color:#f92672">=</span> pos
</span></span><span style="display:flex;"><span>		spawn_point<span style="color:#f92672">.</span>rotation <span style="color:#f92672">=</span> pos<span style="color:#f92672">.</span>angle()
</span></span><span style="display:flex;"><span>		rotater<span style="color:#f92672">.</span>add_child(spawn_point)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	timer<span style="color:#f92672">.</span>wait_time <span style="color:#f92672">=</span> interval
</span></span><span style="display:flex;"><span>	yield(anim_player, <span style="color:#e6db74">&#34;animation_finished&#34;</span>)
</span></span><span style="display:flex;"><span>	timer<span style="color:#f92672">.</span>start()
</span></span></code></pre></div><p>A few additional notes on the generation of random values.</p>
<p>First, <code>rand_range</code> returns a random float number with the first argument as the lower limit and the second argument as the upper limit. It is used for the properties <code>rotate_speed</code> and <code>interval</code> because these properties are defined as float types.</p>
<p>Next, <code>randi</code> is a method that returns a random integer, but since it takes no arguments, it is not possible to specify an upper or lower limit.</p>
<p>Therefore, we use the fact that the remainder when the returned value is divided by the upper limit is <strong>0 or more and less than (upper limit -1)</strong>. Since the maximum value is the specified upper limit -1, put a code <code>max_spawning_count += 1</code> one line earlier to add +1.</p>
<p>The symbol <strong>% (modulo)</strong> can be used to obtain the remainder obtained by dividing <strong>a</strong> by <strong>b</strong> using <strong>a % b</strong>. If we add <strong>c</strong> to that value as <strong>a % b + c</strong>, the result cannot be smaller than <strong>c</strong>. In other words, a random integer with upper and lower bounds can be expressed as <strong><code>randi() % upper bound + lower bound</code></strong>. Remember that the maximum value returned is the upper limit -1.</p>
<p>In this case, the <code>randomize</code> method was written first, but without it, the result will be the same every time, so if you use methods that return a random value, it is good to remember to write it at the beginning of the <code>_ready</code> method.</p>
<p>Finally, let&rsquo;s run the project to see if each monster that appears will have a different bullet hell.<br>
<img loading="lazy" src="/images/tutorials/gd0007_BulletHell/img20.gif" alt="run project"  />
</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>In this tutorial, we created a bullet hell for a top-down shooter. For a rotating bullet hell like this one, the following points will be important.</p>
<ul>
<li>Set the radius of the circle, the rotation speed of the firing position, the time difference of firing, and the number of simultaneously fired bullets with properties</li>
<li>Prepare a node for rotation.</li>
<li>Calculate the firing position based on the radius of the circle and the number of rounds fired simultaneously.</li>
<li>Add child nodes to the Rotater node to mark the firing position.</li>
<li>Set the timer time to the time difference of the firing.</li>
<li>In the physics process, always rotate the Rotater node according to the rotation speed</li>
<li>When the timer times out, an instance of the bullet is created at the location of the marker node.</li>
</ul>
<p>There might be better ways to implement this, and I hope that you will experiment with various methods and finally adopt the best one.</p>
<p>In addition, actual bullet shooters are not only rotating types like this one, but are also diverse, such as wave-shaped, fan-shaped, etc. If you are interested in this, please look into it.<br>
<br></p>
<hr>
<h1 id="links">Links<a hidden class="anchor" aria-hidden="true" href="#links">#</a></h1>
<ul>
<li><a href="https://docs.godotengine.org/en/stable/tutorials/math/matrices_and_transforms.html" target="_blank">Godot Docs: Matrices and transforms</a>
</li>
<li><a href="https://www.youtube.com/watch?v=Z2TaFnN7cdU&amp;t=477s" target="_blank">YouTube: How to Make a Bullet Hell Projectile Pattern Generator in Godot</a>
</li>
<li><a href="https://www.youtube.com/watch?v=NMNl9Ix6ng8" target="_blank">YouTube: How to Make a Bullet Hell Game in Godot [P1] - Basic Collisions</a>
</li>
</ul>
<br>
<p><strong>UPDATE</strong><br>
2022/05/25 Added keys control settings.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.peanuts-code.com/en/tags/godot/">Godot</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godotengine/">GodotEngine</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/gamedev/">GameDev</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/tutorials/">Tutorials</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/2d/">2D</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/top-down/">Top-down</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/shooter/">shooter</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/bullethell/">BulletHell</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://www.peanuts-code.com/en/tutorials/gd0008_homing_missiles/">
    <span class="title">« Prev Page</span>
    <br>
    <span>Homing missile made by Godot</span>
  </a>
  <a class="next" href="https://www.peanuts-code.com/en/tutorials/gd0006_guns_of_topdown_shooter/">
    <span class="title">Next Page »</span>
    <br>
    <span>Four types of guns for top-down shooting made by Godot</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on twitter"
        href="https://twitter.com/intent/tweet/?text=Bullet%20hell%20made%20by%20Godot&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f&amp;hashtags=Godot%2cGodotEngine%2cGodotEngine%2cGameDev%2cTutorials%2c2D%2cTop-down%2cshooter%2cBulletHell">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f&amp;title=Bullet%20hell%20made%20by%20Godot&amp;summary=Bullet%20hell%20made%20by%20Godot&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f&title=Bullet%20hell%20made%20by%20Godot">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on whatsapp"
        href="https://api.whatsapp.com/send?text=Bullet%20hell%20made%20by%20Godot%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Bullet hell made by Godot on telegram"
        href="https://telegram.me/share/url?text=Bullet%20hell%20made%20by%20Godot&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0007_bullethell%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.peanuts-code.com/en/">Peanuts Code</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
