<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ü§ñ 2D Grid Based Path Finding in Godot3 | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,Godot3,2D,GridBased,PathFinding,AStar"><meta name=description content="This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article 2D Path Finding in Godot3 . I hope you will choose the article that best suits the game you want to make. The final project file in this tutorial is located in the GitHub repository . After downloading and extracting the .zip file, you can import the &ldquo;project.godot&rdquo; file into the Godot Engine to see the project directly. Translated with www.DeepL.com/Translator (free version) Environment Godot version: 3.5 Computer OS:"><meta name=author content="Gobo"><link rel=canonical href=https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0017_2d_grid_based_path_finding/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="ü§ñ 2D Grid Based Path Finding in Godot3"><meta property="og:description" content="This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article 2D Path Finding in Godot3 . I hope you will choose the article that best suits the game you want to make. The final project file in this tutorial is located in the GitHub repository . After downloading and extracting the .zip file, you can import the &ldquo;project.godot&rdquo; file into the Godot Engine to see the project directly. Translated with www.DeepL.com/Translator (free version) Environment Godot version: 3.5 Computer OS:"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0017_2d_astar_path_finding/img14.gif"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2022-09-22T19:45:00+09:00"><meta property="article:modified_time" content="2022-09-22T19:45:00+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0017_2d_astar_path_finding/img14.gif"><meta name=twitter:title content="ü§ñ 2D Grid Based Path Finding in Godot3"><meta name=twitter:description content="This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article 2D Path Finding in Godot3 . I hope you will choose the article that best suits the game you want to make. The final project file in this tutorial is located in the GitHub repository . After downloading and extracting the .zip file, you can import the &ldquo;project.godot&rdquo; file into the Godot Engine to see the project directly. Translated with www.DeepL.com/Translator (free version) Environment Godot version: 3.5 Computer OS:"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ü§ñ Tutorials","item":"https://www.peanuts-code.com/en/tutorials/"},{"@type":"ListItem","position":2,"name":"ü§ñ 2D Grid Based Path Finding in Godot3","item":"https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ü§ñ 2D Grid Based Path Finding in Godot3","name":"ü§ñ 2D Grid Based Path Finding in Godot3","description":"This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article 2D Path Finding in Godot3 . I hope you will choose the article that best suits the game you want to make. The final project file in this tutorial is located in the GitHub repository . After downloading and extracting the .zip file, you can import the \u0026ldquo;project.godot\u0026rdquo; file into the Godot Engine to see the project directly. Translated with www.DeepL.com/Translator (free version) Environment Godot version: 3.5 Computer OS:","keywords":["GameDev","GodotEngine","Godot3","2D","GridBased","PathFinding","AStar"],"articleBody":"This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article 2D Path Finding in Godot3 . I hope you will choose the article that best suits the game you want to make.\nThe final project file in this tutorial is located in the GitHub repository . After downloading and extracting the .zip file, you can import the ‚Äúproject.godot‚Äù file into the Godot Engine to see the project directly.\nTranslated with www.DeepL.com/Translator (free version)\nEnvironment Godot version: 3.5\nComputer OS: macOS 11.6.5\nBasic Articles You may also find the following articles useful.\nDownloading Godot Project Manager of Godot About AStar In this article, we will implement grid-based routing using a search algorithm called AStar. It is useful when you want to automatically move objects along a grid from the current location to the destination. For example, this method is ideal for puzzle games where you move pieces on the board, or strategy simulation games where you move characters of both sides on the board to fight each other.\nWhat is AStar? AStar, also known as A*, is an algorithm that searches for the shortest path from the start point to the goal point while avoiding obstacles. In the case of Godot engine, you do not have to code the algorithm from scratch by using the AStar class. We will use it in this tutorial.\nWikipedia - A* Godot Docs - AStar2D Create a project First, create a new project. This time, name the project ‚Äú2D Grid Based Path Finding‚Äù.\nProject Settings The following settings are made in the ‚ÄúProject‚Äù menu \u003e ‚ÄúProject Settings‚Äù.\nGeneral\" tab Display \u003e Window Size section Width: 1024 Height: 576 Stretch section Mode: 2d Aspect: keep Input Map\" tab 1. add ‚Äúmove_to‚Äù action assign ‚Äúleft mouse button‚Äù to ‚Äúmove_to‚Äù action\nImport assets This time I used an asset pack called Board Game Icons from KENNEY‚Äôs site. I can‚Äôt help but be thankful for this wonderful free material.\nAfter downloading, drag and drop the following files from the ‚Äú/kenney_boardgameicons/PNG/Default (64px)‚Äù folder into the file system dock of the Godot editor to import them into your project.\ncharacter.png d3.png structure_wall.png Create the Game scene First, create the ‚ÄúGame‚Äù scene that will be the main part of the project. Select ‚ÄúNode2D‚Äù as the root node, add the necessary nodes to it, rename them, and create a scene tree as shown below.\nGame (Node2D) Board (TileMap) Obstacles (Node2D) *We will add a child node to this node later. Line (Line2D) Player (Sprite) AStarVisualizer (Control) Edit a node Board (TileMap) node To edit the ‚ÄúBoard‚Äù node as the board on which the player‚Äôs pieces move in the game:\nSelect the ‚ÄúBoard‚Äù node and apply the ‚ÄúNew TileSet‚Äù resource to the ‚ÄúTile Set‚Äù property in the inspector.\nClick on the ‚ÄúTileSet‚Äù applied in the inspector to open the Tile Set panel. Drag and drop the previously imported ‚Äúd3.png‚Äù from the file system dock to the sidebar of the TileSet panel to add it as a texture for the tileset. Select the added texture and add it as ‚ÄúNew Single Tile‚Äù specifying its ‚Äúarea‚Äù.\nIn the inspector, change the color of the tiles to the desired color using the ‚ÄúModulate‚Äù property.\nSelect the ‚ÄúBoard‚Äù node in the scene dock and create a tile map on the 2D workspace, paying attention to the following points Create a tile map within the window size of the game. The tiles to be placed should be used as movable areas for the player node. The tiles must be placed at the top-left grid coordinate (0, 0), because the player node will be placed there later.\nObstacles (Node2D) node The ‚ÄúObstacles‚Äù node is used as a container (parent node) for multiple obstacle nodes to be placed on the tile map. Therefore, this node itself does not need to be edited.\nCreate an Obstacle Scene Create a scene of an obstacle to be placed on the tile map. 1. Select ‚ÄúSprite‚Äù as the root node and rename it to ‚ÄúObstacle‚Äù.\nDrag and drop ‚Äústructure_wall.png‚Äù from the file system dock to the ‚ÄúTexture‚Äù property in the inspector and apply the resource.\nTurn off the ‚ÄúOffset‚Äù \u003e ‚ÄúCentered‚Äù property.\nChange the color with the ‚ÄúModulate‚Äù property. Change the color to a color that is easily visible when the Obstacle node is placed on top of the tiles of the ‚ÄúBoard (TileMap)‚Äù node prepared earlier.\nAdding Obstacle scene instances to the Obstacles node Return to the ‚ÄúGame‚Äù scene and add 10 instance nodes of the ‚ÄúObstacle‚Äù scene you created to the ‚ÄúObstacles‚Äù node and place them at appropriate locations on the tile map. However, be careful not to place them at the grid coordinates (0, 0), since the player‚Äôs pieces will be placed there.\nPlayer (Sprite) node This node is used as a player piece to be moved on the board by path finding using AStar.\nIn the Inspector, drag \u0026 drop ‚Äúcharacter.png‚Äù from the file system dock to the ‚ÄúTexture‚Äù property and apply the resource.\nTurn off the ‚ÄúOffset‚Äù \u003e ‚ÄúCentered‚Äù property.\nIn the 2D workspace, make sure the player is placed at the coordinates (0, 0), which is its initial position.\nControl by script Attach the script to the Board node Path finding by the AStar algorithm roughly follows the following flow.\nGet the position of a tile placed on the tile map. Add tile positions as AStar points. Connect each AStar point to the adjacent points on the top, bottom, left and right. Get the position of obstacles. Disable points on AStar corresponding to the position of an obstacles. Find paths in the line connecting the valid points of AStar. Attach the script to the ‚ÄúBoard‚Äù node and edit the code as follows:\nextends TileMap # Array to store the points of the path the Player will move var path: Array = []. # Array of cells where tiles are placed in Board(TileMap) var cells = get_used_cells() # Reference to the Obstacles node onready var obstacles = $Obstacles # An instance of the AStar2D class onready var astar = AStar2D.new() # Half the size of a cell in Board(TileMap) onready var half_cell_size = cell_size / 2 func _ready(): # Call the method to add points of AStar add_points() # Call a method to connect points of AStar connect_points() # Call a method to deactivate points of AStar # The argument is a method that returns the positions of the child nodes of the Obstacles node as an array disable_points(get_obstacles()) # Method to add points of AStar func add_points(): # Loop over the cells where tiles are placed on the tile map for cell in cells: # Generate cell IDs and add them as points of AStar astar.add_point(id(cell), cell) # Method to connect points of AStar func connect_points(): # Loop through the cells where tiles are placed on the tile map for cell in cells: # If the cell is in an AStar point if astar.has_point(id(cell)): # Create an array of direction vectors in the four adjacent directions var neighbors = [ Vector2.RIGHT, Vector2.LEFT, Vector2.DOWN, Vector2.UP ] # Loop processing for each direction vector for neighbor in neighbors: # Define neighbor cells var next_cell = cell + neighbor # If a tile is placed in a neighbor cell if cells.has(next_cell): # Connect the points on the original cell of AStar with the points on the neighbor cell astar.connect_points(id(cell), id(next_cell), false) # Method to return the positions of the child nodes of an Obstacles node as an array func get_obstacles() -\u003e Array: # An array containing the grid coordinates of the cell where the obstacle is located var obstacle_cells = []. # Loop over all child nodes of Obstacles (Obstacle instances) for child in obstacles.get_children(): # Add the grid coordinates of obstacles to the prepared array obstacle_cells.append(world_to_map(child.global_position)) # Return an array as a return value return obstacle_cells # Method to invalidate points of AStar # Pass an array whose elements are the grid coordinates of the cell as an argument func disable_points(target_cells): # Loop over the elements of the argument array (cell grid coordinates) for cell in target_cells: # disable the point of AStar corresponding to the cell astar.set_point_disabled(id(cell)) # Method to update the shortest path (array of points to pass) for the Player to move func update_path(start, end): # Find the shortest path from the starting point of the argument to the destination point in AStar path = astar.get_point_path(id(start), id(end)) # Method to generate ID from grid coordinates func id(point): var a = point.x var b = point.y return (a + b) * (a + b + 1) / 2 + b This will add AStar points to the coordinates of the cell where the tile is placed in the ‚ÄúBoard (TileMap)‚Äù node, and each point will be connected by a line. Furthermore, the points that correspond to the coordinates of the ‚ÄúObstacle‚Äù instance are deactivated, and the lines connecting them are also deactivated. The network of AStar finally formed in this way is used as a route.\nThe update_path() method will be called in the script of the ‚ÄúGame‚Äù node. When calling this method, pass the current position and the destination position of the ‚ÄúPlayer‚Äù node to the arguments start and end, respectively, and the Player node will move along the shortest path on the AStar network that has been formed.\nOf course, the positions of the ‚ÄúObstacle‚Äù instances is not connected to the line because the AStar points are disabled, so the Player node cannot move to the positions.\nIt may be difficult to visualize the AStar points and lines, so I will attach a script to ‚ÄúAStarVisualizer‚Äù to visualize them.\nAttach a script to the ‚ÄúAStarVisualizer (Control)‚Äù node To visualize AStar points and lines, attach a script to ‚ÄúAStarVisualizer‚Äù and edit the code as follows:\nextends Control onready var board: TileMap = get_parent().get_node(\"Board\") onready var astar: AStar2D = board.astar onready var offset: Vector2 = board.half_cell_size # Call the _draw() function when a node is loaded into the scene tree func _ready(): _draw() # Override built-in function _draw() to draw AStar points and lines on the screen func _draw(): # Loop over all points (IDs) in AStar for point in astar.get_points(): # Skip the next step if the point is deactivated if astar.is_point_disabled(point): print(\"astar point is disabled\") continue # Convert from AStar points (IDs) to grid coordinates var cell = astar.get_point_position(point) # Convert from grid coordinates to world coordinates var pos = board.map_to_world(cell) # Draw the world coordinate of the point of AStar shifted from the upper left corner of the cell to the center draw_circle(pos + offset, 4, Color.white) # Get all the points (IDs) connected to the acquired AStar point var point_connections = astar.get_point_connections(point) # Array to store all connected points as world coordinates var connected_positions = []. # Loop over connected points for connected_point in point_connections: # If connected points are deactivated, skip this step if astar.is_point_disabled(connected_point): print(\"connected point is disabled\") continue # Convert IDs of connected points to grid coordinates var connected_cell = astar.get_point_position(connected_point) # Convert grid coordinates to world coordinates var connected_pos = board.map_to_world(connected_cell) # Add world coordinates to array connected_positions.append(connected_pos) # Loop through the elements of the array of world coordinates of connected points for connected_pos in connected_positions: # Draw a line connecting the original point and the connected points draw_line(pos + offset, connected_pos + offset, Color.white, 2) With this script, the AStar points and lines are drawn on the screen and the AStar network can now be visualized. When you run the project, you should see the following.\nAttaching scripts to the Game node The last step is to code the ‚ÄúPlayer‚Äù node to move when the mouse is pressed.\nAfter attaching the script to the ‚ÄúGame‚Äù root node, edit the code as follows:\nextends Node2D # Referencing the Board node onready var board = $Board # Referencing the Line node onready var line = $Line # Referencing the Player node onready var player = $Player func _input(event): # If the left mouse button is clicked if event.is_action_pressed(\"move_to\"): # Get grid coordinates from mouse cursor world coordinates as destination var target_cell = board.world_to_map(get_global_mouse_position()) # Generate ID from the grid coordinates of the target cell var target_cell_id = board.id(target_cell) # If the ID is contained in a valid point for AStar if board.astar.has_point(target_cell_id): # Get the coordinates of the cell on the tile map from the Player's world coordinates var player_cell = board.world_to_map(player.global_position) # Update the path from Player's cell to the destination cell board.update_path(player_cell, target_cell) # Call a method to move the Player node move() # Method to move the Player's piece func move(): # Disable the input process so that no click operations are possible during the move set_process_input(false) # Draw the path of the Line node by looping through the grid coordinates of the path points for point in board.path: # Convert grid coordinates to world coordinates and add to path of Line node line.add_point(board.map_to_world(point) + board.half_cell_size) # Move Player node by looping through path in grid coordinates of the path points for point in board.path: # Convert the grid coordinates of the point to world coordinates and overwrite the position of the Player node with it player.global_position = board.map_to_world(point) # Wait 0.1 seconds yield(get_tree().create_timer(0.1), \"timeout\") # Clear the points in the path of the Line node when move is complete line.clear_points() # Enable input process set_process_input(true) With this script, the ‚ÄúPlayer‚Äù node can be moved by left mouse click. The AStar algorithm determines the shortest path from the grid coordinates where the ‚ÄúPlayer‚Äù node is located to the grid coordinates where the mouse cursor overlaps when left-clicked, and moves the ‚ÄúPlayer‚Äù node along that path.\nIf you run the project, you should see the following GIF image.\nConclusion In this article, I introduced a grid-based 2D path finding using the AStar algorithm. The project we have created should work equally well with different placement of tiles and obstacles.\nFinally, let me summarize the main points of this tutorial.\nGodot provides the AStar class, so we can use it. Convert world coordinates ‚áÑ grid coordinates ‚áÑ ID as appropriate. The sequence of path finding is as follows: Add a point of AStar. Connect adjacent points of AStar. Disable AStar points that overlap with obstacles.\n*Of course, you can also add only points excluding obstacles in step 1. Derive the shortest path between the current location and the destination location using the AStar algorithm. Also, you may be able to make an interesting game by adding the following arrangement.\nRandomly generate tiles and obstacles. Place and move multiple characters on the board, both friend and foe. In addition to the four directions of up, down, left, right, it is also possible to move diagonally. References The following resources were very helpful in preparing this article.\nYouTube - A* TileMap for Grid-Based PATHFINDING in Godot / HeartBeast YouTube - A* Path-Finding for Grid-Based Tilemap in Godot / AndOne YouTube - 2D Grid-Based Pathfinding (AStar) - Godot Tutorial / GamemakerPixel Godot Docs - AStar2D KENNEY - Board Game Icons Wikipedia - A* ","wordCount":"2510","inLanguage":"en","image":"https://www.peanuts-code.com/images/tutorials/gd0017_2d_astar_path_finding/img14.gif","datePublished":"2022-09-22T19:45:00+09:00","dateModified":"2022-09-22T19:45:00+09:00","author":{"@type":"Person","name":"Gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/en/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/en/ title=Home><span>Home</span></a></li><li><a href=https://www.peanuts-code.com/en/portfolio/ title="Published Games"><span>Published Games</span></a></li><li><a href=https://www.peanuts-code.com/en/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://www.peanuts-code.com/en/tutorials/ title=Tutorials><span>Tutorials</span></a></li><li><a href=https://www.peanuts-code.com/en/about/ title=About><span>About</span></a></li><li><a href=https://www.peanuts-code.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/en/>Home</a>&nbsp;¬ª&nbsp;<a href=https://www.peanuts-code.com/en/tutorials/>ü§ñ Tutorials</a></div><h1 class=post-title>ü§ñ 2D Grid Based Path Finding in Godot3</h1><div class=post-meta><span title='2022-09-22 19:45:00 +0900 +0900'>2022-09-22</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Gobo&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/ja/tutorials/gd0017_2d_grid_based_path_finding/>Ja</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0017_2d_astar_path_finding/img14.gif alt="2D Grid Based Path Finding in Godot3"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#about-astar aria-label="About AStar">About AStar</a><ul><li><a href=#what-is-astar aria-label="What is AStar?">What is AStar?</a></li></ul></li><li><a href=#create-a-project aria-label="Create a project">Create a project</a><ul><li><a href=#project-settings aria-label="Project Settings">Project Settings</a></li><li><a href=#import-assets aria-label="Import assets">Import assets</a></li></ul></li><li><a href=#create-the-game-scene aria-label="Create the Game scene">Create the Game scene</a></li><li><a href=#edit-a-node aria-label="Edit a node">Edit a node</a><ul><li><a href=#board-tilemap-node aria-label="Board (TileMap) node">Board (TileMap) node</a></li><li><a href=#obstacles-node2d-node aria-label="Obstacles (Node2D) node">Obstacles (Node2D) node</a><ul><li><a href=#create-an-obstacle-scene aria-label="Create an Obstacle Scene">Create an Obstacle Scene</a></li><li><a href=#adding-obstacle-scene-instances-to-the-obstacles-node aria-label="Adding Obstacle scene instances to the Obstacles node">Adding Obstacle scene instances to the Obstacles node</a></li></ul></li><li><a href=#player-sprite-node aria-label="Player (Sprite) node">Player (Sprite) node</a></li></ul></li><li><a href=#control-by-script aria-label="Control by script">Control by script</a><ul><li><a href=#attach-the-script-to-the-board-node aria-label="Attach the script to the Board node">Attach the script to the Board node</a></li><li><a href=#attach-a-script-to-the-astarvisualizer-control-node aria-label="Attach a script to the &amp;ldquo;AStarVisualizer (Control)&amp;rdquo; node">Attach a script to the &ldquo;AStarVisualizer (Control)&rdquo; node</a></li><li><a href=#attaching-scripts-to-the-game-node aria-label="Attaching scripts to the Game node">Attaching scripts to the Game node</a></li></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>This article is a tutorial on how to implement grid-based path finding in 2D games using the AStar algorithm. For 2D pathfinding that is not grid-based, please refer to the article <a href=https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/ title="2D Path Finding in Godot3">2D Path Finding in Godot3</a>
. I hope you will choose the article that best suits the game you want to make.</p><p>The final project file in this tutorial is located in the <a href=https://github.com/msnsk/2DGridBasedPathFInding.git target=_blank>GitHub repository</a>
. After downloading and extracting the .zip file, you can import the &ldquo;project.godot&rdquo; file into the Godot Engine to see the project directly.</p><p>Translated with <a href=https://www.DeepL.com/Translator target=_blank>www.DeepL.com/Translator</a>
(free version)</p><blockquote><p><strong><span style=color:salmon>Environment</span></strong><br><em>Godot version: <strong>3.5</strong></em><br><em>Computer OS: <strong>macOS 11.6.5</strong></em></p></blockquote><blockquote><p><strong><span style=color:salmon>Basic Articles</span></strong><br><em>You may also find the following articles useful.<br><a href=https://www.peanuts-code.com/en/tutorials/gd0001_download/>Downloading Godot</a><br><a href=https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/>Project Manager of Godot</a></em></p></blockquote><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=about-astar>About AStar<a hidden class=anchor aria-hidden=true href=#about-astar>#</a></h2><p>In this article, we will implement grid-based routing using a search algorithm called AStar. It is useful when you want to automatically move objects along a grid from the current location to the destination. For example, this method is ideal for puzzle games where you move pieces on the board, or strategy simulation games where you move characters of both sides on the board to fight each other.<br><br></p><h3 id=what-is-astar>What is AStar?<a hidden class=anchor aria-hidden=true href=#what-is-astar>#</a></h3><p>AStar, also known as A*, is an algorithm that searches for the shortest path from the start point to the goal point while avoiding obstacles. In the case of Godot engine, you do not have to code the algorithm from scratch by using the AStar class. We will use it in this tutorial.</p><p><a href=https://en.wikipedia.org/wiki/A*_search_algorithm target=_blank>Wikipedia - A*</a><br><a href=https://docs.godotengine.org/en/stable/classes/class_astar2d.html target=_blank>Godot Docs - AStar2D</a></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-a-project>Create a project<a hidden class=anchor aria-hidden=true href=#create-a-project>#</a></h2><p>First, create a new project. This time, name the project &ldquo;2D Grid Based Path Finding&rdquo;.<br><br></p><h3 id=project-settings>Project Settings<a hidden class=anchor aria-hidden=true href=#project-settings>#</a></h3><p>The following settings are made in the &ldquo;Project&rdquo; menu > &ldquo;Project Settings&rdquo;.</p><ul><li>General" tab<ul><li>Display > Window<ul><li>Size section<ul><li>Width: 1024</li><li>Height: 576</li></ul></li><li>Stretch section<ul><li>Mode: 2d</li><li>Aspect: keep</li></ul></li></ul></li></ul></li><li>Input Map" tab 1.<ol><li>add &ldquo;move_to&rdquo; action</li><li>assign &ldquo;left mouse button&rdquo; to &ldquo;move_to&rdquo; action<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img1.png alt="Inputmap - action - shake"></li></ol></li></ul><br><h3 id=import-assets>Import assets<a hidden class=anchor aria-hidden=true href=#import-assets>#</a></h3><p>This time I used an asset pack called <a href=https://www.kenney.nl/assets/board-game-icons target=_blank>Board Game Icons</a>
from KENNEY&rsquo;s site. I can&rsquo;t help but be thankful for this wonderful free material.</p><p>After downloading, drag and drop the following files from the &ldquo;/kenney_boardgameicons/PNG/Default (64px)&rdquo; folder into the file system dock of the Godot editor to import them into your project.</p><ul><li>character.png</li><li>d3.png</li><li>structure_wall.png</li></ul><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-the-game-scene>Create the Game scene<a hidden class=anchor aria-hidden=true href=#create-the-game-scene>#</a></h2><p>First, create the &ldquo;Game&rdquo; scene that will be the main part of the project. Select &ldquo;Node2D&rdquo; as the root node, add the necessary nodes to it, rename them, and create a scene tree as shown below.</p><ul><li>Game (Node2D)<ul><li>Board (TileMap)<ul><li>Obstacles (Node2D) *<em>We will add a child node to this node later.</em></li></ul></li><li>Line (Line2D)</li><li>Player (Sprite)</li><li>AStarVisualizer (Control)</li></ul></li></ul><p><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img1.1.png alt="Game scene tree"></p><hr><h2 id=edit-a-node>Edit a node<a hidden class=anchor aria-hidden=true href=#edit-a-node>#</a></h2><h3 id=board-tilemap-node>Board (TileMap) node<a hidden class=anchor aria-hidden=true href=#board-tilemap-node>#</a></h3><p>To edit the &ldquo;Board&rdquo; node as the board on which the player&rsquo;s pieces move in the game:</p><ol><li>Select the &ldquo;Board&rdquo; node and apply the &ldquo;New TileSet&rdquo; resource to the &ldquo;Tile Set&rdquo; property in the inspector.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img2.png alt="TileMap - add Tile Set resource to Tile Set property"></li><li>Click on the &ldquo;TileSet&rdquo; applied in the inspector to open the Tile Set panel.</li><li>Drag and drop the previously imported &ldquo;d3.png&rdquo; from the file system dock to the sidebar of the TileSet panel to add it as a texture for the tileset.</li><li>Select the added texture and add it as &ldquo;New Single Tile&rdquo; specifying its &ldquo;area&rdquo;.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img3.png alt="TileSet Pannel"></li><li>In the inspector, change the color of the tiles to the desired color using the &ldquo;Modulate&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img4.png alt="TileSet Pannel"></li><li>Select the &ldquo;Board&rdquo; node in the scene dock and create a tile map on the 2D workspace, paying attention to the following points<ul><li>Create a tile map within the window size of the game.</li><li>The tiles to be placed should be used as movable areas for the player node.</li><li>The tiles must be placed at the top-left grid coordinate (0, 0), because the player node will be placed there later.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img5.png alt="editting Board node"></li></ul></li></ol><br><h3 id=obstacles-node2d-node>Obstacles (Node2D) node<a hidden class=anchor aria-hidden=true href=#obstacles-node2d-node>#</a></h3><p>The &ldquo;Obstacles&rdquo; node is used as a container (parent node) for multiple obstacle nodes to be placed on the tile map. Therefore, this node itself does not need to be edited.<br><br></p><h4 id=create-an-obstacle-scene>Create an Obstacle Scene<a hidden class=anchor aria-hidden=true href=#create-an-obstacle-scene>#</a></h4><p>Create a scene of an obstacle to be placed on the tile map. 1. Select &ldquo;Sprite&rdquo; as the root node and rename it to &ldquo;Obstacle&rdquo;.</p><ol><li>Drag and drop &ldquo;structure_wall.png&rdquo; from the file system dock to the &ldquo;Texture&rdquo; property in the inspector and apply the resource.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img6.png alt="Obstacle - Texture"></li><li>Turn off the &ldquo;Offset&rdquo; > &ldquo;Centered&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img7.png alt="Obstacle - Offset - Centered"></li><li>Change the color with the &ldquo;Modulate&rdquo; property. Change the color to a color that is easily visible when the Obstacle node is placed on top of the tiles of the &ldquo;Board (TileMap)&rdquo; node prepared earlier.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img8.png alt="Obstacle - Modulate"></li></ol><br><h4 id=adding-obstacle-scene-instances-to-the-obstacles-node>Adding Obstacle scene instances to the Obstacles node<a hidden class=anchor aria-hidden=true href=#adding-obstacle-scene-instances-to-the-obstacles-node>#</a></h4><p>Return to the &ldquo;Game&rdquo; scene and add 10 instance nodes of the &ldquo;Obstacle&rdquo; scene you created to the &ldquo;Obstacles&rdquo; node and place them at appropriate locations on the tile map. However, be careful not to place them at the grid coordinates (0, 0), since the player&rsquo;s pieces will be placed there.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img9.png alt="Obstacles - 2D Workspace"></p><br><h3 id=player-sprite-node>Player (Sprite) node<a hidden class=anchor aria-hidden=true href=#player-sprite-node>#</a></h3><p>This node is used as a player piece to be moved on the board by path finding using AStar.</p><ol><li>In the Inspector, drag & drop &ldquo;character.png&rdquo; from the file system dock to the &ldquo;Texture&rdquo; property and apply the resource.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img10.png alt="Player - Texture"></li><li>Turn off the &ldquo;Offset&rdquo; > &ldquo;Centered&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img11.png alt="Player - Offset - Centered"></li><li>In the 2D workspace, make sure the player is placed at the coordinates (0, 0), which is its initial position.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img12.png alt="Player - 2D Workspace"></li></ol><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=control-by-script>Control by script<a hidden class=anchor aria-hidden=true href=#control-by-script>#</a></h2><h3 id=attach-the-script-to-the-board-node>Attach the script to the Board node<a hidden class=anchor aria-hidden=true href=#attach-the-script-to-the-board-node>#</a></h3><p>Path finding by the AStar algorithm roughly follows the following flow.</p><ol><li>Get the position of a tile placed on the tile map.</li><li>Add tile positions as AStar points.</li><li>Connect each AStar point to the adjacent points on the top, bottom, left and right.</li><li>Get the position of obstacles.</li><li>Disable points on AStar corresponding to the position of an obstacles.</li><li>Find paths in the line connecting the valid points of AStar.</li></ol><p>Attach the script to the &ldquo;Board&rdquo; node and edit the code as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>TileMap</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Array to store the points of the path the Player will move</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> path: <span style=color:#a6e22e>Array</span> <span style=color:#f92672>=</span> []<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Array of cells where tiles are placed in Board(TileMap)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> cells <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_used_cells</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to the Obstacles node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> obstacles <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Obstacles</span>
</span></span><span style=display:flex><span><span style=color:#75715e># An instance of the AStar2D class</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> astar <span style=color:#f92672>=</span> <span style=color:#a6e22e>AStar2D</span><span style=color:#f92672>.</span><span style=color:#a6e22e>new</span>()
</span></span><span style=display:flex><span><span style=color:#75715e># Half the size of a cell in Board(TileMap)</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> half_cell_size <span style=color:#f92672>=</span> cell_size <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Call the method to add points of AStar</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>add_points</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># Call a method to connect points of AStar</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>connect_points</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># Call a method to deactivate points of AStar</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># The argument is a method that returns the positions of the child nodes of the Obstacles node as an array</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>disable_points</span>(<span style=color:#a6e22e>get_obstacles</span>())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to add points of AStar</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>add_points</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop over the cells where tiles are placed on the tile map</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> cell <span style=color:#f92672>in</span> cells:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Generate cell IDs and add them as points of AStar</span>
</span></span><span style=display:flex><span>		astar<span style=color:#f92672>.</span><span style=color:#a6e22e>add_point</span>(<span style=color:#a6e22e>id</span>(cell), cell)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to connect points of AStar</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>connect_points</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop through the cells where tiles are placed on the tile map</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> cell <span style=color:#f92672>in</span> cells:
</span></span><span style=display:flex><span>        <span style=color:#75715e># If the cell is in an AStar point</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>has_point</span>(<span style=color:#a6e22e>id</span>(cell)):
</span></span><span style=display:flex><span>            <span style=color:#75715e># Create an array of direction vectors in the four adjacent directions</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>var</span> neighbors <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>Vector2</span><span style=color:#f92672>.</span>RIGHT,
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>Vector2</span><span style=color:#f92672>.</span>LEFT,
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>Vector2</span><span style=color:#f92672>.</span>DOWN,
</span></span><span style=display:flex><span>				<span style=color:#a6e22e>Vector2</span><span style=color:#f92672>.</span>UP
</span></span><span style=display:flex><span>			]
</span></span><span style=display:flex><span>            <span style=color:#75715e># Loop processing for each direction vector</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>for</span> neighbor <span style=color:#f92672>in</span> neighbors:
</span></span><span style=display:flex><span>                <span style=color:#75715e># Define neighbor cells</span>
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>var</span> next_cell <span style=color:#f92672>=</span> cell <span style=color:#f92672>+</span> neighbor
</span></span><span style=display:flex><span>                <span style=color:#75715e># If a tile is placed in a neighbor cell</span>
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>has</span>(next_cell):
</span></span><span style=display:flex><span>                    <span style=color:#75715e># Connect the points on the original cell of AStar with the points on the neighbor cell</span>
</span></span><span style=display:flex><span>					astar<span style=color:#f92672>.</span><span style=color:#a6e22e>connect_points</span>(<span style=color:#a6e22e>id</span>(cell), <span style=color:#a6e22e>id</span>(next_cell), <span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to return the positions of the child nodes of an Obstacles node as an array</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>get_obstacles</span>() <span style=color:#f92672>-&gt;</span> <span style=color:#a6e22e>Array</span>:
</span></span><span style=display:flex><span>    <span style=color:#75715e># An array containing the grid coordinates of the cell where the obstacle is located</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> obstacle_cells <span style=color:#f92672>=</span> []<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop over all child nodes of Obstacles (Obstacle instances)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> child <span style=color:#f92672>in</span> obstacles<span style=color:#f92672>.</span><span style=color:#a6e22e>get_children</span>():
</span></span><span style=display:flex><span>        <span style=color:#75715e># Add the grid coordinates of obstacles to the prepared array</span>
</span></span><span style=display:flex><span>		obstacle_cells<span style=color:#f92672>.</span><span style=color:#a6e22e>append</span>(<span style=color:#a6e22e>world_to_map</span>(child<span style=color:#f92672>.</span>global_position))
</span></span><span style=display:flex><span>    <span style=color:#75715e># Return an array as a return value</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> obstacle_cells
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to invalidate points of AStar</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Pass an array whose elements are the grid coordinates of the cell as an argument</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>disable_points</span>(target_cells):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop over the elements of the argument array (cell grid coordinates)</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> cell <span style=color:#f92672>in</span> target_cells:
</span></span><span style=display:flex><span>        <span style=color:#75715e># disable the point of AStar corresponding to the cell</span>
</span></span><span style=display:flex><span>		astar<span style=color:#f92672>.</span><span style=color:#a6e22e>set_point_disabled</span>(<span style=color:#a6e22e>id</span>(cell))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to update the shortest path (array of points to pass) for the Player to move</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>update_path</span>(start, end):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Find the shortest path from the starting point of the argument to the destination point in AStar</span>
</span></span><span style=display:flex><span>	path <span style=color:#f92672>=</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>get_point_path</span>(<span style=color:#a6e22e>id</span>(start), <span style=color:#a6e22e>id</span>(end))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to generate ID from grid coordinates</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>id</span>(point):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> a <span style=color:#f92672>=</span> point<span style=color:#f92672>.</span>x
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> b <span style=color:#f92672>=</span> point<span style=color:#f92672>.</span>y
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> (a <span style=color:#f92672>+</span> b) <span style=color:#f92672>*</span> (a <span style=color:#f92672>+</span> b <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>+</span> b
</span></span></code></pre></div><br><p>This will add AStar points to the coordinates of the cell where the tile is placed in the &ldquo;Board (TileMap)&rdquo; node, and each point will be connected by a line. Furthermore, the points that correspond to the coordinates of the &ldquo;Obstacle&rdquo; instance are deactivated, and the lines connecting them are also deactivated. The network of AStar finally formed in this way is used as a route.</p><p>The <code>update_path()</code> method will be called in the script of the &ldquo;Game&rdquo; node. When calling this method, pass the current position and the destination position of the &ldquo;Player&rdquo; node to the arguments <code>start</code> and <code>end</code>, respectively, and the Player node will move along the shortest path on the AStar network that has been formed.</p><p>Of course, the positions of the &ldquo;Obstacle&rdquo; instances is not connected to the line because the AStar points are disabled, so the Player node cannot move to the positions.</p><p>It may be difficult to visualize the AStar points and lines, so I will attach a script to &ldquo;AStarVisualizer&rdquo; to visualize them.<br><br></p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h3 id=attach-a-script-to-the-astarvisualizer-control-node>Attach a script to the &ldquo;AStarVisualizer (Control)&rdquo; node<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-astarvisualizer-control-node>#</a></h3><p>To visualize AStar points and lines, attach a script to &ldquo;AStarVisualizer&rdquo; and edit the code as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Control</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> board: <span style=color:#a6e22e>TileMap</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_parent</span>()<span style=color:#f92672>.</span><span style=color:#a6e22e>get_node</span>(<span style=color:#e6db74>&#34;Board&#34;</span>)
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> astar: <span style=color:#a6e22e>AStar2D</span> <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span>astar
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> offset: <span style=color:#a6e22e>Vector2</span> <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span>half_cell_size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Call the _draw() function when a node is loaded into the scene tree</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_draw</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Override built-in function _draw() to draw AStar points and lines on the screen</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_draw</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop over all points (IDs) in AStar</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> point <span style=color:#f92672>in</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>get_points</span>():
</span></span><span style=display:flex><span>        <span style=color:#75715e># Skip the next step if the point is deactivated</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>is_point_disabled</span>(point):
</span></span><span style=display:flex><span>			print(<span style=color:#e6db74>&#34;astar point is disabled&#34;</span>)
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>        <span style=color:#75715e># Convert from AStar points (IDs) to grid coordinates</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> cell <span style=color:#f92672>=</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>get_point_position</span>(point)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Convert from grid coordinates to world coordinates</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> pos <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>map_to_world</span>(cell)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Draw the world coordinate of the point of AStar shifted from the upper left corner of the cell to the center</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>draw_circle</span>(pos <span style=color:#f92672>+</span> offset, <span style=color:#ae81ff>4</span>, <span style=color:#a6e22e>Color</span><span style=color:#f92672>.</span>white)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get all the points (IDs) connected to the acquired AStar point</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> point_connections <span style=color:#f92672>=</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>get_point_connections</span>(point)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Array to store all connected points as world coordinates</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> connected_positions <span style=color:#f92672>=</span> []<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>        <span style=color:#75715e># Loop over connected points</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> connected_point <span style=color:#f92672>in</span> point_connections:
</span></span><span style=display:flex><span>            <span style=color:#75715e># If connected points are deactivated, skip this step</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>is_point_disabled</span>(connected_point):
</span></span><span style=display:flex><span>				print(<span style=color:#e6db74>&#34;connected point is disabled&#34;</span>)
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>            <span style=color:#75715e># Convert IDs of connected points to grid coordinates</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>var</span> connected_cell <span style=color:#f92672>=</span> astar<span style=color:#f92672>.</span><span style=color:#a6e22e>get_point_position</span>(connected_point)
</span></span><span style=display:flex><span>			<span style=color:#75715e># Convert grid coordinates to world coordinates</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>var</span> connected_pos <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>map_to_world</span>(connected_cell)
</span></span><span style=display:flex><span>            <span style=color:#75715e># Add world coordinates to array</span>
</span></span><span style=display:flex><span>			connected_positions<span style=color:#f92672>.</span><span style=color:#a6e22e>append</span>(connected_pos)
</span></span><span style=display:flex><span>		
</span></span><span style=display:flex><span>        <span style=color:#75715e># Loop through the elements of the array of world coordinates of connected points</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> connected_pos <span style=color:#f92672>in</span> connected_positions:
</span></span><span style=display:flex><span>            <span style=color:#75715e># Draw a line connecting the original point and the connected points</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>draw_line</span>(pos <span style=color:#f92672>+</span> offset, connected_pos <span style=color:#f92672>+</span> offset, <span style=color:#a6e22e>Color</span><span style=color:#f92672>.</span>white, <span style=color:#ae81ff>2</span>)
</span></span></code></pre></div><br><p>With this script, the AStar points and lines are drawn on the screen and the AStar network can now be visualized. When you run the project, you should see the following.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img13.png alt="run project"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h3 id=attaching-scripts-to-the-game-node>Attaching scripts to the Game node<a hidden class=anchor aria-hidden=true href=#attaching-scripts-to-the-game-node>#</a></h3><p>The last step is to code the &ldquo;Player&rdquo; node to move when the mouse is pressed.</p><p>After attaching the script to the &ldquo;Game&rdquo; root node, edit the code as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Referencing the Board node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> board <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Board</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Referencing the Line node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> line <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Line</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Referencing the Player node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Player</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_input</span>(event):
</span></span><span style=display:flex><span>    <span style=color:#75715e># If the left mouse button is clicked</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> event<span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;move_to&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get grid coordinates from mouse cursor world coordinates as destination</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> target_cell <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>world_to_map</span>(<span style=color:#a6e22e>get_global_mouse_position</span>())
</span></span><span style=display:flex><span>        <span style=color:#75715e># Generate ID from the grid coordinates of the target cell</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> target_cell_id <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>id</span>(target_cell)
</span></span><span style=display:flex><span>        <span style=color:#75715e># If the ID is contained in a valid point for AStar</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> board<span style=color:#f92672>.</span>astar<span style=color:#f92672>.</span><span style=color:#a6e22e>has_point</span>(target_cell_id):
</span></span><span style=display:flex><span>            <span style=color:#75715e># Get the coordinates of the cell on the tile map from the Player&#39;s world coordinates</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>var</span> player_cell <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>world_to_map</span>(player<span style=color:#f92672>.</span>global_position)
</span></span><span style=display:flex><span>            <span style=color:#75715e># Update the path from Player&#39;s cell to the destination cell</span>
</span></span><span style=display:flex><span>			board<span style=color:#f92672>.</span><span style=color:#a6e22e>update_path</span>(player_cell, target_cell)
</span></span><span style=display:flex><span>            <span style=color:#75715e># Call a method to move the Player node</span>
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>move</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to move the Player&#39;s piece</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>move</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Disable the input process so that no click operations are possible during the move</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>set_process_input</span>(<span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># Draw the path of the Line node by looping through the grid coordinates of the path points</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> point <span style=color:#f92672>in</span> board<span style=color:#f92672>.</span>path:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Convert grid coordinates to world coordinates and add to path of Line node</span>
</span></span><span style=display:flex><span>		line<span style=color:#f92672>.</span><span style=color:#a6e22e>add_point</span>(board<span style=color:#f92672>.</span><span style=color:#a6e22e>map_to_world</span>(point) <span style=color:#f92672>+</span> board<span style=color:#f92672>.</span>half_cell_size)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Move Player node by looping through path in grid coordinates of the path points</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> point <span style=color:#f92672>in</span> board<span style=color:#f92672>.</span>path:
</span></span><span style=display:flex><span>        <span style=color:#75715e># Convert the grid coordinates of the point to world coordinates and overwrite the position of the Player node with it</span>
</span></span><span style=display:flex><span>		player<span style=color:#f92672>.</span>global_position <span style=color:#f92672>=</span> board<span style=color:#f92672>.</span><span style=color:#a6e22e>map_to_world</span>(point)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Wait 0.1 seconds</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>yield</span>(<span style=color:#a6e22e>get_tree</span>()<span style=color:#f92672>.</span><span style=color:#a6e22e>create_timer</span>(<span style=color:#ae81ff>0.1</span>), <span style=color:#e6db74>&#34;timeout&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e># Clear the points in the path of the Line node when move is complete</span>
</span></span><span style=display:flex><span>	line<span style=color:#f92672>.</span><span style=color:#a6e22e>clear_points</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># Enable input process</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>set_process_input</span>(<span style=color:#66d9ef>true</span>)
</span></span></code></pre></div><p>With this script, the &ldquo;Player&rdquo; node can be moved by left mouse click. The AStar algorithm determines the shortest path from the grid coordinates where the &ldquo;Player&rdquo; node is located to the grid coordinates where the mouse cursor overlaps when left-clicked, and moves the &ldquo;Player&rdquo; node along that path.</p><p>If you run the project, you should see the following GIF image.<br><img loading=lazy src=/images/tutorials/gd0017_2d_astar_path_finding/img14.gif alt="run project"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In this article, I introduced a grid-based 2D path finding using the AStar algorithm. The project we have created should work equally well with different placement of tiles and obstacles.</p><p>Finally, let me summarize the main points of this tutorial.</p><ul><li>Godot provides the AStar class, so we can use it.</li><li>Convert world coordinates ‚áÑ grid coordinates ‚áÑ ID as appropriate.</li><li>The sequence of path finding is as follows:<ol><li>Add a point of AStar.</li><li>Connect adjacent points of AStar.</li><li>Disable AStar points that overlap with obstacles.<br>*Of course, you can also add only points excluding obstacles in step 1.</li><li>Derive the shortest path between the current location and the destination location using the AStar algorithm.</li></ol></li></ul><p>Also, you may be able to make an interesting game by adding the following arrangement.</p><ul><li>Randomly generate tiles and obstacles.</li><li>Place and move multiple characters on the board, both friend and foe.</li><li>In addition to the four directions of up, down, left, right, it is also possible to move diagonally.</li></ul><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>The following resources were very helpful in preparing this article.</p><ul><li><a href=https://youtu.be/EPkaQFyEGQg target=_blank>YouTube - A* TileMap for Grid-Based PATHFINDING in Godot / HeartBeast</a></li><li><a href=https://youtu.be/dVNH6mIDksQ target=_blank>YouTube - A* Path-Finding for Grid-Based Tilemap in Godot / AndOne</a></li><li><a href=https://youtu.be/VQqSlXPa6QY target=_blank>YouTube - 2D Grid-Based Pathfinding (AStar) - Godot Tutorial / GamemakerPixel</a></li><li><a href=https://docs.godotengine.org/en/stable/classes/class_astar2d.html target=_blank>Godot Docs - AStar2D</a></li><li><a href=https://www.kenney.nl/assets/board-game-icons target=_blank>KENNEY - Board Game Icons</a></li><li><a href=https://en.wikipedia.org/wiki/A*_search_algorithm target=_blank>Wikipedia - A*</a></li></ul><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on x" href="https://x.com/intent/tweet/?text=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2c2D%2cGridBased%2cPathFinding%2cAStar"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f&amp;title=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3&amp;summary=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f&title=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on telegram" href="https://telegram.me/share/url?text=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Grid Based Path Finding in Godot3 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%f0%9f%a4%96%202D%20Grid%20Based%20Path%20Finding%20in%20Godot3&u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0017_2d_grid_based_path_finding%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/en/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/en/tags/2d/>2D</a></li><li><a href=https://www.peanuts-code.com/en/tags/gridbased/>GridBased</a></li><li><a href=https://www.peanuts-code.com/en/tags/pathfinding/>PathFinding</a></li><li><a href=https://www.peanuts-code.com/en/tags/astar/>AStar</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/><span class=title>¬´ Prev</span><br><span>ü§ñ 2D Hit Detection for Melee Attacks in Godot3</span>
</a><a class=next href=https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/><span class=title>Next ¬ª</span><br><span>ü§ñ 2D Path Finding in Godot3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/en/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>