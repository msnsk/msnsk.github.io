<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>🤖 Switching Sound Resources by Script in Godot3 | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,Godot3,Sound,Resource,AudioStreamPlayer"><meta name=description content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you"><meta name=author content="gobo"><link rel=canonical href=https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0020_switching_sound_resources/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="🤖 Switching Sound Resources by Script in Godot3"><meta property="og:description" content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2022-10-19T19:45:00+09:00"><meta property="article:modified_time" content="2022-10-19T19:45:00+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png"><meta name=twitter:title content="🤖 Switching Sound Resources by Script in Godot3"><meta name=twitter:description content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"🤖 Tutorials","item":"https://www.peanuts-code.com/en/tutorials/"},{"@type":"ListItem","position":2,"name":"🤖 Switching Sound Resources by Script in Godot3","item":"https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"🤖 Switching Sound Resources by Script in Godot3","name":"🤖 Switching Sound Resources by Script in Godot3","description":"This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single \u0026ldquo;AudioStreamPlayer\u0026rdquo; node. Basically, only one sound resource can be set per \u0026ldquo;AudioStreamPlayer\u0026rdquo; node. In other words, you must add \u0026ldquo;AudioStreamPlayer\u0026rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you","keywords":["GameDev","GodotEngine","Godot3","Sound","Resource","AudioStreamPlayer"],"articleBody":"This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single “AudioStreamPlayer” node.\nBasically, only one sound resource can be set per “AudioStreamPlayer” node. In other words, you must add “AudioStreamPlayer” nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock.\nSo, if you have multiple sound resources that are never played simultaneously (e.g., multiple sound effects for different types of character attacks, multiple sound effects for different types of buttons on the UI, etc.), add only the minimum necessary “AudioStreamPlayer” node for each use to your scene. If you code a program that switches sound resources according to the situation, there will be no waste and the scene dock will look cleaner.\nIn this tutorial, we will prepare only one “AudioStreamPlayer” node and control the sound resources to be applied to it so that they can be switched and played from a script.\nEnvironment Godot version: 3.5.1\nComputer OS: macOS 12.6\nBasic Articles You may also find the following articles useful.\nDownloading Godot Project Manager of Godot3 Preparation Project Settings After starting a new project, go to the “Project” menu \u003e “Project Settings” and make the following settings.\nIn the “General” tab \u003e “Display” on the sidebar \u003e “Window” \u003e “Size” section, set the window size as follows\nImport Sound Resources Six .wav files (sound effects) are available in the following Dropbox shared folder.\nDropbox - 共有フォルダ Drag and drop the entire downloaded “audio” folder into the file system dock to add it to the project.\nCreate a scene Create the following scene tree. This time, the tree is the simplest ever.\nUI (Control) SoundLabel (Label) AudioStreamPlayer When the scene tree creation is complete, save the file as “UI.tscn”.\nEdit the nodes UI (Control) root node Expand the root node “Anchor” so that it is the same size as the screen. The reason for this is that we want to center the child node “SoundLabel” on the screen after this.\nSelect “Layout” \u003e “Full Rect” from the 2D workspace toolbar. The “Anchor” property will now be automatically adjusted and the 2D workspace will look like this\nSoundLabel (Label) node This node is used to display the path of the sound resource currently applied to the “Stream” property of the “AudioStreamPlayer” node. This allows you to see at a glance which resource file is currently being set and played when you run the project to check its operation.\nIn the inspector, temporarily put “no sound” in the “Text” property.\nChange the “Align” property to “Center”. This will center the “Text” string horizontally.\nChange the “Grow Direction” \u003e “Horizontal” property of the “Control” class to “Both”. Now, even if the number of characters in “Text” increases, it will always be displayed in the center of the screen because it will be enlarged in both left and right directions.\nSelect “Layout” \u003e “Center” from the 2D workspace toolbar.\nAudioStreamPlayer node This node is used to set a sound resource and play it back. Although the node is originally designed to allow only one sound resource to be set, for this tutorial, we will use this single node to switch between multiple sound resources. The control of this will be done later in a script, but for now, let’s set up the node.\nDrag and drop “res://auido/coin.wav” from the sound resource file imported from the file system dock to the “Stream” property of the inspector and apply it. This will be the default sound resource for now. Attach a script to the root node Now it is time to create a script to control the configuration and playback of sound resources. First, attach a new script to the root node “UI”. The file name of the script should be “UI.gd”. After attaching the script and opening the script editor, edit the code as follows:\n###UI.gd### extends Control # Array of preloaded sound resources const sounds = [ # default resource as 1st element preload(\"res://auido/coin.wav\"), preload(\"res://auido/heal.wav\"), preload(\"res://auido/hurt.wav\"), preload(\"res://auido/shoot1.wav\"), preload(\"res://auido/shoot2.wav\"), preload(\"res://auido/shoot3.wav\"), ] # Index (from 0 to 5) to specify the resource to be set to # AudioStreamPlayer among the elements of the array sounds var index: int = 0 # Reference to SoundLabel node onready var sound_label = $SoundLabel # Reference to AudioStreamPlayer node onready var player = $AudioStreamPlayer # Built-in function to run when node is loaded func _ready(): # Call a method to play sound (defined later) play_sound(). # Built-in process function (called every frame) func _process(_delta): # If the right arrow key is pressed if Input.is_action_just_pressed(\"ui_right\"): # If current index is less than last index of array sounds(5) # Add 1 to the current index if it is less than if index \u003c sounds.size() - 1: index += 1 # If current index is less than last index(5) in array sounds, # set index back to 0 else: index = 0 # Call a method to play a sound (defined later) play_sound() # If the left arrow key is pressed if Input.is_action_just_pressed(\"ui_left\"): # If current index is greater than 0 # Subtract 1 from current index if index \u003e 0: index -= 1 # If current index is 0 set the index to the same (5) # as the last index in the array sounds else: index = sounds.size() - 1 # Call a method to play sounds (defined later) play_sound() # If spacebar or enter key is pressed if Input.is_action_just_pressed(\"ui_accept\"): # Call a method to play sound (to be defined later) play_sound() # Method to play sound func play_sound(): # Get the element corresponding to the current index from the array sounds # Apply it to the Stream property of AudioStreamPlayer player.stream = sounds[index]. # Set the resource path of AudioStreamPlayer's Stream property # to SoundLabel's Text property. sound_label.text = player.stream.resource_path # Play the sound resource of AudioStreamPlayer's Stream property player.play() This completes the editing of the script.\nNote that this time I used preload so that sound resources are also loaded when the node is loaded. This may be a good way to avoid delay if the game has a lot of processing. On the other hand, if the game does not require much processing, you can use load to load the resource files just before playback.\nRunning check Finally, run the project or scene to check the operation.\nAs implemented so far, the following keyboard operations can be used to switch sound resources and play them back.\nRight arrow key: Switch to the next sound resource on the sounds array in the “UI.gd” script and play it. Left arrow key: Switch to the previous sound resource on the sounds array in the “UI.gd” script. Spacebar / Enter key: Play the currently set sound resource Your browser does not support the video tag. Conclusion This tutorial has shown you how to switch between multiple sound resources for playback in a single “AudioStreamPlayer” node. Let’s summarize the important points.\nA single “AudioStreamPlayer” node can switch between multiple sound resources. The above method is implemented to avoid the waste of adding multiple “AudioStreamPlayer” nodes with almost identical settings and to improve the visibility of the scene tree. Sound switching and playback is controlled by scripts. Of course, if programming is not your forte, adding as many “AudioStreamPlayer” nodes as the number of sound resources to the scene is perfectly acceptable. What we have introduced here is just one methodology, so please feel free to do as you wish, especially in the case of indie development.\nReferences Godot Docs - Audio streams Godot Docs - AudioStreamPlayer ","wordCount":"1305","inLanguage":"en","image":"https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png","datePublished":"2022-10-19T19:45:00+09:00","dateModified":"2022-10-19T19:45:00+09:00","author":{"@type":"Person","name":"gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/en/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/en/ title=Home><span>Home</span></a></li><li><a href=https://www.peanuts-code.com/en/portfolio/ title="Published Games"><span>Published Games</span></a></li><li><a href=https://www.peanuts-code.com/en/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://www.peanuts-code.com/en/tutorials/ title=Tutorials><span>Tutorials</span></a></li><li><a href=https://www.peanuts-code.com/en/about/ title=About><span>About</span></a></li><li><a href=https://www.peanuts-code.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/en/>Home</a>&nbsp;»&nbsp;<a href=https://www.peanuts-code.com/en/tutorials/>🤖 Tutorials</a></div><h1 class=post-title>🤖 Switching Sound Resources by Script in Godot3</h1><div class=post-meta><span title='2022-10-19 19:45:00 +0900 +0900'>2022-10-19</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;1305 words&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/ja/tutorials/gd0020_switching_sound_resources/>Ja</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png alt="Switching Sound Resources by Script in Godot3"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#preparation aria-label=Preparation>Preparation</a><ul><li><a href=#project-settings aria-label="Project Settings">Project Settings</a></li><li><a href=#import-sound-resources aria-label="Import Sound Resources">Import Sound Resources</a></li></ul></li><li><a href=#create-a-scene aria-label="Create a scene">Create a scene</a></li><li><a href=#edit-the-nodes aria-label="Edit the nodes">Edit the nodes</a><ul><li><a href=#ui-control-root-node aria-label="UI (Control) root node">UI (Control) root node</a></li><li><a href=#soundlabel-label-node aria-label="SoundLabel (Label) node">SoundLabel (Label) node</a></li><li><a href=#audiostreamplayer-node aria-label="AudioStreamPlayer node">AudioStreamPlayer node</a></li></ul></li><li><a href=#attach-a-script-to-the-root-node aria-label="Attach a script to the root node">Attach a script to the root node</a></li><li><a href=#running-check aria-label="Running check">Running check</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node.</p><p>Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img0.png alt="project settings - window size"></p><p>So, if you have multiple sound resources that are never played simultaneously (e.g., multiple sound effects for different types of character attacks, multiple sound effects for different types of buttons on the UI, etc.), add only the minimum necessary &ldquo;AudioStreamPlayer&rdquo; node for each use to your scene. If you code a program that switches sound resources according to the situation, there will be no waste and the scene dock will look cleaner.</p><p>In this tutorial, we will prepare only one &ldquo;AudioStreamPlayer&rdquo; node and control the sound resources to be applied to it so that they can be switched and played from a script.</p><blockquote><p><strong><span style=color:salmon>Environment</span></strong><br><em>Godot version: <strong>3.5.1</strong></em><br><em>Computer OS: <strong>macOS 12.6</strong></em></p></blockquote><blockquote><p><strong><span style=color:salmon>Basic Articles</span></strong><br><em>You may also find the following articles useful.<br><a href=https://www.peanuts-code.com/en/tutorials/gd0001_download/>Downloading Godot</a><br><a href=https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/>Project Manager of Godot3</a></em></p></blockquote><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=preparation>Preparation<a hidden class=anchor aria-hidden=true href=#preparation>#</a></h2><h3 id=project-settings>Project Settings<a hidden class=anchor aria-hidden=true href=#project-settings>#</a></h3><p>After starting a new project, go to the &ldquo;Project&rdquo; menu > &ldquo;Project Settings&rdquo; and make the following settings.</p><ul><li>In the &ldquo;General&rdquo; tab > &ldquo;Display&rdquo; on the sidebar > &ldquo;Window&rdquo; > &ldquo;Size&rdquo; section, set the window size as follows<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img1.png alt="project settings - window size"></li></ul><br><h3 id=import-sound-resources>Import Sound Resources<a hidden class=anchor aria-hidden=true href=#import-sound-resources>#</a></h3><p>Six .wav files (sound effects) are available in the following Dropbox shared folder.</p><blockquote><p><em><a href="https://www.dropbox.com/s/9vizybn81r4xtt8/auido.zip?dl=0" target=_blank>Dropbox - 共有フォルダ</a></em></p></blockquote><p>Drag and drop the entire downloaded &ldquo;audio&rdquo; folder into the file system dock to add it to the project.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img1.1.png alt="sound resources - add to the file system"></p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-a-scene>Create a scene<a hidden class=anchor aria-hidden=true href=#create-a-scene>#</a></h2><p>Create the following scene tree. This time, the tree is the simplest ever.</p><ul><li>UI (Control)<ul><li>SoundLabel (Label)</li><li>AudioStreamPlayer</li></ul></li></ul><p><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img2.png alt="Scene tree"></p><p>When the scene tree creation is complete, save the file as &ldquo;UI.tscn&rdquo;.</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=edit-the-nodes>Edit the nodes<a hidden class=anchor aria-hidden=true href=#edit-the-nodes>#</a></h2><h3 id=ui-control-root-node>UI (Control) root node<a hidden class=anchor aria-hidden=true href=#ui-control-root-node>#</a></h3><p>Expand the root node &ldquo;Anchor&rdquo; so that it is the same size as the screen. The reason for this is that we want to center the child node &ldquo;SoundLabel&rdquo; on the screen after this.</p><ul><li>Select &ldquo;Layout&rdquo; > &ldquo;Full Rect&rdquo; from the 2D workspace toolbar. The &ldquo;Anchor&rdquo; property will now be automatically adjusted and the 2D workspace will look like this<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img3.png alt="UI node - Layout - Full Rect"></li></ul><br><h3 id=soundlabel-label-node>SoundLabel (Label) node<a hidden class=anchor aria-hidden=true href=#soundlabel-label-node>#</a></h3><p>This node is used to display the path of the sound resource currently applied to the &ldquo;Stream&rdquo; property of the &ldquo;AudioStreamPlayer&rdquo; node. This allows you to see at a glance which resource file is currently being set and played when you run the project to check its operation.</p><ul><li>In the inspector, temporarily put &ldquo;no sound&rdquo; in the &ldquo;Text&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img4.png alt="SoundLabel node - Text"></li><li>Change the &ldquo;Align&rdquo; property to &ldquo;Center&rdquo;. This will center the &ldquo;Text&rdquo; string horizontally.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img5.png alt="SoundLabel node - Align"></li><li>Change the &ldquo;Grow Direction&rdquo; > &ldquo;Horizontal&rdquo; property of the &ldquo;Control&rdquo; class to &ldquo;Both&rdquo;. Now, even if the number of characters in &ldquo;Text&rdquo; increases, it will always be displayed in the center of the screen because it will be enlarged in both left and right directions.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img6.png alt="SoundLabel node - Grow Direction - Horizontal"></li><li>Select &ldquo;Layout&rdquo; > &ldquo;Center&rdquo; from the 2D workspace toolbar.<br><img loading=lazy src=/images/tutorials/gd0020_switching_sound_resources/img7.png alt="SoundLabel node - Layout - Center"></li></ul><br><h3 id=audiostreamplayer-node>AudioStreamPlayer node<a hidden class=anchor aria-hidden=true href=#audiostreamplayer-node>#</a></h3><p>This node is used to set a sound resource and play it back. Although the node is originally designed to allow only one sound resource to be set, for this tutorial, we will use this single node to switch between multiple sound resources. The control of this will be done later in a script, but for now, let&rsquo;s set up the node.</p><ul><li>Drag and drop &ldquo;res://auido/coin.wav&rdquo; from the sound resource file imported from the file system dock to the &ldquo;Stream&rdquo; property of the inspector and apply it. This will be the default sound resource for now.</li></ul><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=attach-a-script-to-the-root-node>Attach a script to the root node<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-root-node>#</a></h2><p>Now it is time to create a script to control the configuration and playback of sound resources. First, attach a new script to the root node &ldquo;UI&rdquo;. The file name of the script should be &ldquo;UI.gd&rdquo;. After attaching the script and opening the script editor, edit the code as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###UI.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Control</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Array of preloaded sound resources</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> sounds <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#75715e># default resource as 1st element</span>
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/coin.wav&#34;</span>),
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/heal.wav&#34;</span>),
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/hurt.wav&#34;</span>),
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/shoot1.wav&#34;</span>),
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/shoot2.wav&#34;</span>),
</span></span><span style=display:flex><span>	preload(<span style=color:#e6db74>&#34;res://auido/shoot3.wav&#34;</span>),
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Index (from 0 to 5) to specify the resource to be set to</span>
</span></span><span style=display:flex><span><span style=color:#75715e># AudioStreamPlayer among the elements of the array sounds</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> index: <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to SoundLabel node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> sound_label <span style=color:#f92672>=</span> <span style=color:#a6e22e>$SoundLabel</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to AudioStreamPlayer node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$AudioStreamPlayer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in function to run when node is loaded</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Call a method to play sound (defined later)</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>play_sound</span>()<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in process function (called every frame)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_process</span>(_delta):
</span></span><span style=display:flex><span>    <span style=color:#75715e># If the right arrow key is pressed</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_just_pressed</span>(<span style=color:#e6db74>&#34;ui_right&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># If current index is less than last index of array sounds(5)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Add 1 to the current index if it is less than</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> index <span style=color:#f92672>&lt;</span> sounds<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span>() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>			index <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If current index is less than last index(5) in array sounds,</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># set index back to 0</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			index <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Call a method to play a sound (defined later)</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>play_sound</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># If the left arrow key is pressed</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_just_pressed</span>(<span style=color:#e6db74>&#34;ui_left&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># If current index is greater than 0</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Subtract 1 from current index</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> index <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>			index <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># If current index is 0 set the index to the same (5)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>#  as the last index in the array sounds</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			index <span style=color:#f92672>=</span> sounds<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span>() <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Call a method to play sounds (defined later)</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>play_sound</span>()
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># If spacebar or enter key is pressed</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_just_pressed</span>(<span style=color:#e6db74>&#34;ui_accept&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># Call a method to play sound (to be defined later)</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>play_sound</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to play sound</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>play_sound</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Get the element corresponding to the current index from the array sounds</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Apply it to the Stream property of AudioStreamPlayer</span>
</span></span><span style=display:flex><span>	player<span style=color:#f92672>.</span>stream <span style=color:#f92672>=</span> sounds[index]<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Set the resource path of AudioStreamPlayer&#39;s Stream property</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># to SoundLabel&#39;s Text property.</span>
</span></span><span style=display:flex><span>	sound_label<span style=color:#f92672>.</span>text <span style=color:#f92672>=</span> player<span style=color:#f92672>.</span>stream<span style=color:#f92672>.</span>resource_path
</span></span><span style=display:flex><span>    <span style=color:#75715e># Play the sound resource of AudioStreamPlayer&#39;s Stream property</span>
</span></span><span style=display:flex><span>	player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>()
</span></span></code></pre></div><br><p>This completes the editing of the script.</p><p>Note that this time I used <code>preload</code> so that sound resources are also loaded when the node is loaded. This may be a good way to avoid delay if the game has a lot of processing. On the other hand, if the game does not require much processing, you can use <code>load</code> to load the resource files just before playback.</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=running-check>Running check<a hidden class=anchor aria-hidden=true href=#running-check>#</a></h2><p>Finally, run the project or scene to check the operation.</p><p>As implemented so far, the following keyboard operations can be used to switch sound resources and play them back.</p><ul><li>Right arrow key: Switch to the next sound resource on the <code>sounds</code> array in the &ldquo;UI.gd&rdquo; script and play it.</li><li>Left arrow key: Switch to the previous sound resource on the <code>sounds</code> array in the &ldquo;UI.gd&rdquo; script.</li><li>Spacebar / Enter key: Play the currently set sound resource</li></ul><div><video controls autoplay loop muted playsinline aria-label='run the project' style=zgotmplz>
<source src=/images/tutorials/gd0020_switching_sound_resources/img8.mp4 type=video/mp4>Your browser does not support the video tag.</video></div><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>This tutorial has shown you how to switch between multiple sound resources for playback in a single &ldquo;AudioStreamPlayer&rdquo; node. Let&rsquo;s summarize the important points.</p><ul><li>A single &ldquo;AudioStreamPlayer&rdquo; node can switch between multiple sound resources.</li><li>The above method is implemented to avoid the waste of adding multiple &ldquo;AudioStreamPlayer&rdquo; nodes with almost identical settings and to improve the visibility of the scene tree.</li><li>Sound switching and playback is controlled by scripts.</li></ul><p>Of course, if programming is not your forte, adding as many &ldquo;AudioStreamPlayer&rdquo; nodes as the number of sound resources to the scene is perfectly acceptable. What we have introduced here is just one methodology, so please feel free to do as you wish, especially in the case of indie development.</p><br><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://docs.godotengine.org/en/stable/tutorials/audio/audio_streams.html target=_blank>Godot Docs - Audio streams</a></li><li><a href=https://docs.godotengine.org/en/stable/classes/class_audiostreamplayer.html target=_blank>Godot Docs - AudioStreamPlayer</a></li></ul><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class=post-footer><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Switching Sound Resources by Script in Godot3 on x" href="https://x.com/intent/tweet/?text=%f0%9f%a4%96%20Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2cSound%2cResource%2cAudioStreamPlayer"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 🤖 Switching Sound Resources by Script in Godot3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/en/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/en/tags/sound/>Sound</a></li><li><a href=https://www.peanuts-code.com/en/tags/resource/>Resource</a></li><li><a href=https://www.peanuts-code.com/en/tags/audiostreamplayer/>AudioStreamPlayer</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/en/tutorials/gd0021_game_center_plugin/><span class=title>« Prev</span><br><span>🤖 Adding a Game Center Plugin to Your Project</span>
</a><a class=next href=https://www.peanuts-code.com/en/tutorials/gd0019_2d_animation_state_machine/><span class=title>Next »</span><br><span>🤖 Animation State Machine in Godot3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/en/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>