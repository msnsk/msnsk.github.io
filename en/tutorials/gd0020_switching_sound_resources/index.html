<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Switching Sound Resources by Script in Godot3 | Peanuts Code</title>
<meta name="keywords" content="GameDev, GodotEngine, Godot3, Sound, Resource, AudioStreamPlayer" />
<meta name="description" content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you">
<meta name="author" content="Gobo">
<link rel="canonical" href="https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<link rel="preload" href="/images/logomark.png" as="image">
<link rel="icon" href="https://www.peanuts-code.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.peanuts-code.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.peanuts-code.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.peanuts-code.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.peanuts-code.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.107.0">
<link rel="alternate" hreflang="ja" href="https://www.peanuts-code.com/ja/tutorials/gd0020_switching_sound_resources/" />
<link rel="alternate" hreflang="en" href="https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-DK0NK2RTTW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-DK0NK2RTTW', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Switching Sound Resources by Script in Godot3" />
<meta property="og:description" content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/" />
<meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png" /><meta property="article:section" content="tutorials" />
<meta property="article:published_time" content="2022-10-19T19:45:00&#43;09:00" />
<meta property="article:modified_time" content="2022-10-19T19:45:00&#43;09:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png" />
<meta name="twitter:title" content="Switching Sound Resources by Script in Godot3"/>
<meta name="twitter:description" content="This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node. Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Tutorials",
      "item": "https://www.peanuts-code.com/en/tutorials/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Switching Sound Resources by Script in Godot3",
      "item": "https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Switching Sound Resources by Script in Godot3",
  "name": "Switching Sound Resources by Script in Godot3",
  "description": "This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single \u0026ldquo;AudioStreamPlayer\u0026rdquo; node. Basically, only one sound resource can be set per \u0026ldquo;AudioStreamPlayer\u0026rdquo; node. In other words, you must add \u0026ldquo;AudioStreamPlayer\u0026rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock. So, if you",
  "keywords": [
    "GameDev", "GodotEngine", "Godot3", "Sound", "Resource", "AudioStreamPlayer"
  ],
  "articleBody": "This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single “AudioStreamPlayer” node.\nBasically, only one sound resource can be set per “AudioStreamPlayer” node. In other words, you must add “AudioStreamPlayer” nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock.\nSo, if you have multiple sound resources that are never played simultaneously (e.g., multiple sound effects for different types of character attacks, multiple sound effects for different types of buttons on the UI, etc.), add only the minimum necessary “AudioStreamPlayer” node for each use to your scene. If you code a program that switches sound resources according to the situation, there will be no waste and the scene dock will look cleaner.\nIn this tutorial, we will prepare only one “AudioStreamPlayer” node and control the sound resources to be applied to it so that they can be switched and played from a script.\nEnvironment Godot version: 3.5.1\nComputer OS: macOS 12.6\nBasic Articles You may also find the following articles useful.\nDownloading Godot Project Manager of Godot3 Preparation Project Settings After starting a new project, go to the “Project” menu \u003e “Project Settings” and make the following settings.\nIn the “General” tab \u003e “Display” on the sidebar \u003e “Window” \u003e “Size” section, set the window size as follows\nImport Sound Resources Six .wav files (sound effects) are available in the following Dropbox shared folder.\nDropbox - 共有フォルダ Drag and drop the entire downloaded “audio” folder into the file system dock to add it to the project.\nCreate a scene Create the following scene tree. This time, the tree is the simplest ever.\nUI (Control) SoundLabel (Label) AudioStreamPlayer When the scene tree creation is complete, save the file as “UI.tscn”.\nEdit the nodes UI (Control) root node Expand the root node “Anchor” so that it is the same size as the screen. The reason for this is that we want to center the child node “SoundLabel” on the screen after this.\nSelect “Layout” \u003e “Full Rect” from the 2D workspace toolbar. The “Anchor” property will now be automatically adjusted and the 2D workspace will look like this\nSoundLabel (Label) node This node is used to display the path of the sound resource currently applied to the “Stream” property of the “AudioStreamPlayer” node. This allows you to see at a glance which resource file is currently being set and played when you run the project to check its operation.\nIn the inspector, temporarily put “no sound” in the “Text” property.\nChange the “Align” property to “Center”. This will center the “Text” string horizontally.\nChange the “Grow Direction” \u003e “Horizontal” property of the “Control” class to “Both”. Now, even if the number of characters in “Text” increases, it will always be displayed in the center of the screen because it will be enlarged in both left and right directions.\nSelect “Layout” \u003e “Center” from the 2D workspace toolbar.\nAudioStreamPlayer node This node is used to set a sound resource and play it back. Although the node is originally designed to allow only one sound resource to be set, for this tutorial, we will use this single node to switch between multiple sound resources. The control of this will be done later in a script, but for now, let’s set up the node.\nDrag and drop “res://auido/coin.wav” from the sound resource file imported from the file system dock to the “Stream” property of the inspector and apply it. This will be the default sound resource for now. Attach a script to the root node Now it is time to create a script to control the configuration and playback of sound resources. First, attach a new script to the root node “UI”. The file name of the script should be “UI.gd”. After attaching the script and opening the script editor, edit the code as follows:\n###UI.gd### extends Control # Array of preloaded sound resources const sounds = [ # default resource as 1st element preload(\"res://auido/coin.wav\"), preload(\"res://auido/heal.wav\"), preload(\"res://auido/hurt.wav\"), preload(\"res://auido/shoot1.wav\"), preload(\"res://auido/shoot2.wav\"), preload(\"res://auido/shoot3.wav\"), ] # Index (from 0 to 5) to specify the resource to be set to # AudioStreamPlayer among the elements of the array sounds var index: int = 0 # Reference to SoundLabel node onready var sound_label = $SoundLabel # Reference to AudioStreamPlayer node onready var player = $AudioStreamPlayer # Built-in function to run when node is loaded func _ready(): # Call a method to play sound (defined later) play_sound(). # Built-in process function (called every frame) func _process(_delta): # If the right arrow key is pressed if Input.is_action_just_pressed(\"ui_right\"): # If current index is less than last index of array sounds(5) # Add 1 to the current index if it is less than if index \u003c sounds.size() - 1: index += 1 # If current index is less than last index(5) in array sounds, # set index back to 0 else: index = 0 # Call a method to play a sound (defined later) play_sound() # If the left arrow key is pressed if Input.is_action_just_pressed(\"ui_left\"): # If current index is greater than 0 # Subtract 1 from current index if index \u003e 0: index -= 1 # If current index is 0 set the index to the same (5) # as the last index in the array sounds else: index = sounds.size() - 1 # Call a method to play sounds (defined later) play_sound() # If spacebar or enter key is pressed if Input.is_action_just_pressed(\"ui_accept\"): # Call a method to play sound (to be defined later) play_sound() # Method to play sound func play_sound(): # Get the element corresponding to the current index from the array sounds # Apply it to the Stream property of AudioStreamPlayer player.stream = sounds[index]. # Set the resource path of AudioStreamPlayer's Stream property # to SoundLabel's Text property. sound_label.text = player.stream.resource_path # Play the sound resource of AudioStreamPlayer's Stream property player.play() This completes the editing of the script.\nNote that this time I used preload so that sound resources are also loaded when the node is loaded. This may be a good way to avoid delay if the game has a lot of processing. On the other hand, if the game does not require much processing, you can use load to load the resource files just before playback.\nRunning check Finally, run the project or scene to check the operation.\nAs implemented so far, the following keyboard operations can be used to switch sound resources and play them back.\nRight arrow key: Switch to the next sound resource on the sounds array in the “UI.gd” script and play it. Left arrow key: Switch to the previous sound resource on the sounds array in the “UI.gd” script. Spacebar / Enter key: Play the currently set sound resource Your browser does not support the video tag. Conclusion This tutorial has shown you how to switch between multiple sound resources for playback in a single “AudioStreamPlayer” node. Let’s summarize the important points.\nA single “AudioStreamPlayer” node can switch between multiple sound resources. The above method is implemented to avoid the waste of adding multiple “AudioStreamPlayer” nodes with almost identical settings and to improve the visibility of the scene tree. Sound switching and playback is controlled by scripts. Of course, if programming is not your forte, adding as many “AudioStreamPlayer” nodes as the number of sound resources to the scene is perfectly acceptable. What we have introduced here is just one methodology, so please feel free to do as you wish, especially in the case of indie development.\nReferences Godot Docs - Audio streams Godot Docs - AudioStreamPlayer ",
  "wordCount" : "1305",
  "inLanguage": "en",
  "image":"https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png","datePublished": "2022-10-19T19:45:00+09:00",
  "dateModified": "2022-10-19T19:45:00+09:00",
  "author":{
    "@type": "Person",
    "name": "Gobo"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.peanuts-code.com/en/tutorials/gd0020_switching_sound_resources/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Peanuts Code",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.peanuts-code.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.peanuts-code.com/en/" accesskey="h" title="Peanuts Code (Alt + H)">
                <img src="/images/logomark.png" alt="logo" aria-label="logo"
                    height="35">Peanuts Code</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.peanuts-code.com/ja/" title="日本語"
                            aria-label="日本語">Ja</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.peanuts-code.com/en/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/posts/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/tutorials/" title="Tutorials">
                    <span>Tutorials</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.peanuts-code.com/en/">Home</a>&nbsp;»&nbsp;<a href="https://www.peanuts-code.com/en/tutorials/">Tutorials</a></div>
    <h1 class="post-title">
      Switching Sound Resources by Script in Godot3
    </h1>
    <div class="post-meta">2022-10-19&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Gobo&nbsp;|&nbsp;
<ul class="i18n_list">Translations:
    <li>
        <a href="https://www.peanuts-code.com/ja/tutorials/gd0020_switching_sound_resources/">Ja</a>
    </li>
</ul>
</div>
    
    <ul class="post-tags">
      <li><a href="https://www.peanuts-code.com/en/tags/gamedev/">GameDev</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godotengine/">GodotEngine</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godot3/">Godot3</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/sound/">Sound</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/resource/">Resource</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/audiostreamplayer/">AudioStreamPlayer</a></li>
    </ul>

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on twitter"
        href="https://twitter.com/intent/tweet/?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2cSound%2cResource%2cAudioStreamPlayer">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&amp;title=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;summary=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&title=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on whatsapp"
        href="https://api.whatsapp.com/send?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on telegram"
        href="https://telegram.me/share/url?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

    
    
    
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://www.peanuts-code.com/images/tutorials/gd0020_switching_sound_resources/img9.png" alt="Switching Sound Resources by Script in Godot3">
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#preparation" aria-label="Preparation">Preparation</a><ul>
                        
                <li>
                    <a href="#project-settings" aria-label="Project Settings">Project Settings</a></li>
                <li>
                    <a href="#import-sound-resources" aria-label="Import Sound Resources">Import Sound Resources</a></li></ul>
                </li>
                <li>
                    <a href="#create-a-scene" aria-label="Create a scene">Create a scene</a></li>
                <li>
                    <a href="#edit-the-nodes" aria-label="Edit the nodes">Edit the nodes</a><ul>
                        
                <li>
                    <a href="#ui-control-root-node" aria-label="UI (Control) root node">UI (Control) root node</a></li>
                <li>
                    <a href="#soundlabel-label-node" aria-label="SoundLabel (Label) node">SoundLabel (Label) node</a></li>
                <li>
                    <a href="#audiostreamplayer-node" aria-label="AudioStreamPlayer node">AudioStreamPlayer node</a></li></ul>
                </li>
                <li>
                    <a href="#attach-a-script-to-the-root-node" aria-label="Attach a script to the root node">Attach a script to the root node</a></li>
                <li>
                    <a href="#running-check" aria-label="Running check">Running check</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a></li>
                <li>
                    <a href="#references" aria-label="References">References</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>This article explains how to switch between and play multiple sound resources (music and sound effect files) with a single &ldquo;AudioStreamPlayer&rdquo; node.</p>
<p>Basically, only one sound resource can be set per &ldquo;AudioStreamPlayer&rdquo; node. In other words, you must add &ldquo;AudioStreamPlayer&rdquo; nodes in the scene tree for each sound resource. You may feel useless in a situation where there are multiple nodes in the scene tree with the same settings except for the sound resource (as shown in the screenshot below), and you may also feel a little uncomfortable with the lack of visibility in the scene dock.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img0.png" alt="project settings - window size"  />
</p>
<p>So, if you have multiple sound resources that are never played simultaneously (e.g., multiple sound effects for different types of character attacks, multiple sound effects for different types of buttons on the UI, etc.), add only the minimum necessary &ldquo;AudioStreamPlayer&rdquo; node for each use to your scene. If you code a program that switches sound resources according to the situation, there will be no waste and the scene dock will look cleaner.</p>
<p>In this tutorial, we will prepare only one &ldquo;AudioStreamPlayer&rdquo; node and control the sound resources to be applied to it so that they can be switched and played from a script.</p>
<blockquote>
<p><strong><span style="color:salmon">Environment</span>
</strong><br>
<em>Godot version: <strong>3.5.1</strong></em><br>
<em>Computer OS: <strong>macOS 12.6</strong></em></p>
</blockquote>
<blockquote>
<p><strong><span style="color:salmon">Basic Articles</span>
</strong><br>
<em>You may also find the following articles useful.<br>
<a href="https://www.peanuts-code.com/en/tutorials/gd0001_download/">Downloading Godot</a>
<br>
<a href="https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/">Project Manager of Godot3</a>
</em></p>
</blockquote>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="preparation">Preparation<a hidden class="anchor" aria-hidden="true" href="#preparation">#</a></h2>
<h3 id="project-settings">Project Settings<a hidden class="anchor" aria-hidden="true" href="#project-settings">#</a></h3>
<p>After starting a new project, go to the &ldquo;Project&rdquo; menu &gt; &ldquo;Project Settings&rdquo; and make the following settings.</p>
<ul>
<li>In the &ldquo;General&rdquo; tab &gt; &ldquo;Display&rdquo; on the sidebar &gt; &ldquo;Window&rdquo; &gt; &ldquo;Size&rdquo; section, set the window size as follows<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img1.png" alt="project settings - window size"  />
</li>
</ul>
<br>
<h3 id="import-sound-resources">Import Sound Resources<a hidden class="anchor" aria-hidden="true" href="#import-sound-resources">#</a></h3>
<p>Six .wav files (sound effects) are available in the following Dropbox shared folder.</p>
<blockquote>
<p><em><a href="https://www.dropbox.com/s/9vizybn81r4xtt8/auido.zip?dl=0" target="_blank">Dropbox - 共有フォルダ</a>
</em></p>
</blockquote>
<p>Drag and drop the entire downloaded &ldquo;audio&rdquo; folder into the file system dock to add it to the project.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img1.1.png" alt="sound resources - add to the file system"  />
</p>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="create-a-scene">Create a scene<a hidden class="anchor" aria-hidden="true" href="#create-a-scene">#</a></h2>
<p>Create the following scene tree. This time, the tree is the simplest ever.</p>
<ul>
<li>UI (Control)
<ul>
<li>SoundLabel (Label)</li>
<li>AudioStreamPlayer</li>
</ul>
</li>
</ul>
<p><img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img2.png" alt="Scene tree"  />
</p>
<p>When the scene tree creation is complete, save the file as &ldquo;UI.tscn&rdquo;.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="edit-the-nodes">Edit the nodes<a hidden class="anchor" aria-hidden="true" href="#edit-the-nodes">#</a></h2>
<h3 id="ui-control-root-node">UI (Control) root node<a hidden class="anchor" aria-hidden="true" href="#ui-control-root-node">#</a></h3>
<p>Expand the root node &ldquo;Anchor&rdquo; so that it is the same size as the screen. The reason for this is that we want to center the child node &ldquo;SoundLabel&rdquo; on the screen after this.</p>
<ul>
<li>Select &ldquo;Layout&rdquo; &gt; &ldquo;Full Rect&rdquo; from the 2D workspace toolbar. The &ldquo;Anchor&rdquo; property will now be automatically adjusted and the 2D workspace will look like this<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img3.png" alt="UI node - Layout - Full Rect"  />
</li>
</ul>
<br>
<h3 id="soundlabel-label-node">SoundLabel (Label) node<a hidden class="anchor" aria-hidden="true" href="#soundlabel-label-node">#</a></h3>
<p>This node is used to display the path of the sound resource currently applied to the &ldquo;Stream&rdquo; property of the &ldquo;AudioStreamPlayer&rdquo; node. This allows you to see at a glance which resource file is currently being set and played when you run the project to check its operation.</p>
<ul>
<li>In the inspector, temporarily put &ldquo;no sound&rdquo; in the &ldquo;Text&rdquo; property.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img4.png" alt="SoundLabel node - Text"  />
</li>
<li>Change the &ldquo;Align&rdquo; property to &ldquo;Center&rdquo;. This will center the &ldquo;Text&rdquo; string horizontally.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img5.png" alt="SoundLabel node - Align"  />
</li>
<li>Change the &ldquo;Grow Direction&rdquo; &gt; &ldquo;Horizontal&rdquo; property of the &ldquo;Control&rdquo; class to &ldquo;Both&rdquo;. Now, even if the number of characters in &ldquo;Text&rdquo; increases, it will always be displayed in the center of the screen because it will be enlarged in both left and right directions.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img6.png" alt="SoundLabel node - Grow Direction - Horizontal"  />
</li>
<li>Select &ldquo;Layout&rdquo; &gt; &ldquo;Center&rdquo; from the 2D workspace toolbar.<br>
<img loading="lazy" src="/images/tutorials/gd0020_switching_sound_resources/img7.png" alt="SoundLabel node - Layout - Center"  />
</li>
</ul>
<br>
<h3 id="audiostreamplayer-node">AudioStreamPlayer node<a hidden class="anchor" aria-hidden="true" href="#audiostreamplayer-node">#</a></h3>
<p>This node is used to set a sound resource and play it back. Although the node is originally designed to allow only one sound resource to be set, for this tutorial, we will use this single node to switch between multiple sound resources. The control of this will be done later in a script, but for now, let&rsquo;s set up the node.</p>
<ul>
<li>Drag and drop &ldquo;res://auido/coin.wav&rdquo; from the sound resource file imported from the file system dock to the &ldquo;Stream&rdquo; property of the inspector and apply it. This will be the default sound resource for now.</li>
</ul>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="attach-a-script-to-the-root-node">Attach a script to the root node<a hidden class="anchor" aria-hidden="true" href="#attach-a-script-to-the-root-node">#</a></h2>
<p>Now it is time to create a script to control the configuration and playback of sound resources. First, attach a new script to the root node &ldquo;UI&rdquo;. The file name of the script should be &ldquo;UI.gd&rdquo;. After attaching the script and opening the script editor, edit the code as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">###UI.gd###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Control</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Array of preloaded sound resources</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> sounds <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># default resource as 1st element</span>
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/coin.wav&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/heal.wav&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/hurt.wav&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/shoot1.wav&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/shoot2.wav&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://auido/shoot3.wav&#34;</span>),
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Index (from 0 to 5) to specify the resource to be set to</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># AudioStreamPlayer among the elements of the array sounds</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> index: <span style="color:#a6e22e">int</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reference to SoundLabel node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> sound_label <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>SoundLabel
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reference to AudioStreamPlayer node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> player <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>AudioStreamPlayer
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Built-in function to run when node is loaded</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _ready():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Call a method to play sound (defined later)</span>
</span></span><span style="display:flex;"><span>	play_sound()<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Built-in process function (called every frame)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _process(_delta):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the right arrow key is pressed</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>is_action_just_pressed(<span style="color:#e6db74">&#34;ui_right&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If current index is less than last index of array sounds(5)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Add 1 to the current index if it is less than</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> index <span style="color:#f92672">&lt;</span> sounds<span style="color:#f92672">.</span>size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>:
</span></span><span style="display:flex;"><span>			index <span style="color:#f92672">+=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If current index is less than last index(5) in array sounds,</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># set index back to 0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>			index <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method to play a sound (defined later)</span>
</span></span><span style="display:flex;"><span>		play_sound()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the left arrow key is pressed</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>is_action_just_pressed(<span style="color:#e6db74">&#34;ui_left&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If current index is greater than 0</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Subtract 1 from current index</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> index <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>:
</span></span><span style="display:flex;"><span>			index <span style="color:#f92672">-=</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If current index is 0 set the index to the same (5)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">#  as the last index in the array sounds</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">else</span>:
</span></span><span style="display:flex;"><span>			index <span style="color:#f92672">=</span> sounds<span style="color:#f92672">.</span>size() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method to play sounds (defined later)</span>
</span></span><span style="display:flex;"><span>		play_sound()
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If spacebar or enter key is pressed</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>is_action_just_pressed(<span style="color:#e6db74">&#34;ui_accept&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method to play sound (to be defined later)</span>
</span></span><span style="display:flex;"><span>		play_sound()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method to play sound</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> play_sound():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Get the element corresponding to the current index from the array sounds</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Apply it to the Stream property of AudioStreamPlayer</span>
</span></span><span style="display:flex;"><span>	player<span style="color:#f92672">.</span>stream <span style="color:#f92672">=</span> sounds[index]<span style="color:#f92672">.</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Set the resource path of AudioStreamPlayer&#39;s Stream property</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># to SoundLabel&#39;s Text property.</span>
</span></span><span style="display:flex;"><span>	sound_label<span style="color:#f92672">.</span>text <span style="color:#f92672">=</span> player<span style="color:#f92672">.</span>stream<span style="color:#f92672">.</span>resource_path
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Play the sound resource of AudioStreamPlayer&#39;s Stream property</span>
</span></span><span style="display:flex;"><span>	player<span style="color:#f92672">.</span>play()
</span></span></code></pre></div><br>
<p>This completes the editing of the script.</p>
<p>Note that this time I used <code>preload</code> so that sound resources are also loaded when the node is loaded. This may be a good way to avoid delay if the game has a lot of processing. On the other hand, if the game does not require much processing, you can use <code>load</code> to load the resource files just before playback.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="running-check">Running check<a hidden class="anchor" aria-hidden="true" href="#running-check">#</a></h2>
<p>Finally, run the project or scene to check the operation.</p>
<p>As implemented so far, the following keyboard operations can be used to switch sound resources and play them back.</p>
<ul>
<li>Right arrow key: Switch to the next sound resource on the <code>sounds</code> array in the &ldquo;UI.gd&rdquo; script and play it.</li>
<li>Left arrow key: Switch to the previous sound resource on the <code>sounds</code> array in the &ldquo;UI.gd&rdquo; script.</li>
<li>Spacebar / Enter key: Play the currently set sound resource</li>
</ul>

<video controls autoplay loop muted playsinline aria-label='run the project' style='ZgotmplZ'>

    <source src="/images/tutorials/gd0020_switching_sound_resources/img8.mp4" type="video/mp4">
    
    Your browser does not support the video tag.
</video>

<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>This tutorial has shown you how to switch between multiple sound resources for playback in a single &ldquo;AudioStreamPlayer&rdquo; node. Let&rsquo;s summarize the important points.</p>
<ul>
<li>A single &ldquo;AudioStreamPlayer&rdquo; node can switch between multiple sound resources.</li>
<li>The above method is implemented to avoid the waste of adding multiple &ldquo;AudioStreamPlayer&rdquo; nodes with almost identical settings and to improve the visibility of the scene tree.</li>
<li>Sound switching and playback is controlled by scripts.</li>
</ul>
<p>Of course, if programming is not your forte, adding as many &ldquo;AudioStreamPlayer&rdquo; nodes as the number of sound resources to the scene is perfectly acceptable. What we have introduced here is just one methodology, so please feel free to do as you wish, especially in the case of indie development.</p>
<br>
<hr>
<h2 id="references">References<a hidden class="anchor" aria-hidden="true" href="#references">#</a></h2>
<ul>
<li><a href="https://docs.godotengine.org/en/stable/tutorials/audio/audio_streams.html" target="_blank">Godot Docs - Audio streams</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_audiostreamplayer.html" target="_blank">Godot Docs - AudioStreamPlayer</a>
</li>
</ul>
<hr>
<!-- **UPDATE** -->
<!-- 2022/05/25 新規作成 -->
<!-- --- -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>


  </div>

  <footer class="post-footer">
    
    <div class="recommendation">
        <span>Please feel free to follow my accounts!</span>
      <div class="social-icons">
    <a href="https://twitter.com/peanuts_code" target="_blank" rel="noopener noreferrer me" title="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z">
    </path>
</svg>
    </a>
    <a href="https://github.com/msnsk/" target="_blank" rel="noopener noreferrer me" title="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
    stroke-linecap="round" stroke-linejoin="round">
    <path
        d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22">
    </path>
</svg>
    </a>
</div>

    </div>
    <div class="recommendation">
        <span>If you liked this article, please share it!</span>
    </div>
    
    

<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on twitter"
        href="https://twitter.com/intent/tweet/?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2cSound%2cResource%2cAudioStreamPlayer">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&amp;title=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;summary=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f&title=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on whatsapp"
        href="https://api.whatsapp.com/send?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Switching Sound Resources by Script in Godot3 on telegram"
        href="https://telegram.me/share/url?text=Switching%20Sound%20Resources%20by%20Script%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0020_switching_sound_resources%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

    <ul class="post-tags">
      <li><a href="https://www.peanuts-code.com/en/tags/gamedev/">GameDev</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godotengine/">GodotEngine</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godot3/">Godot3</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/sound/">Sound</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/resource/">Resource</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/audiostreamplayer/">AudioStreamPlayer</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://www.peanuts-code.com/en/tutorials/gd0019_2d_animation_state_machine/">
    <span class="title">Next Page »</span>
    <br>
    <span>Animation State Machine in Godot3</span>
  </a>
</nav>

    
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.peanuts-code.com/en/">Peanuts Code</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
