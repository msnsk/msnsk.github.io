<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Connecting matching colors puzzle game in Godot | Peanuts Code</title>
<meta name="keywords" content="Godot, GodotEngine, GameDev, Tutorials, 2D, ConnectingMatchingColors, Puzzle" />
<meta name="description" content="In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game.">
<meta name="author" content="Masanao Sako">
<link rel="canonical" href="https://www.peanuts-code.com/en/tutorials/gd0011_connect_colors/" />
<meta name="google-site-verification" content="XYZabc" />
<meta name="yandex-verification" content="XYZabc" />
<meta name="msvalidate.01" content="XYZabc" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.css" rel="preload stylesheet" as="style">
<link rel="preload" href="/images/logomark.png" as="image">
<link rel="icon" href="https://www.peanuts-code.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.peanuts-code.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.peanuts-code.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.peanuts-code.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.peanuts-code.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.101.0" />
<link rel="alternate" hreflang="ja" href="https://www.peanuts-code.com/ja/tutorials/gd0011_connect_colors/" />
<link rel="alternate" hreflang="en" href="https://www.peanuts-code.com/en/tutorials/gd0011_connect_colors/" />

<script async src="https://www.googletagmanager.com/gtag/js?id=G-DK0NK2RTTW"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-DK0NK2RTTW', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Connecting matching colors puzzle game in Godot" />
<meta property="og:description" content="In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0011_connect_colors/" />
<meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0011_connect_colors/img36.gif" /><meta property="article:section" content="tutorials" />
<meta property="article:published_time" content="2022-06-20T03:00:00&#43;09:00" />
<meta property="article:modified_time" content="2022-06-20T03:00:00&#43;09:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://www.peanuts-code.com/images/tutorials/gd0011_connect_colors/img36.gif" />
<meta name="twitter:title" content="Connecting matching colors puzzle game in Godot"/>
<meta name="twitter:description" content="In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Tutorials",
      "item": "https://www.peanuts-code.com/en/tutorials/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Connecting matching colors puzzle game in Godot",
      "item": "https://www.peanuts-code.com/en/tutorials/gd0011_connect_colors/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Connecting matching colors puzzle game in Godot",
  "name": "Connecting matching colors puzzle game in Godot",
  "description": "In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game.",
  "keywords": [
    "Godot", "GodotEngine", "GameDev", "Tutorials", "2D", "ConnectingMatchingColors", "Puzzle"
  ],
  "articleBody": "In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game.\nLINE: Disney Tsum Tsum Note that the final project file in this tutorial is located in the GitHub repository . You can directly check the project by downloading the .zip file and importing the “project.godot” file in the “End” folder with the Godot Engine.\nEnvironment This tutorial was created in the following environment\n・Godot version: 3.4.4\n・Computer OS version: macOS 11.6.5\nMemo: Please also use the following article to help you start creating your game.\nDownloading Godot Project Manager of Godot Creating a new project First, we would like you to start Godot Engine and create a new project. Let’s name the project “Connect Colors Start.\nEditing project settings Once the editor appears, let’s editing the settings for the entire project.\nFirst, set the display size for the game. In this case, we set the aspect ratio to 16:9, assuming a smartphone screen in portrait orientation.\nOpen the “Project” menu \u003e “Project Settings”\nIn the “General” tab, search for “window” and select “Display” \u003e “Window” in the sidebar. In the “Size” section, change the values of the following items Width: 144 Height: 256 Test Width: 288 Test Height: 512\nChange the values of the following items in the “Stretch” section Mode: 2d Aspect: keep\nKeep the “Project Settings” open and configure the settings to substitute the mouse for the smartphone’s touch operation.\nSearch for “mouse” in the “General” tab and select “Input Devices” \u003e “Pointing” in the sidebar. Check “On” for “Emulate Touch From Mouse”.\nWith the “Project Settings” window open, add an action to the input map that corresponds to a smartphone touch operation.\nSwitch to the “Input Map” tab and add “tap” to the action. Add a left mouse click to the “tap” action.\nDownloading and importing the assets Next, let’s download assets from KENNEY and use them. The asset pack we will be using is called Pixel Platformer . I can’t help but be thankful for this wonderful free resource.\nOnce downloaded, drag and drop the “characters_packed.png” file from the “Tilemap” folder into the editor’s file system dock to import it into your project.\nImmediately after importing the file, the image will look blurry, so follow the steps below to correct this.\nMake the imported asset file selected in the file system dock\nSelect [Presets] \u003e [2D Pixel] in the import dock.\nClick the “Re-import” button at the bottom.\n! click reinport This will give the image the edgy look characteristic of pixel art.\nCreating a World Scene The first scene is to set the stage for the game. Let’s create a scene named “World”.\nSelect “Scene” menu \u003e “New Scene”. Select “Other Node” in “Generate Root Node”. Select a node of the “Node2D” class as the root node. Rename the root node to “World”. Save the scene at this point. Create a folder and save the scene with the file path “res://World/World.tscn”.\nAdding nodes to the World scene Let’s add nodes so that the world scene will look like the following scene tree. We will edit the properties of each node in turn later, so we can leave them as they are.\nWorld (Node2D) Bin (StaticBody2D) CollisionPolygon2D SpawnPath (Path2D) Spawner (PathFollow2D) AnimationPlayer Drops (Node2D) DropsLine (Line2D) Pointer (Area2D) CollisionShape2D The scene tree dock should now look like this.\nEditing nodes in the World scene Bin (StaticBody2D) node This node does not need to be edited. StaticBody2D is used in 2D games for obstacles and walls that do not move. In this case, we will use it as a container (bin) to keep falling drops (objects to be erased by tracing) on the screen.\nCollisionPolygon2D node This node is used to add a collision shape to the parent node “Bin”. The collision shape is created by dotting in the 2D workspace.\nActivate grid snap in the 2D workspace toolbar.\nBasically, the collision shape is formed by dotting around the outside of the window frame. However, the upper part of the shape should be shifted by -64px from the y-coordinate 0 of the display size. This is to generate a drop outside the upper part of the window frame and make it fall. The lower part of the collision polygon is placed slightly inside the display size and slanted so that the drop will roll.\nSpawnPath (Path2D) node This node is used to move the position of the spawning drop along the x-axis at all times. This makes the drops fall from the different positions at the top of the screen every time. Let’s place it outside the top of the window frame.\nCreate a straight path parallel to the x-axis by hitting two points (16, -32) and (128, -32) on the 2D workspace.\nSpawner (PathFollow2D) node This node moves along the path of the “SpawnPath” node edited earlier. This node should always move back and forth along the path to generate a drop from this node’s position. This will ensure that the drop’s position when spawned always changes within the path of the “SpawnPath” node.\nTurn off the property “Rotate”.\nAnimationPlayer node This node is used to move “Spawner” back and forth along the path of “SpawnPath” at all times. The “Spawner” property “Unit Offset” represents the starting point of the parent node “SpawnPath” path as 0 and the end point as 1. In other words, by constantly changing this property between 0 and 1, it is possible to make a round trip on the path.\nCreate an animation as follows Animation name: move_spawn_pos Auto play on load: Enabled Animation length (seconds): 0.4\n*0.4 seconds to move back and forth along the path Animation looping: Enabled Track: Spawner node - unit_offset property Time: 0 / Value: 0 / Easing: 1.00 Time: 0.2 / Value: 1 / Easing: 1.00\n*Wrap from the end of the path at 0.2 seconds\nDrops (Node2D) node No property editing is required for this node. Its role is just a container for multiple instances generated from a drop scene (to be created later).\nDropLine (Line2D) node This node is used to draw a line connecting drops of the same color when they are traced. This makes it easier to visually check which drop has been traced and how many drops are connected.\nChange the property “Width” to 2. This is the thickness of the line.\nChange the properties “Capping” \u003e “Joint Mode”, “Begin Cap Mode”, and “End Cap Mode” to “Round” respectively. This will make the shape of the joints, tips, and ends of the lines round.\nPointer (Area2D) node There is no need to edit this node. The purpose of this node is to follow the finger on a smartphone or the mouse cursor on a PC to detect when a drop is touched. Later, we will write code in the script to make the position of this node always the same as the position of the finger or mouse cursor.\nCollisionShape2D node This node gives the parent node “Pointer” a collision shape. Considering the operation of touching the drop with a finger or mouse cursor, the collision should be as small a shape as possible.\nApply the “New CircleShape2D” resource to the property “Shape”. Set the value of the property “Radius” of the applied resource “CircleShape2D” to 1.\nThis completes the editing of each node.\nCreating a Drop scene From here, we will create a “Drop” scene to be erased by tracing the same color.\nSelect “Scene” menu \u003e “New Scene”. Select “Other Node” in “Generate Root Node”. Select a node of the “RigidBody2D” class as the root node. Rename the root node to “Drop”. Save the scene at this point. Create a folder and save the scene with the file path “res://Drops/Drop.tscn”. Adding nodes to the Drop scene Let’s add nodes so that the Drop scene will look like the following scene tree. We will edit the properties of each node in turn later, so we can leave them as they are.\nDrop (RigidBody2D) Sprite CollisionShape2D PointableArea (Area2D) CollisionShape2D AnimationPlayer StickableArea (Area2D) CollisionShape2D The scene tree dock should now look like this.\nEditing nodes in the Drop scene Drop (RigidBody2D) root node We want the “Drop” scene to automatically fall or bounce according to gravity when its instance is added to the “World” scene. The RigidBody2D class automatically reproduces such physics-based movements according to the node’s properties.\nIn the inspector dock, apply a new “PhysicsMaterial” resource to the “Physics Material Override” property.\nSet the property “Gravity Scale” to 2. The purpose is to make the drop fall a little faster.\nGo to Node Dock \u003e Groups tab and create and add a group named “Drops”. This is important for the conditional branching process in the script.\nSprite node This node is used to give “Drop” a texture (appearance). The method of setting the texture of the sprite by specifying the range of textures you want to use from the sprite sheet that contains many textures imported at the beginning of this section is used.\nIn the inspector, drag the resource “res://characters_packed.png” from the file system to the property “Texture” and apply it.\nTurn on “Region” \u003e “Enabled”.\nOpen the Texture Region panel at the bottom of the editor.\nExpand the panel by clicking on the expand icon to make it easier to work with.\nSelect “grid snap” under “snap mode” at the top of the panel.\nSet the “step” at the top of the panel to 24px 24px. This will make the grid the same size as one texture on the sprite sheet.\nDrag on the sprite sheet to select a range of two different textures with a green drop (looks like an alien).\nGo back to the inspector and change the value of the “Animation” \u003e “Hframes” property to 2.\nCollisionShape2D node (child of root node Drop) This node provides a collision shape to the root node “Drop”. The root node is a “RigidBody2D” class, one of the physical bodies. The collision setting is essential to determine collisions between physical bodies. With this collision shape, it is assumed that multiple instances of the “Drop” scene will collide with each other and pile up on the screen.\nApply a new “CircleShape2D” resource to the “Shape” property. Furthermore, change the value of the property “Radius” of that resource to 12. This creates a circular collision shape with a radius of 12 px, which can be intuitively sized in the 2D workspace.\nPointableArea (Area2D) node This node is used to detect when a finger or mouse cursor touches or leaves its drop. No property editing is required, but a group needs to be added.\nGo to the Node Dock \u003e Groups tab and create and add a group named “Pointable”. This is used to determine if the finger or mouse cursor is touching the drop.\nCollisionShape2D (child of PointableArea) node This node provides a collision shape to the parent “PointableArea”. It should fit slightly inside the collision shape of the root node “Drop” so that it does not react when a finger or mouse cursor touches the edge of the drop.\nApply a new “CircleShape2D” resource to the property “Shape”. In addition, change the value of the property “Radius” of the resource to 10. The collision shape is one size smaller than the collision shape of the root node “Drop”. You can intuitively adjust the size in the 2D workspace.\n*The collision shape for this node is an inner circle AnimationPlayer node The first step here is to create a waiting animation for the drop when the finger or mouse cursor is not touching it, and a blinking animation to show it after it is touched. This node will be used to play those animation resources that we have created.\nCreate a drop waiting animation as follows. Animation name: idle Auto play on load: Enabled Animation length (seconds): 1 Animation looping: Enabled Track: Sprite node - frame property Time: 0 / Value: 0 / Easing: 1.00 Time: 0.5 / Value: 1 / Easing: 1.00 Sprite node - modulate property Time: 0 / Value: #ffffff / Easing: 1.00\n*A track to ensure that after modulate is changed in a “flash” animation, it is reset to its initial value when the “idle” animation is played.\nCreate an animation of the drop in standby as follows. Animation name: flash Auto play on load: disabled Animation length (seconds): 0.2 Animation looping: Enabled Track: Sprite node - frame property Time: 0 / Value: 0 / Easing: 1.00 Time: 0.1 / Value: 1 / Easing: 1.00 Sprite node - modulate property Time: 0 / Value: #ffffff / Easing: 1.00 Time: 0.1 / Value: #64ffffff / Easing: 1.00\nStickableArea (Area2D) node This node is used to detect if a drop is in contact with another drop. No property editing is required, but a group needs to be added.\nGo to Node Dock \u003e Groups tab and create and add a group named “Stickable”. This is important to determine if the drop is “adjacent” = “connectable” when you trace your finger or mouse cursor over it.\nCollisionShape2D node This node provides a collision shape for the parent “StickableArea” node. It is used to detect adjacent drops. In order to detect contact between adjacent drops, the collision shape should be slightly larger than the collision shape of the root node “Drop”.\nApply a new “CircleShape2D” resource to the property “Shape”. In addition, change the value of the property “Radius” of the resource to 18. This creates a circular collision shape with a radius of 18 px. It can also be intuitively sized in the 2D workspace.\n*The collision shape for this node is the outermost circle. This completes the editing of each node.\nControlling the Drop scene with a script Now let’s attach a new script to the root node “Drop”. Create a script file with the file path “res://Drops/Drop.gd”.\nEdit the script as follows.\n### Drop.gd ### extends RigidBody2D # Properties to assign each color name to a scene that inherits from the Drop scene export var color = \"\" # define stuck_drop as an array to contain adjacent drops var stuck_drops = [] # Reference to the AnimationPlayer node onready var anim_player = $AnimationPlayer Next, we will use signals from the Area2D node of the “StickableArea” node. Let’s connect the “area_entered” signal, which is sent out when a drop makes contact with an adjacent drop, and the “area_exited” signal, which is sent out when a drop that was in contact with a drop leaves the area, to the script.\nEdit the method generated when you connect each signal as follows.\n### Drop.gd ### # Method called when a StickableArea is collided by another area (Area2D) func _on_StickableArea_area_entered(area): # If the area was collided by a Stickable group node if area.is_in_group(\"Stickable\"): # Define its parent node as drop var drop = area.get_parent() # Add drop to the array stuck_drops stuck_drops.append(drop) # Method called when another area (Area2D) leaves StickableArea func _on_StickableArea_area_exited(area): # If the area that was exited from the collision shape is a Stickable group node if area.is_in_group(\"Stickable\"): # Define its parent node as drop var drop = area.get_parent() # Check the index of a drop in the array stuck_drops var index = stuck_drops.find(drop) # Remove the element (adjacent Drop) corresponding to index from the array stuck_drops stuck_drops.remove(index) This completes the editing of “Drop.gd”.\nCreating a scene that inherits from the Drop scene The “Drop” scene we just created is a template for the scene we will create. We will now create a scene that inherits the “Drop” scene in the number of drop colors. There are five drop colors: blue, green, orange, red, and yellow. Let’s start with the Blue drop as an example.\nSelect “Scene” menu \u003e “New Inherited Scene. Select “Drops.tscn” as the source scene for the minor injury. After the scene is generated, rename the root node to “Blue.\n*The name of this root node should match the color of each drop. Save the scene. Save the file path as “res://Drops/BlueDrop.tscn”. With the root node “BlueDrop” selected in the scene tree dock, set the value of “Color” in Script Variables to “Blue” in the inspector.\nSelect the “Sprite” node in the scene tree dock. Open the “Texture Area” panel at the bottom of the editor and select the two blue alien textures.\nThis completes the “BlueDrop” scene. Follow the same procedure to create the remaining four color scenes. The name of the root node of the scene and its property “Color” are as follows.\nRoot node: GreenDrop / Color: Green Root node: OrangeDrop / Color: Orange Root node: RedDrop / Color: Red Root node: YellowDrop / Color: Yellow When we have created an inheritance scene with a total of five drop colors, our work is complete.\nControlling a World Scene with Scripts We are now approaching the end of this tutorial. Let’s attach a script to the root node of the “World” scene. Create the file path as “res://World/World.tscn”.\nWhen the script editor opens, first define the properties as follows\n### World.gd ### extends Node2D # Define drop_scenes as an array with 5 preloaded color drop scenes as elements const drop_scenes = [ preload(\"res://Drops/BlueDrop.tscn\"), preload(\"res://Drops/GreenDrop.tscn\"), preload(\"res://Drops/OrangeDrop.tscn\"), preload(\"res://Drops/RedDrop.tscn\"), preload(\"res://Drops/YellowDrop.tscn\") ] # Minimum number of connecting drops that can be erased export (int) var min_erasable = 3 # Maximum number of drops displayed on the screen export (int) var max_drops = 50 # True if the game is currently playing var is_playing = false # True if finger on the screen or left mouse click is held down var is_holding = false # Referencing the drop where the finger or mouse cursor is currently held var pointed_drop # Color of the drops currently connected var active_color = \"\" # Array for list of held (traced and connected) drops var held_drops = [] # A reference to the Spawner node onready var spawner = $SpawnPath/Spawner # A reference to the Drops node onready var drops = $Drops # Reference to a DropsLine node onready var drops_line = $DropsLine # Reference to a Pointer node onready var pointer = $Pointer Next, let’s code the maximum number of drops (50) to fall from the top of the screen immediately after the game starts.\n### World.gd ### # Method called when all nodes in the World scene have been loaded func _ready(): # Built-in method that will randomize the output of random methods every time. randomize() # Loop for the number of max_drops (50) for _i in range(max_drops): # Call a method (defined later) to generate drops spawn_drop() # Wait 0.025 seconds after one drop is spawned, then spawn the next drop yield(get_tree().create_timer(0.025), \"timeout\") # Method to spawn a drop func spawn_drop(): # Reference to a scene file for a randomly chosen color drop from the array drop_scenes var drop_scene = drop_scenes[randi() % drop_scenes.size()] # Instantiate a drop scene of the selected color var drop = drop_scene.instance() # Make the position of the drop instance the same as the position of the Spawner node drop.position = spawner.global_position # Add the drop instance to the World scene drops.add_child(drop) Now let’s run the project and watch the behavior of 50 drops of randomly determined colors falling at the start of the game. Note that when we run the project for the first time, we should set the main scene as “World.tscn”.\nThe position of the “Pointer (Area2D)” node will be coded to follow the position of the finger or mouse cursor, and the “PointableArea (Area2D)” of the “Drop” instance will detect when the finger or mouse cursor overlaps with it and when it leaves it. The “Pointer” node detects this and sends a signal. Let’s use this to code the process when tracing a drop.\nSelect “Pointer” in the scene tree dock and connect the signals “area_entered(area: Area2D)” and “area_exited(area: Area2D)” to the script in the Node Dock \u003e Signal tab.\nEdit the automatically generated methods as follows.\n### World.gd ### # Method called when a Pointer node touches another area (Area2D object) func _on_Pointer_area_entered(area): # if area is a node in the \"Pointable\" group if area.is_in_group(\"Pointable\"): # Pass a reference to the parent node of area (Drop node) to pointed_drop pointed_drop = area.get_parent() # If drop in hold is non-zero.. # and the last drop in the hold is adjacent to pointed_drop if not held_drops.empty() and held_drops[-1] in pointed_drop.stuck_drops: # Call a method to update drop connections (defined later) update_drops_connection() # Method called when the area (Area2D object) that the Pointer node was touching leaves func _on_Pointer_area_exited(area): # If area is a node in the \"Pointable\" group if area.is_in_group(\"Pointable\"): # Set pointed_drop to null pointed_drop = null Next, use the built-in function `_process` to execute the method you want to call every frame (60FPS). ### World.gd ### # Built-in function: called at 60FPS func _process(_delta): # Update the Points property of the DropsLine node update_drops_line() # Receive finger or mouse cursor actions get_input() # Method to update the Points property of a DropsLine node.. # to change the position of a drop as it rolls or falls func update_drops_line(): # If there is at least one drop in hold if not held_drops.empty(): # Create a temporary Vector2 array var temp_array = PoolVector2Array() # Loop over held drops for drop in held_drops: # Add the position of the drop in hold to the temporary array temp_array.append(drop.position) # Update the points property of the DropsLine node to the position of the currently held drop drops_line.points = temp_array # Methods to process finger or mouse input func get_input(): # Always set the Pointer node position to the finger or mouse cursor position pointer.position = get_global_mouse_position() # If you press the screen with a finger or the left mouse button if Input.is_action_just_pressed(\"tap\"): # Call a method (defined later) to hold the drop hold_drop() # Call a method (to be defined later) to update the connection of drops on hold update_drops_connection() # If the finger leaves the screen or the left mouse button is up if Input.is_action_just_released(\"tap\"): # Call a method (defined later) to erase drops on hold erase_drops() # Call a method to release holds (to be defined later). release_drops(). The following methods, which are called in the method get_input defined in the above code, will be defined in order after this.\nhold_drop update_drops_connection erase_drops release_drops First, let’s define the methods hold_drop and update_drops_connection to be called when a drop is held down.\n### World.gd ### # Methods to hold a drop while it is being held func hold_drop(): # If finger or mouse cursor is touching the drop if pointed_drop: # Hold the drop. is_holding = true # Method to update drop connections func update_drops_connection(): # If drop is holding and .. # if finger or mouse cursor is over the drop if is_holding and pointed_drop: # If is_holding and pointed_drop: # if held_drops.empty(): # if held_drops.empty() if held_drops.empty(): # If the color of the drop to be held is currently set to the color of the finger or .. # color of the drop that the mouse cursor is currently touching active_color = pointed_drop.color # Call a method (to be defined later) to connect drops connect_drop() # If the color of the drop currently touched by the finger or mouse cursor.. # is the same as the color of the drop being connected elif pointed_drop.color == active_color: # If the number of drops in hold is greater than or equal to 2 and .. # if the current touched drop is the same as the second last drop in the hold if held_drops.size() \u003e= 2 and pointed_drop == held_drops[-2]: # Call a method (defined later) to disconnect disconnect_drop() # If the drop currently touched by the finger or mouse cursor is not in the held drops elif not pointed_drop in held_drops: # Call a method (defined later) to connect the drops connect_drop() If you look inside the method update_drops_connection defined here, you will see that there are further undefined connect_drop and disconnect_drop methods called.\nLet’s continue to define these methods.\n### World.gd ### # Methods to connect drops func connect_drop(): # Play the animation \"flash\" on the currently touched drop pointed_drop.anim_player.play(\"flash\") # Add the currently touched drop to the list of held drops held_drops.append(pointed_drop) # Add the position of the currently touched drop to the Points property of the DropsLine node drops_line.add_point(pointed_drop.position) # Methods to disconnect drops func disconnect_drop(): # Define the last drop in the list of held drops as canceled_drop var canceled_drop = held_drops.pop_back() # Stop animation (\"flash\") in AnimationPlayer of canceled_drop canceled_drop.anim_player.stop() # Play the animation (\"idle\") in AnimationPlayer of canceled_drop canceled_drop.anim_player.play(\"idle\") # Remove the last point from the Points property of a DropsLine node drops_line.remove_point(drops_line.get_point_count() - 1) Within the get_input method, we will now define two methods, erase_drops and release_drops, which will be called when the finger leaves the screen or the left mouse button is raised.\n### World.gd ### # Methods to erase drops func erase_drops(): # If the number of held drops is less than the minimum number of drops that can be erased if held_drops.size() \u003c min_erasable: # Immediately terminate the method return # Duplicate the array of held drops as the value of variable erased var erased = held_drops.duplicate() # Loop over the elements of array erased for drop in erased: # Release the drops in array erased drop.queue_free() # Create a new drop for each erased drop spawn_drop() # Wait 0.1 seconds (then next loop) yield(get_tree().create_timer(0.1), \"timeout\")\t# Method to release holds from drops func release_drops(): # Release status while holding is_holding = false # Loop over the elements of the array of held drops for drop in held_drops: # Stop animation \"flash\" drop.anim_player.stop() # Play the animation \"idle\". drop.anim_player.play(\"idle\") # Empty the array of held drops held_drops.clear() # Empty the Points property of the DropsLine node drops_line.clear_points() This completes the editing of the “World.gd” script.\nExecuting the scene to check the operation Finally, let’s run a scene to see if it reproduces the movement as expected.\nHave you confirmed that the following is as expected?\nWhen the left mouse button is pressed while the mouse cursor is near the center of the drop, the drop is held and a “flash” animation is played. If you hold down the left mouse button and trace the adjacent drop, the “DropsLine” will be connected. If you return to the drop you have traced, the hold is released and the “idle” animation returns to playback. When three or more drops are traced, all drops in the hold disappear when the left mouse button is released. If less than three drops are traced, releasing the left mouse button does not erase the drops, only releases the hold. Sample Games We have prepared a sample game that further brushes up the project created in this tutorial.\nYour browser does not support the video tag. The project file is located in GitHub repository , so please download the .zip file from there and you can check it by importing the “project.godot” file in the “Sample” folder with the Godot Engine.\nConclusion In this tutorial, We created a puzzle game in which you have to trace the same color to make it disappear. It is the kind of game that one cannot help but feel addicted to. Let me summarize the key points in the creation of the game.\nUse RigidBody2D for the drop and let the engine do the physics. Add Area2D class nodes to the drop to detect fingers and cursors, and Area2D class nodes to detect adjacent drops, and use their signals. Always follow the Area2D class node to the finger or mouse cursor and use the signal of this node for contact with the drop. リンク KENNEY Godot Docs: Physics introduction Godot Docs: RigidBody2D Godot Docs: Using Area2D Godot Docs: Area2D Godot Docs: CollisionShape2D Godot Docs: CollisionPolygon2D Godot Docs: Path2D Godot Docs: PathFollow2D Godot Docs: Line2D Godot Docs: Introduction to the animation features Godot Docs: AnimationPlayer ",
  "wordCount" : "4661",
  "inLanguage": "en",
  "image":"https://www.peanuts-code.com/images/tutorials/gd0011_connect_colors/img36.gif","datePublished": "2022-06-20T03:00:00+09:00",
  "dateModified": "2022-06-20T03:00:00+09:00",
  "author":{
    "@type": "Person",
    "name": "Masanao Sako"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.peanuts-code.com/en/tutorials/gd0011_connect_colors/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Peanuts Code",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.peanuts-code.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>
<noscript>
    <style type="text/css">
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: #1d1e20;
                --entry: #2e2e33;
                --primary: rgba(255, 255, 255, 0.84);
                --secondary: rgba(255, 255, 255, 0.56);
                --tertiary: rgba(255, 255, 255, 0.16);
                --content: rgba(255, 255, 255, 0.74);
                --hljs-bg: #2e2e33;
                --code-bg: #37383e;
                --border: #333;
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.peanuts-code.com/en/" accesskey="h" title="Peanuts Code (Alt + H)">
                <img src="/images/logomark.png" alt="logo" aria-label="logo"
                    height="35">Peanuts Code</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                    <li>
                        <a href="https://www.peanuts-code.com/ja/" title="日本語"
                            aria-label="日本語">Ja</a>
                    </li>
                </ul>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.peanuts-code.com/en/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/tutorials/" title="Tutorials">
                    <span>Tutorials</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://www.peanuts-code.com/en/about/" title="About">
                    <span>About</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.peanuts-code.com/en/">Home</a>&nbsp;»&nbsp;<a href="https://www.peanuts-code.com/en/tutorials/">Tutorials</a></div>
    <h1 class="post-title">
      Connecting matching colors puzzle game in Godot
    </h1>
    <div class="post-meta">2022-06-20&nbsp;·&nbsp;22 min&nbsp;·&nbsp;Masanao Sako&nbsp;|&nbsp;
<ul class="i18n_list">Translations:
    <li>
        <a href="https://www.peanuts-code.com/ja/tutorials/gd0011_connect_colors/">Ja</a>
    </li>
</ul>
</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://www.peanuts-code.com/images/tutorials/gd0011_connect_colors/img36.gif" alt="Connecting matching colors puzzle game in Godot">
        
</figure><div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#creating-a-new-project" aria-label="Creating a new project">Creating a new project</a><ul>
                        
                <li>
                    <a href="#editing-project-settings" aria-label="Editing project settings">Editing project settings</a></li>
                <li>
                    <a href="#downloading-and-importing-the-assets" aria-label="Downloading and importing the assets">Downloading and importing the assets</a></li></ul>
                </li>
                <li>
                    <a href="#creating-a-world-scene" aria-label="Creating a World Scene">Creating a World Scene</a><ul>
                        
                <li>
                    <a href="#adding-nodes-to-the-world-scene" aria-label="Adding nodes to the World scene">Adding nodes to the World scene</a></li>
                <li>
                    <a href="#editing-nodes-in-the-world-scene" aria-label="Editing nodes in the World scene">Editing nodes in the World scene</a><ul>
                        
                <li>
                    <a href="#bin-staticbody2d-node" aria-label="Bin (StaticBody2D) node">Bin (StaticBody2D) node</a></li>
                <li>
                    <a href="#collisionpolygon2d-node" aria-label="CollisionPolygon2D node">CollisionPolygon2D node</a></li>
                <li>
                    <a href="#spawnpath-path2d-node" aria-label="SpawnPath (Path2D) node">SpawnPath (Path2D) node</a></li>
                <li>
                    <a href="#spawner-pathfollow2d-node" aria-label="Spawner (PathFollow2D) node">Spawner (PathFollow2D) node</a></li>
                <li>
                    <a href="#animationplayer-node" aria-label="AnimationPlayer node">AnimationPlayer node</a></li>
                <li>
                    <a href="#drops-node2d-node" aria-label="Drops (Node2D) node">Drops (Node2D) node</a></li>
                <li>
                    <a href="#dropline-line2d-node" aria-label="DropLine (Line2D) node">DropLine (Line2D) node</a></li>
                <li>
                    <a href="#pointer-area2d-node" aria-label="Pointer (Area2D) node">Pointer (Area2D) node</a></li>
                <li>
                    <a href="#collisionshape2d-node" aria-label="CollisionShape2D node">CollisionShape2D node</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#creating-a-drop-scene" aria-label="Creating a Drop scene">Creating a Drop scene</a><ul>
                        
                <li>
                    <a href="#adding-nodes-to-the-drop-scene" aria-label="Adding nodes to the Drop scene">Adding nodes to the Drop scene</a></li>
                <li>
                    <a href="#editing-nodes-in-the-drop-scene" aria-label="Editing nodes in the Drop scene">Editing nodes in the Drop scene</a><ul>
                        
                <li>
                    <a href="#drop-rigidbody2d-root-node" aria-label="Drop (RigidBody2D) root node">Drop (RigidBody2D) root node</a></li>
                <li>
                    <a href="#sprite-node" aria-label="Sprite node">Sprite node</a></li>
                <li>
                    <a href="#collisionshape2d-node-child-of-root-node-drop" aria-label="CollisionShape2D node (child of root node Drop)">CollisionShape2D node (child of root node Drop)</a></li>
                <li>
                    <a href="#pointablearea-area2d-node" aria-label="PointableArea (Area2D) node">PointableArea (Area2D) node</a></li>
                <li>
                    <a href="#collisionshape2d-child-of-pointablearea-node" aria-label="CollisionShape2D (child of PointableArea) node">CollisionShape2D (child of PointableArea) node</a></li>
                <li>
                    <a href="#animationplayer-node-1" aria-label="AnimationPlayer node">AnimationPlayer node</a></li>
                <li>
                    <a href="#stickablearea-area2d-node" aria-label="StickableArea (Area2D) node">StickableArea (Area2D) node</a></li>
                <li>
                    <a href="#collisionshape2d-node-1" aria-label="CollisionShape2D node">CollisionShape2D node</a></li></ul>
                </li>
                <li>
                    <a href="#controlling-the-drop-scene-with-a-script" aria-label="Controlling the Drop scene with a script">Controlling the Drop scene with a script</a></li></ul>
                </li>
                <li>
                    <a href="#creating-a-scene-that-inherits-from-the-drop-scene" aria-label="Creating a scene that inherits from the Drop scene">Creating a scene that inherits from the Drop scene</a></li>
                <li>
                    <a href="#controlling-a-world-scene-with-scripts" aria-label="Controlling a World Scene with Scripts">Controlling a World Scene with Scripts</a></li>
                <li>
                    <a href="#executing-the-scene-to-check-the-operation" aria-label="Executing the scene to check the operation">Executing the scene to check the operation</a></li>
                <li>
                    <a href="#sample-games" aria-label="Sample Games">Sample Games</a></li>
                <li>
                    <a href="#conclusion" aria-label="Conclusion">Conclusion</a></li>
                <li>
                    <a href="#%e3%83%aa%e3%83%b3%e3%82%af" aria-label="リンク">リンク</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>In this tutorial, we will explain how to create a type of game in which you trace and erase drops of the same color, like the very popular Disney Tsum Tsum smartphone game.</p>
<p><a href="https://www.disney.co.jp/fc/tsum/tsum_en.html" target="_blank">LINE: Disney Tsum Tsum</a>
</p>
<br>
<p>Note that the final project file in this tutorial is located in the <a href="https://github.com/msnsk/ConnectColors.git" target="_blank">GitHub repository</a>
. You can directly check the project by downloading the .zip file and importing the &ldquo;project.godot&rdquo; file in the &ldquo;End&rdquo; folder with the Godot Engine.</p>
<br>
<blockquote>
<p><em><strong><span style="color:salmon">Environment</span>
</strong><br>
This tutorial was created in the following environment</em><br>
・<em>Godot version: <strong>3.4.4</strong></em><br>
・<em>Computer OS version: <strong>macOS 11.6.5</strong></em></p>
</blockquote>
<blockquote>
<p><em><strong><span style="color:salmon">Memo:</span>
</strong><br>
Please also use the following article to help you start creating your game.<br>
<a href="https://www.peanuts-code.com/en/tutorials/gd0001_download/">Downloading Godot</a>
<br>
<a href="https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/">Project Manager of Godot</a>
</em></p>
</blockquote>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="creating-a-new-project">Creating a new project<a hidden class="anchor" aria-hidden="true" href="#creating-a-new-project">#</a></h1>
<p>First, we would like you to start Godot Engine and create a new project. Let&rsquo;s name the project &ldquo;Connect Colors Start.</p>
<br>
<h2 id="editing-project-settings">Editing project settings<a hidden class="anchor" aria-hidden="true" href="#editing-project-settings">#</a></h2>
<p>Once the editor appears, let&rsquo;s editing the settings for the entire project.</p>
<p>First, set the display size for the game. In this case, we set the aspect ratio to 16:9, assuming a smartphone screen in portrait orientation.</p>
<ol>
<li>Open the &ldquo;Project&rdquo; menu &gt; &ldquo;Project Settings&rdquo;<br>
In the &ldquo;General&rdquo; tab, search for &ldquo;window&rdquo; and select &ldquo;Display&rdquo; &gt; &ldquo;Window&rdquo; in the sidebar.</li>
<li>In the &ldquo;Size&rdquo; section, change the values of the following items
<ul>
<li>Width: 144</li>
<li>Height: 256</li>
<li>Test Width: 288</li>
<li>Test Height: 512<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img1.png" alt="Display - Window - Size"  />
</li>
</ul>
</li>
<li>Change the values of the following items in the &ldquo;Stretch&rdquo; section
<ul>
<li>Mode: 2d</li>
<li>Aspect: keep<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img2.png" alt="Display - Window - Stretch"  />
</li>
</ul>
</li>
</ol>
<br>
<p>Keep the &ldquo;Project Settings&rdquo; open and configure the settings to substitute the mouse for the smartphone&rsquo;s touch operation.</p>
<ol>
<li>Search for &ldquo;mouse&rdquo; in the &ldquo;General&rdquo; tab and select &ldquo;Input Devices&rdquo; &gt; &ldquo;Pointing&rdquo; in the sidebar.</li>
<li>Check &ldquo;On&rdquo; for &ldquo;Emulate Touch From Mouse&rdquo;.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img2.1.png" alt="Input Devices - Pointing - Emulate Touch From Mouse"  />
</li>
</ol>
<br>
<p>With the &ldquo;Project Settings&rdquo; window open, add an action to the input map that corresponds to a smartphone touch operation.</p>
<ol>
<li>Switch to the &ldquo;Input Map&rdquo; tab and add &ldquo;tap&rdquo; to the action.</li>
<li>Add a left mouse click to the &ldquo;tap&rdquo; action.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img2.2.png" alt="Inputmap - action - tap"  />
</li>
</ol>
<br>
<h2 id="downloading-and-importing-the-assets">Downloading and importing the assets<a hidden class="anchor" aria-hidden="true" href="#downloading-and-importing-the-assets">#</a></h2>
<p>Next, let&rsquo;s download assets from KENNEY and use them. The asset pack we will be using is called <strong><a href="https://www.kenney.nl/assets/pixel-platformer" target="_blank">Pixel Platformer</a>
</strong>. I can&rsquo;t help but be thankful for this wonderful free resource.</p>
<p>Once downloaded, drag and drop the &ldquo;characters_packed.png&rdquo; file from the &ldquo;Tilemap&rdquo; folder into the editor&rsquo;s file system dock to import it into your project.</p>
<p>Immediately after importing the file, the image will look blurry, so follow the steps below to correct this.</p>
<ol>
<li>Make the imported asset file selected in the file system dock<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img3.png" alt="select the asset"  />
</li>
<li>Select [Presets] &gt; [2D Pixel] in the import dock.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img4.png" alt="select 2D Pixel"  />
</li>
<li>Click the &ldquo;Re-import&rdquo; button at the bottom.<br>
! <a href="/images/tutorials/gd0011_connect_colors/img5.png">click reinport</a>
</li>
</ol>
<p>This will give the image the edgy look characteristic of pixel art.<br>
<br></p>
<hr>
<h1 id="creating-a-world-scene">Creating a World Scene<a hidden class="anchor" aria-hidden="true" href="#creating-a-world-scene">#</a></h1>
<p>The first scene is to set the stage for the game. Let&rsquo;s create a scene named &ldquo;World&rdquo;.</p>
<ol>
<li>Select &ldquo;Scene&rdquo; menu &gt; &ldquo;New Scene&rdquo;.</li>
<li>Select &ldquo;Other Node&rdquo; in &ldquo;Generate Root Node&rdquo;.</li>
<li>Select a node of the &ldquo;Node2D&rdquo; class as the root node.</li>
<li>Rename the root node to &ldquo;World&rdquo;.</li>
<li>Save the scene at this point. Create a folder and save the scene with the file path &ldquo;res://World/World.tscn&rdquo;.<br>
<br></li>
</ol>
<h2 id="adding-nodes-to-the-world-scene">Adding nodes to the World scene<a hidden class="anchor" aria-hidden="true" href="#adding-nodes-to-the-world-scene">#</a></h2>
<p>Let&rsquo;s add nodes so that the world scene will look like the following scene tree. We will edit the properties of each node in turn later, so we can leave them as they are.</p>
<ul>
<li>World (Node2D)
<ul>
<li>Bin (StaticBody2D)
<ul>
<li>CollisionPolygon2D</li>
</ul>
</li>
<li>SpawnPath (Path2D)
<ul>
<li>Spawner (PathFollow2D)</li>
</ul>
</li>
<li>AnimationPlayer</li>
<li>Drops (Node2D)</li>
<li>DropsLine (Line2D)</li>
<li>Pointer (Area2D)
<ul>
<li>CollisionShape2D</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The scene tree dock should now look like this.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img6.png" alt="scene tree dock"  />
</p>
<br>
<h2 id="editing-nodes-in-the-world-scene">Editing nodes in the World scene<a hidden class="anchor" aria-hidden="true" href="#editing-nodes-in-the-world-scene">#</a></h2>
<h3 id="bin-staticbody2d-node">Bin (StaticBody2D) node<a hidden class="anchor" aria-hidden="true" href="#bin-staticbody2d-node">#</a></h3>
<p>This node does not need to be edited. StaticBody2D is used in 2D games for obstacles and walls that do not move. In this case, we will use it as a container (bin) to keep falling drops (objects to be erased by tracing) on the screen.<br>
<br></p>
<h3 id="collisionpolygon2d-node">CollisionPolygon2D node<a hidden class="anchor" aria-hidden="true" href="#collisionpolygon2d-node">#</a></h3>
<p>This node is used to add a collision shape to the parent node &ldquo;Bin&rdquo;. The collision shape is created by dotting in the 2D workspace.</p>
<ol>
<li>
<p>Activate grid snap in the 2D workspace toolbar.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img7.png" alt="enable grid snap"  />
</p>
</li>
<li>
<p>Basically, the collision shape is formed by dotting around the outside of the window frame. However, the upper part of the shape should be shifted by -64px from the y-coordinate 0 of the display size. This is to generate a drop outside the upper part of the window frame and make it fall. The lower part of the collision polygon is placed slightly inside the display size and slanted so that the drop will roll.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img8.png" alt="create collisoin shape"  />
</p>
</li>
</ol>
<br>
<h3 id="spawnpath-path2d-node">SpawnPath (Path2D) node<a hidden class="anchor" aria-hidden="true" href="#spawnpath-path2d-node">#</a></h3>
<p>This node is used to move the position of the spawning drop along the x-axis at all times. This makes the drops fall from the different positions at the top of the screen every time. Let&rsquo;s place it outside the top of the window frame.</p>
<ol>
<li>Create a straight path parallel to the x-axis by hitting two points (16, -32) and (128, -32) on the 2D workspace.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img9.png" alt="create path2d path"  />
</li>
</ol>
<br>
<h3 id="spawner-pathfollow2d-node">Spawner (PathFollow2D) node<a hidden class="anchor" aria-hidden="true" href="#spawner-pathfollow2d-node">#</a></h3>
<p>This node moves along the path of the &ldquo;SpawnPath&rdquo; node edited earlier. This node should always move back and forth along the path to generate a drop from this node&rsquo;s position. This will ensure that the drop&rsquo;s position when spawned always changes within the path of the &ldquo;SpawnPath&rdquo; node.</p>
<ol>
<li>Turn off the property &ldquo;Rotate&rdquo;.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img10.png" alt="disable property rotate"  />
</li>
</ol>
<br>
<h3 id="animationplayer-node">AnimationPlayer node<a hidden class="anchor" aria-hidden="true" href="#animationplayer-node">#</a></h3>
<p>This node is used to move &ldquo;Spawner&rdquo; back and forth along the path of &ldquo;SpawnPath&rdquo; at all times. The &ldquo;Spawner&rdquo; property &ldquo;Unit Offset&rdquo; represents the starting point of the parent node &ldquo;SpawnPath&rdquo; path as 0 and the end point as 1. In other words, by constantly changing this property between 0 and 1, it is possible to make a round trip on the path.</p>
<ol>
<li>Create an animation as follows
<ul>
<li>Animation name: move_spawn_pos</li>
<li>Auto play on load: Enabled</li>
<li>Animation length (seconds): 0.4<br>
*0.4 seconds to move back and forth along the path</li>
<li>Animation looping: Enabled</li>
<li>Track:
<ul>
<li>Spawner node - unit_offset property
<ul>
<li>Time: 0 / Value: 0 / Easing: 1.00</li>
<li>Time: 0.2 / Value: 1 / Easing: 1.00<br>
*Wrap from the end of the path at 0.2 seconds<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img11.png" alt="create animation"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br>
<h3 id="drops-node2d-node">Drops (Node2D) node<a hidden class="anchor" aria-hidden="true" href="#drops-node2d-node">#</a></h3>
<p>No property editing is required for this node. Its role is just a container for multiple instances generated from a drop scene (to be created later).</p>
<br>
<h3 id="dropline-line2d-node">DropLine (Line2D) node<a hidden class="anchor" aria-hidden="true" href="#dropline-line2d-node">#</a></h3>
<p>This node is used to draw a line connecting drops of the same color when they are traced. This makes it easier to visually check which drop has been traced and how many drops are connected.</p>
<ol>
<li>
<p>Change the property &ldquo;Width&rdquo; to 2. This is the thickness of the line.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img12.png" alt="Line2D Width property"  />
</p>
</li>
<li>
<p>Change the properties &ldquo;Capping&rdquo; &gt; &ldquo;Joint Mode&rdquo;, &ldquo;Begin Cap Mode&rdquo;, and &ldquo;End Cap Mode&rdquo; to &ldquo;Round&rdquo; respectively. This will make the shape of the joints, tips, and ends of the lines round.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img13.png" alt="Line2D Capping each property"  />
</p>
</li>
</ol>
<br>
<h3 id="pointer-area2d-node">Pointer (Area2D) node<a hidden class="anchor" aria-hidden="true" href="#pointer-area2d-node">#</a></h3>
<p>There is no need to edit this node. The purpose of this node is to follow the finger on a smartphone or the mouse cursor on a PC to detect when a drop is touched. Later, we will write code in the script to make the position of this node always the same as the position of the finger or mouse cursor.</p>
<br>
<h3 id="collisionshape2d-node">CollisionShape2D node<a hidden class="anchor" aria-hidden="true" href="#collisionshape2d-node">#</a></h3>
<p>This node gives the parent node &ldquo;Pointer&rdquo; a collision shape. Considering the operation of touching the drop with a finger or mouse cursor, the collision should be as small a shape as possible.</p>
<ol>
<li>Apply the &ldquo;New CircleShape2D&rdquo; resource to the property &ldquo;Shape&rdquo;.</li>
<li>Set the value of the property &ldquo;Radius&rdquo; of the applied resource &ldquo;CircleShape2D&rdquo; to 1.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img14.png" alt="CollisionShape2D Shape, Radius"  />
</li>
</ol>
<br>
<p>This completes the editing of each node.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="creating-a-drop-scene">Creating a Drop scene<a hidden class="anchor" aria-hidden="true" href="#creating-a-drop-scene">#</a></h1>
<p>From here, we will create a &ldquo;Drop&rdquo; scene to be erased by tracing the same color.</p>
<ol>
<li>Select &ldquo;Scene&rdquo; menu &gt; &ldquo;New Scene&rdquo;.</li>
<li>Select &ldquo;Other Node&rdquo; in &ldquo;Generate Root Node&rdquo;.</li>
<li>Select a node of the &ldquo;RigidBody2D&rdquo; class as the root node.</li>
<li>Rename the root node to &ldquo;Drop&rdquo;.</li>
<li>Save the scene at this point. Create a folder and save the scene with the file path &ldquo;res://Drops/Drop.tscn&rdquo;.</li>
</ol>
<br>
<h2 id="adding-nodes-to-the-drop-scene">Adding nodes to the Drop scene<a hidden class="anchor" aria-hidden="true" href="#adding-nodes-to-the-drop-scene">#</a></h2>
<p>Let&rsquo;s add nodes so that the Drop scene will look like the following scene tree. We will edit the properties of each node in turn later, so we can leave them as they are.</p>
<ul>
<li>Drop (RigidBody2D)
<ul>
<li>Sprite</li>
<li>CollisionShape2D</li>
<li>PointableArea (Area2D)
<ul>
<li>CollisionShape2D</li>
</ul>
</li>
<li>AnimationPlayer</li>
<li>StickableArea (Area2D)
<ul>
<li>CollisionShape2D</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The scene tree dock should now look like this.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img15.png" alt="Drop scene tree"  />
</p>
<br>
<h2 id="editing-nodes-in-the-drop-scene">Editing nodes in the Drop scene<a hidden class="anchor" aria-hidden="true" href="#editing-nodes-in-the-drop-scene">#</a></h2>
<h3 id="drop-rigidbody2d-root-node">Drop (RigidBody2D) root node<a hidden class="anchor" aria-hidden="true" href="#drop-rigidbody2d-root-node">#</a></h3>
<p>We want the &ldquo;Drop&rdquo; scene to automatically fall or bounce according to gravity when its instance is added to the &ldquo;World&rdquo; scene. The RigidBody2D class automatically reproduces such physics-based movements according to the node&rsquo;s properties.</p>
<ol>
<li>In the inspector dock, apply a new &ldquo;PhysicsMaterial&rdquo; resource to the &ldquo;Physics Material Override&rdquo; property.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img16.png" alt="Physics Material Override"  />
</li>
<li>Set the property &ldquo;Gravity Scale&rdquo; to 2. The purpose is to make the drop fall a little faster.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img17.png" alt="Gravity Scale"  />
</li>
<li>Go to Node Dock &gt; Groups tab and create and add a group named &ldquo;Drops&rdquo;. This is important for the conditional branching process in the script.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img17.1.png" alt="Node dock - groups - Drops"  />
</li>
</ol>
<br>
<h3 id="sprite-node">Sprite node<a hidden class="anchor" aria-hidden="true" href="#sprite-node">#</a></h3>
<p>This node is used to give &ldquo;Drop&rdquo; a texture (appearance). The method of setting the texture of the sprite by specifying the range of textures you want to use from the sprite sheet that contains many textures imported at the beginning of this section is used.</p>
<ol>
<li>In the inspector, drag the resource &ldquo;res://characters_packed.png&rdquo; from the file system to the property &ldquo;Texture&rdquo; and apply it.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img18.png" alt="Sprite node Texture property"  />
</li>
<li>Turn on &ldquo;Region&rdquo; &gt; &ldquo;Enabled&rdquo;.<br>
<img loading="lazy" src="/images/tutorials/gd_common/node/Sprite/property/Region%3eEnabled=On.png" alt="Region &amp;gt; Enabled = on"  />
</li>
<li>Open the <strong>Texture Region</strong> panel at the bottom of the editor.<br>
<img loading="lazy" src="/images/tutorials/gd_common/panel/TextureRegion/tab_name.png" alt="Region panel"  />

<ol>
<li>Expand the panel by clicking on the expand icon to make it easier to work with.<br>
<img loading="lazy" src="/images/tutorials/gd_common/panel/TextureRegion/expand_icon.png" alt="Expand Region pannel"  />
</li>
<li>Select &ldquo;grid snap&rdquo; under &ldquo;snap mode&rdquo; at the top of the panel.<br>
<img loading="lazy" src="/images/tutorials/gd_common/panel/TextureRegion/snap_mode=grid_snap.png" alt="Region pannel &amp;gt; choose grid snap"  />
</li>
<li>Set the &ldquo;step&rdquo; at the top of the panel to 24px 24px. This will make the grid the same size as one texture on the sprite sheet.<br>
<img loading="lazy" src="/images/tutorials/gd_common/panel/TextureRegion/step=24x24.png" alt="Region pannel &amp;gt; input grid step"  />
</li>
<li>Drag on the sprite sheet to select a range of two different textures with a green drop (looks like an alien).<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img19.png" alt="Select region"  />
</li>
</ol>
</li>
<li>Go back to the inspector and change the value of the &ldquo;Animation&rdquo; &gt; &ldquo;Hframes&rdquo; property to 2.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img20.png" alt="animation - hframes property"  />
</li>
</ol>
<br>
<h3 id="collisionshape2d-node-child-of-root-node-drop">CollisionShape2D node (child of root node Drop)<a hidden class="anchor" aria-hidden="true" href="#collisionshape2d-node-child-of-root-node-drop">#</a></h3>
<p>This node provides a collision shape to the root node &ldquo;Drop&rdquo;. The root node is a &ldquo;RigidBody2D&rdquo; class, one of the physical bodies. The collision setting is essential to determine collisions between physical bodies. With this collision shape, it is assumed that multiple instances of the &ldquo;Drop&rdquo; scene will collide with each other and pile up on the screen.</p>
<ol>
<li>Apply a new &ldquo;CircleShape2D&rdquo; resource to the &ldquo;Shape&rdquo; property.</li>
<li>Furthermore, change the value of the property &ldquo;Radius&rdquo; of that resource to 12. This creates a circular collision shape with a radius of 12 px, which can be intuitively sized in the 2D workspace.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img21.png" alt="CollisionShape2D - Shape - CircleShape2D"  />
 <img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img22.png" alt="CollisionShape2D - 2DWrokSpace"  />
</li>
</ol>
<br>
<h3 id="pointablearea-area2d-node">PointableArea (Area2D) node<a hidden class="anchor" aria-hidden="true" href="#pointablearea-area2d-node">#</a></h3>
<p>This node is used to detect when a finger or mouse cursor touches or leaves its drop. No property editing is required, but a group needs to be added.</p>
<ol>
<li>Go to the Node Dock &gt; Groups tab and create and add a group named &ldquo;Pointable&rdquo;. This is used to determine if the finger or mouse cursor is touching the drop.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img23.png" alt="Node dock - Groups - Pointable"  />
</li>
</ol>
<br>
<h3 id="collisionshape2d-child-of-pointablearea-node">CollisionShape2D (child of PointableArea) node<a hidden class="anchor" aria-hidden="true" href="#collisionshape2d-child-of-pointablearea-node">#</a></h3>
<p>This node provides a collision shape to the parent &ldquo;PointableArea&rdquo;. It should fit slightly inside the collision shape of the root node &ldquo;Drop&rdquo; so that it does not react when a finger or mouse cursor touches the edge of the drop.</p>
<ol>
<li>Apply a new &ldquo;CircleShape2D&rdquo; resource to the property &ldquo;Shape&rdquo;.</li>
<li>In addition, change the value of the property &ldquo;Radius&rdquo; of the resource to 10. The collision shape is one size smaller than the collision shape of the root node &ldquo;Drop&rdquo;. You can intuitively adjust the size in the 2D workspace.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img24.png" alt="CollisionShape2D - Shape - CircleShape2D"  />
 <img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img25.png" alt="CollisionShape2D - 2DWrokSpace"  />
*The collision shape for this node is an inner circle</li>
</ol>
<br>
<h3 id="animationplayer-node-1">AnimationPlayer node<a hidden class="anchor" aria-hidden="true" href="#animationplayer-node-1">#</a></h3>
<p>The first step here is to create a waiting animation for the drop when the finger or mouse cursor is not touching it, and a blinking animation to show it after it is touched. This node will be used to play those animation resources that we have created.</p>
<ol>
<li>Create a drop waiting animation as follows.
<ul>
<li>Animation name: idle</li>
<li>Auto play on load: Enabled</li>
<li>Animation length (seconds): 1</li>
<li>Animation looping: Enabled</li>
<li>Track:
<ul>
<li>Sprite node - frame property
<ul>
<li>Time: 0 / Value: 0 / Easing: 1.00</li>
<li>Time: 0.5 / Value: 1 / Easing: 1.00</li>
</ul>
</li>
<li>Sprite node - modulate property
<ul>
<li>Time: 0 / Value: #ffffff / Easing: 1.00<br>
*A track to ensure that after modulate is changed in a &ldquo;flash&rdquo; animation, it is reset to its initial value when the &ldquo;idle&rdquo; animation is played.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img26.gif" alt="2D Workspace - idle animation"  />
 <img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img26.png" alt="Animation panel - idle animation"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Create an animation of the drop in standby as follows.
<ul>
<li>Animation name: flash</li>
<li>Auto play on load: disabled</li>
<li>Animation length (seconds): 0.2</li>
<li>Animation looping: Enabled</li>
<li>Track:
<ul>
<li>Sprite node - frame property
<ul>
<li>Time: 0 / Value: 0 / Easing: 1.00</li>
<li>Time: 0.1 / Value: 1 / Easing: 1.00</li>
</ul>
</li>
<li>Sprite node - modulate property
<ul>
<li>Time: 0 / Value: #ffffff / Easing: 1.00</li>
<li>Time: 0.1 / Value: #64ffffff / Easing: 1.00<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img27.gif" alt="2D Workspace - flash animation"  />
 <img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img27.png" alt="Animation panel - flash animation"  />
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ol>
<br>
<h3 id="stickablearea-area2d-node">StickableArea (Area2D) node<a hidden class="anchor" aria-hidden="true" href="#stickablearea-area2d-node">#</a></h3>
<p>This node is used to detect if a drop is in contact with another drop. No property editing is required, but a group needs to be added.</p>
<ol>
<li>Go to Node Dock &gt; Groups tab and create and add a group named &ldquo;Stickable&rdquo;. This is important to determine if the drop is &ldquo;adjacent&rdquo; = &ldquo;connectable&rdquo; when you trace your finger or mouse cursor over it.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img28.png" alt="Node dock - Groups - Stickable"  />
</li>
</ol>
<br>
<h3 id="collisionshape2d-node-1">CollisionShape2D node<a hidden class="anchor" aria-hidden="true" href="#collisionshape2d-node-1">#</a></h3>
<p>This node provides a collision shape for the parent &ldquo;StickableArea&rdquo; node. It is used to detect adjacent drops. In order to detect contact between adjacent drops, the collision shape should be slightly larger than the collision shape of the root node &ldquo;Drop&rdquo;.</p>
<ol>
<li>Apply a new &ldquo;CircleShape2D&rdquo; resource to the property &ldquo;Shape&rdquo;.</li>
<li>In addition, change the value of the property &ldquo;Radius&rdquo; of the resource to 18. This creates a circular collision shape with a radius of 18 px. It can also be intuitively sized in the 2D workspace.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img29.png" alt="CollisionShape2D - Shape - CircleShape2D"  />
 <img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img30.png" alt="CollisionShape2D - 2DWrokSpace"  />
*The collision shape for this node is the outermost circle.</li>
</ol>
<br>
<p>This completes the editing of each node.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<h2 id="controlling-the-drop-scene-with-a-script">Controlling the Drop scene with a script<a hidden class="anchor" aria-hidden="true" href="#controlling-the-drop-scene-with-a-script">#</a></h2>
<p>Now let&rsquo;s attach a new script to the root node &ldquo;Drop&rdquo;. Create a script file with the file path &ldquo;res://Drops/Drop.gd&rdquo;.</p>
<p>Edit the script as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Drop.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">RigidBody2D</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Properties to assign each color name to a scene that inherits from the Drop scene</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">var</span> color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># define stuck_drop as an array to contain adjacent drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> stuck_drops <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reference to the AnimationPlayer node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> anim_player <span style="color:#f92672">=</span> <span style="color:#f92672">$</span><span style="color:#a6e22e">AnimationPlayer</span>
</span></span></code></pre></div><br>
<p>Next, we will use signals from the Area2D node of the &ldquo;StickableArea&rdquo; node. Let&rsquo;s connect the &ldquo;area_entered&rdquo; signal, which is sent out when a drop makes contact with an adjacent drop, and the &ldquo;area_exited&rdquo; signal, which is sent out when a drop that was in contact with a drop leaves the area, to the script.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img31.png" alt="StickableArea - signals"  />
</p>
<p>Edit the method generated when you connect each signal as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### Drop.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called when a StickableArea is collided by another area (Area2D)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_StickableArea_area_entered(area):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the area was collided by a Stickable group node</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> area<span style="color:#f92672">.</span>is_in_group(<span style="color:#e6db74">&#34;Stickable&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Define its parent node as drop</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> drop <span style="color:#f92672">=</span> area<span style="color:#f92672">.</span>get_parent()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Add drop to the array stuck_drops</span>
</span></span><span style="display:flex;"><span>		stuck_drops<span style="color:#f92672">.</span>append(drop)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called when another area (Area2D) leaves StickableArea</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_StickableArea_area_exited(area):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the area that was exited from the collision shape is a Stickable group node</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> area<span style="color:#f92672">.</span>is_in_group(<span style="color:#e6db74">&#34;Stickable&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Define its parent node as drop</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> drop <span style="color:#f92672">=</span> area<span style="color:#f92672">.</span>get_parent()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Check the index of a drop in the array stuck_drops</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> index <span style="color:#f92672">=</span> stuck_drops<span style="color:#f92672">.</span>find(drop)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Remove the element (adjacent Drop) corresponding to index from the array stuck_drops</span>
</span></span><span style="display:flex;"><span>		stuck_drops<span style="color:#f92672">.</span>remove(index)
</span></span></code></pre></div><br>
<p>This completes the editing of &ldquo;Drop.gd&rdquo;.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="creating-a-scene-that-inherits-from-the-drop-scene">Creating a scene that inherits from the Drop scene<a hidden class="anchor" aria-hidden="true" href="#creating-a-scene-that-inherits-from-the-drop-scene">#</a></h1>
<p>The &ldquo;Drop&rdquo; scene we just created is a template for the scene we will create. We will now create a scene that inherits the &ldquo;Drop&rdquo; scene in the number of drop colors. There are five drop colors: blue, green, orange, red, and yellow. Let&rsquo;s start with the <strong>Blue</strong> drop as an example.</p>
<ol>
<li>Select &ldquo;Scene&rdquo; menu &gt; &ldquo;New Inherited Scene.</li>
<li>Select &ldquo;Drops.tscn&rdquo; as the source scene for the minor injury.</li>
<li>After the scene is generated, rename the root node to &ldquo;Blue.<br>
*The name of this root node should match the color of each drop.</li>
<li>Save the scene. Save the file path as &ldquo;res://Drops/BlueDrop.tscn&rdquo;.</li>
<li>With the root node &ldquo;BlueDrop&rdquo; selected in the scene tree dock, set the value of &ldquo;Color&rdquo; in Script Variables to &ldquo;Blue&rdquo; in the inspector.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img32.png" alt="BlueDrop - Color property"  />
</li>
<li>Select the &ldquo;Sprite&rdquo; node in the scene tree dock. Open the &ldquo;Texture Area&rdquo; panel at the bottom of the editor and select the two <strong>blue</strong> alien textures.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img33.png" alt="Sprite - Texture Region"  />
</li>
</ol>
<p>This completes the &ldquo;BlueDrop&rdquo; scene. Follow the same procedure to create the remaining four color scenes. The name of the root node of the scene and its property &ldquo;Color&rdquo; are as follows.</p>
<ul>
<li>Root node: GreenDrop / Color: Green</li>
<li>Root node: OrangeDrop / Color: Orange</li>
<li>Root node: RedDrop / Color: Red</li>
<li>Root node: YellowDrop / Color: Yellow</li>
</ul>
<p>When we have created an inheritance scene with a total of five drop colors, our work is complete.<br>
<br></p>
<hr>
<h1 id="controlling-a-world-scene-with-scripts">Controlling a World Scene with Scripts<a hidden class="anchor" aria-hidden="true" href="#controlling-a-world-scene-with-scripts">#</a></h1>
<p>We are now approaching the end of this tutorial. Let&rsquo;s attach a script to the root node of the &ldquo;World&rdquo; scene. Create the file path as &ldquo;res://World/World.tscn&rdquo;.</p>
<p>When the script editor opens, first define the properties as follows</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Node2D</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Define drop_scenes as an array with 5 preloaded color drop scenes as elements</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> drop_scenes <span style="color:#f92672">=</span> [
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://Drops/BlueDrop.tscn&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://Drops/GreenDrop.tscn&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://Drops/OrangeDrop.tscn&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://Drops/RedDrop.tscn&#34;</span>),
</span></span><span style="display:flex;"><span>	preload(<span style="color:#e6db74">&#34;res://Drops/YellowDrop.tscn&#34;</span>)
</span></span><span style="display:flex;"><span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Minimum number of connecting drops that can be erased</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> (<span style="color:#a6e22e">int</span>) <span style="color:#66d9ef">var</span> min_erasable <span style="color:#f92672">=</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Maximum number of drops displayed on the screen</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> (<span style="color:#a6e22e">int</span>) <span style="color:#66d9ef">var</span> max_drops <span style="color:#f92672">=</span> <span style="color:#ae81ff">50</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True if the game is currently playing</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> is_playing <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span><span style="color:#75715e"># True if finger on the screen or left mouse click is held down</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> is_holding <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Referencing the drop where the finger or mouse cursor is currently held</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> pointed_drop
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Color of the drops currently connected</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> active_color <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Array for list of held (traced and connected) drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">var</span> held_drops <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A reference to the Spawner node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> spawner <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>SpawnPath<span style="color:#f92672">/</span>Spawner
</span></span><span style="display:flex;"><span><span style="color:#75715e"># A reference to the Drops node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> drops <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>Drops
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reference to a DropsLine node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> drops_line <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>DropsLine
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Reference to a Pointer node</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">onready</span> <span style="color:#66d9ef">var</span> pointer <span style="color:#f92672">=</span> <span style="color:#f92672">$</span>Pointer
</span></span></code></pre></div><br>
<p>Next, let&rsquo;s code the maximum number of drops (50) to fall from the top of the screen immediately after the game starts.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called when all nodes in the World scene have been loaded</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _ready():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Built-in method that will randomize the output of random methods every time.</span>
</span></span><span style="display:flex;"><span>	randomize()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Loop for the number of max_drops (50)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> _i <span style="color:#f92672">in</span> range(max_drops):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method (defined later) to generate drops</span>
</span></span><span style="display:flex;"><span>		spawn_drop()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Wait 0.025 seconds after one drop is spawned, then spawn the next drop</span>
</span></span><span style="display:flex;"><span>		yield(get_tree()<span style="color:#f92672">.</span>create_timer(<span style="color:#ae81ff">0.025</span>), <span style="color:#e6db74">&#34;timeout&#34;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method to spawn a drop</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> spawn_drop():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Reference to a scene file for a randomly chosen color drop from the array drop_scenes</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> drop_scene <span style="color:#f92672">=</span> drop_scenes[randi() <span style="color:#f92672">%</span> drop_scenes<span style="color:#f92672">.</span>size()]
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Instantiate a drop scene of the selected color</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> drop <span style="color:#f92672">=</span> drop_scene<span style="color:#f92672">.</span>instance()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Make the position of the drop instance the same as the position of the Spawner node</span>
</span></span><span style="display:flex;"><span>	drop<span style="color:#f92672">.</span>position <span style="color:#f92672">=</span> spawner<span style="color:#f92672">.</span>global_position
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Add the drop instance to the World scene</span>
</span></span><span style="display:flex;"><span>	drops<span style="color:#f92672">.</span>add_child(drop)
</span></span></code></pre></div><p>Now let&rsquo;s run the project and watch the behavior of 50 drops of randomly determined colors falling at the start of the game. Note that when we run the project for the first time, we should set the main scene as &ldquo;World.tscn&rdquo;.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img34.gif" alt="run project"  />
</p>
<br>
<p>The position of the &ldquo;Pointer (Area2D)&rdquo; node will be coded to follow the position of the finger or mouse cursor, and the &ldquo;PointableArea (Area2D)&rdquo; of the &ldquo;Drop&rdquo; instance will detect when the finger or mouse cursor overlaps with it and when it leaves it. The &ldquo;Pointer&rdquo; node detects this and sends a signal. Let&rsquo;s use this to code the process when tracing a drop.</p>
<p>Select &ldquo;Pointer&rdquo; in the scene tree dock and connect the signals &ldquo;area_entered(area: Area2D)&rdquo; and &ldquo;area_exited(area: Area2D)&rdquo; to the script in the Node Dock &gt; Signal tab.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img35.png" alt="connect signals"  />
</p>
<p>Edit the automatically generated methods as follows.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called when a Pointer node touches another area (Area2D object)</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_Pointer_area_entered(area):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if area is a node in the &#34;Pointable&#34; group</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> area<span style="color:#f92672">.</span>is_in_group(<span style="color:#e6db74">&#34;Pointable&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Pass a reference to the parent node of area (Drop node) to pointed_drop</span>
</span></span><span style="display:flex;"><span>		pointed_drop <span style="color:#f92672">=</span> area<span style="color:#f92672">.</span>get_parent()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If drop in hold is non-zero..</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># and the last drop in the hold is adjacent to pointed_drop</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> held_drops<span style="color:#f92672">.</span>empty() <span style="color:#f92672">and</span> held_drops[<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">in</span> pointed_drop<span style="color:#f92672">.</span>stuck_drops:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call a method to update drop connections (defined later)</span>
</span></span><span style="display:flex;"><span>			update_drops_connection()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method called when the area (Area2D object) that the Pointer node was touching leaves</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _on_Pointer_area_exited(area):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If area is a node in the &#34;Pointable&#34; group</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> area<span style="color:#f92672">.</span>is_in_group(<span style="color:#e6db74">&#34;Pointable&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Set pointed_drop to null</span>
</span></span><span style="display:flex;"><span>		pointed_drop <span style="color:#f92672">=</span> null
</span></span></code></pre></div><br>
Next, use the built-in function `_process` to execute the method you want to call every frame (60FPS).
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Built-in function: called at 60FPS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> _process(_delta):
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Update the Points property of the DropsLine node</span>
</span></span><span style="display:flex;"><span>	update_drops_line()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Receive finger or mouse cursor actions</span>
</span></span><span style="display:flex;"><span>	get_input()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method to update the Points property of a DropsLine node..</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># to change the position of a drop as it rolls or falls</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> update_drops_line():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If there is at least one drop in hold</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> held_drops<span style="color:#f92672">.</span>empty():
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Create a temporary Vector2 array</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">var</span> temp_array <span style="color:#f92672">=</span> PoolVector2Array()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Loop over held drops</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> drop <span style="color:#f92672">in</span> held_drops:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Add the position of the drop in hold to the temporary array</span>
</span></span><span style="display:flex;"><span>			temp_array<span style="color:#f92672">.</span>append(drop<span style="color:#f92672">.</span>position)
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Update the points property of the DropsLine node to the position of the currently held drop</span>
</span></span><span style="display:flex;"><span>		drops_line<span style="color:#f92672">.</span>points <span style="color:#f92672">=</span> temp_array
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods to process finger or mouse input</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> get_input():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Always set the Pointer node position to the finger or mouse cursor position</span>
</span></span><span style="display:flex;"><span>	pointer<span style="color:#f92672">.</span>position <span style="color:#f92672">=</span> get_global_mouse_position()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If you press the screen with a finger or the left mouse button</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>is_action_just_pressed(<span style="color:#e6db74">&#34;tap&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method (defined later) to hold the drop</span>
</span></span><span style="display:flex;"><span>		hold_drop()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method (to be defined later) to update the connection of drops on hold</span>
</span></span><span style="display:flex;"><span>		update_drops_connection()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the finger leaves the screen or the left mouse button is up</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">Input</span><span style="color:#f92672">.</span>is_action_just_released(<span style="color:#e6db74">&#34;tap&#34;</span>):
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method (defined later) to erase drops on hold</span>
</span></span><span style="display:flex;"><span>		erase_drops()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Call a method to release holds (to be defined later).</span>
</span></span><span style="display:flex;"><span>		release_drops()<span style="color:#f92672">.</span>
</span></span></code></pre></div><p>The following methods, which are called in the method <code>get_input</code> defined in the above code, will be defined in order after this.</p>
<ul>
<li><code>hold_drop</code></li>
<li><code>update_drops_connection</code></li>
<li><code>erase_drops</code></li>
<li><code>release_drops</code></li>
</ul>
<br>
<p>First, let&rsquo;s define the methods <code>hold_drop</code> and <code>update_drops_connection</code> to be called when a drop is held down.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods to hold a drop while it is being held</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> hold_drop():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If finger or mouse cursor is touching the drop</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> pointed_drop:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Hold the drop.</span>
</span></span><span style="display:flex;"><span>		is_holding <span style="color:#f92672">=</span> true
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method to update drop connections</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> update_drops_connection():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If drop is holding and ..</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># if finger or mouse cursor is over the drop</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> is_holding <span style="color:#f92672">and</span> pointed_drop:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If is_holding and pointed_drop: # if held_drops.empty(): # if held_drops.empty()</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> held_drops<span style="color:#f92672">.</span>empty():
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># If the color of the drop to be held is currently set to the color of the finger or ..</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># color of the drop that the mouse cursor is currently touching</span>
</span></span><span style="display:flex;"><span>			active_color <span style="color:#f92672">=</span> pointed_drop<span style="color:#f92672">.</span>color
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># Call a method (to be defined later) to connect drops</span>
</span></span><span style="display:flex;"><span>			connect_drop()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># If the color of the drop currently touched by the finger or mouse cursor..</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># is the same as the color of the drop being connected</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">elif</span> pointed_drop<span style="color:#f92672">.</span>color <span style="color:#f92672">==</span> active_color:
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># If the number of drops in hold is greater than or equal to 2 and ..</span>
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># if the current touched drop is the same as the second last drop in the hold</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> held_drops<span style="color:#f92672">.</span>size() <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">2</span> <span style="color:#f92672">and</span> pointed_drop <span style="color:#f92672">==</span> held_drops[<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>]:
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># Call a method (defined later) to disconnect</span>
</span></span><span style="display:flex;"><span>				disconnect_drop()
</span></span><span style="display:flex;"><span>            <span style="color:#75715e"># If the drop currently touched by the finger or mouse cursor is not in the held drops</span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">elif</span> <span style="color:#f92672">not</span> pointed_drop <span style="color:#f92672">in</span> held_drops:
</span></span><span style="display:flex;"><span>                <span style="color:#75715e"># Call a method (defined later) to connect the drops</span>
</span></span><span style="display:flex;"><span>				connect_drop()
</span></span></code></pre></div><p>If you look inside the method <code>update_drops_connection</code> defined here, you will see that there are further undefined <code>connect_drop</code> and <code>disconnect_drop</code> methods called.</p>
<p>Let&rsquo;s continue to define these methods.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods to connect drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> connect_drop():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Play the animation &#34;flash&#34; on the currently touched drop</span>
</span></span><span style="display:flex;"><span>	pointed_drop<span style="color:#f92672">.</span>anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;flash&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Add the currently touched drop to the list of held drops</span>
</span></span><span style="display:flex;"><span>	held_drops<span style="color:#f92672">.</span>append(pointed_drop)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Add the position of the currently touched drop to the Points property of the DropsLine node</span>
</span></span><span style="display:flex;"><span>	drops_line<span style="color:#f92672">.</span>add_point(pointed_drop<span style="color:#f92672">.</span>position)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods to disconnect drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> disconnect_drop():
</span></span><span style="display:flex;"><span>	<span style="color:#75715e"># Define the last drop in the list of held drops as canceled_drop</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> canceled_drop <span style="color:#f92672">=</span> held_drops<span style="color:#f92672">.</span>pop_back()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Stop animation (&#34;flash&#34;) in AnimationPlayer of canceled_drop</span>
</span></span><span style="display:flex;"><span>	canceled_drop<span style="color:#f92672">.</span>anim_player<span style="color:#f92672">.</span>stop()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Play the animation (&#34;idle&#34;) in AnimationPlayer of canceled_drop</span>
</span></span><span style="display:flex;"><span>	canceled_drop<span style="color:#f92672">.</span>anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;idle&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Remove the last point from the Points property of a DropsLine node</span>
</span></span><span style="display:flex;"><span>	drops_line<span style="color:#f92672">.</span>remove_point(drops_line<span style="color:#f92672">.</span>get_point_count() <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>)
</span></span></code></pre></div><br>
<p>Within the <code>get_input</code> method, we will now define two methods, <code>erase_drops</code> and <code>release_drops</code>, which will be called when the finger leaves the screen or the left mouse button is raised.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#75715e">### World.gd ###</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Methods to erase drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> erase_drops():
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># If the number of held drops is less than the minimum number of drops that can be erased</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> held_drops<span style="color:#f92672">.</span>size() <span style="color:#f92672">&lt;</span> min_erasable:
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Immediately terminate the method</span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Duplicate the array of held drops as the value of variable erased</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">var</span> erased <span style="color:#f92672">=</span> held_drops<span style="color:#f92672">.</span>duplicate()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Loop over the elements of array erased</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> drop <span style="color:#f92672">in</span> erased:
</span></span><span style="display:flex;"><span>         <span style="color:#75715e"># Release the drops in array erased</span>
</span></span><span style="display:flex;"><span>		drop<span style="color:#f92672">.</span>queue_free()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Create a new drop for each erased drop</span>
</span></span><span style="display:flex;"><span>		spawn_drop()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Wait 0.1 seconds (then next loop)</span>
</span></span><span style="display:flex;"><span>		yield(get_tree()<span style="color:#f92672">.</span>create_timer(<span style="color:#ae81ff">0.1</span>), <span style="color:#e6db74">&#34;timeout&#34;</span>)	
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Method to release holds from drops</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> release_drops(): 
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Release status while holding</span>
</span></span><span style="display:flex;"><span>	is_holding <span style="color:#f92672">=</span> false
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Loop over the elements of the array of held drops</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> drop <span style="color:#f92672">in</span> held_drops:
</span></span><span style="display:flex;"><span>       <span style="color:#75715e"># Stop animation &#34;flash&#34;</span>
</span></span><span style="display:flex;"><span>		drop<span style="color:#f92672">.</span>anim_player<span style="color:#f92672">.</span>stop()
</span></span><span style="display:flex;"><span>        <span style="color:#75715e"># Play the animation &#34;idle&#34;.</span>
</span></span><span style="display:flex;"><span>		drop<span style="color:#f92672">.</span>anim_player<span style="color:#f92672">.</span>play(<span style="color:#e6db74">&#34;idle&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Empty the array of held drops</span>
</span></span><span style="display:flex;"><span>	held_drops<span style="color:#f92672">.</span>clear()
</span></span><span style="display:flex;"><span>    <span style="color:#75715e"># Empty the Points property of the DropsLine node</span>
</span></span><span style="display:flex;"><span>	drops_line<span style="color:#f92672">.</span>clear_points()
</span></span></code></pre></div><br>
<p>This completes the editing of the &ldquo;World.gd&rdquo; script.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="executing-the-scene-to-check-the-operation">Executing the scene to check the operation<a hidden class="anchor" aria-hidden="true" href="#executing-the-scene-to-check-the-operation">#</a></h1>
<p>Finally, let&rsquo;s run a scene to see if it reproduces the movement as expected.<br>
<img loading="lazy" src="/images/tutorials/gd0011_connect_colors/img36.gif" alt="run project finally"  />
</p>
<p>Have you confirmed that the following is as expected?</p>
<ul>
<li>When the left mouse button is pressed while the mouse cursor is near the center of the drop, the drop is held and a &ldquo;flash&rdquo; animation is played.</li>
<li>If you hold down the left mouse button and trace the adjacent drop, the &ldquo;DropsLine&rdquo; will be connected.</li>
<li>If you return to the drop you have traced, the hold is released and the &ldquo;idle&rdquo; animation returns to playback.</li>
<li>When three or more drops are traced, all drops in the hold disappear when the left mouse button is released.</li>
<li>If less than three drops are traced, releasing the left mouse button does not erase the drops, only releases the hold.</li>
</ul>
<br>
<hr>
<h1 id="sample-games">Sample Games<a hidden class="anchor" aria-hidden="true" href="#sample-games">#</a></h1>
<p>We have prepared a sample game that further brushes up the project created in this tutorial.</p>

<video controls autoplay loop muted playsinline aria-label='Sample game demo' style='ZgotmplZ'>

    <source src="/images/tutorials/gd0011_connect_colors/img37.mp4" type="video/mp4">
    
    Your browser does not support the video tag.
</video>

<br>
<p>The project file is located in <a href="https://github.com/msnsk/ConnectColors.git" target="_blank">GitHub repository</a>
, so please download the .zip file from there and you can check it by importing the &ldquo;project.godot&rdquo; file in the &ldquo;Sample&rdquo; folder with the Godot Engine.</p>
<br>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901"
     crossorigin="anonymous"></script>
<p><ins class="adsbygoogle"
style="display:block; text-align:center;"
data-ad-layout="in-article"
data-ad-format="fluid"
data-ad-client="ca-pub-4952908839423901"
data-ad-slot="9419515863"></ins></p>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
<hr>
<h1 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h1>
<p>In this tutorial, We created a puzzle game in which you have to trace the same color to make it disappear. It is the kind of game that one cannot help but feel addicted to. Let me summarize the key points in the creation of the game.</p>
<ul>
<li>Use RigidBody2D for the drop and let the engine do the physics.</li>
<li>Add Area2D class nodes to the drop to detect fingers and cursors, and Area2D class nodes to detect adjacent drops, and use their signals.</li>
<li>Always follow the Area2D class node to the finger or mouse cursor and use the signal of this node for contact with the drop.</li>
</ul>
<br>
<hr>
<h1 id="リンク">リンク<a hidden class="anchor" aria-hidden="true" href="#リンク">#</a></h1>
<ul>
<li><a href="https://www.kenney.nl/assets" target="_blank">KENNEY</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/tutorials/physics/physics_introduction.html" target="_blank">Godot Docs: Physics introduction</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_rigidbody2d.html" target="_blank">Godot Docs: RigidBody2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/tutorials/physics/using_area_2d.html" target="_blank">Godot Docs: Using Area2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_area2d.html" target="_blank">Godot Docs: Area2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_collisionshape2d.html" target="_blank">Godot Docs: CollisionShape2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_collisionpolygon2d.html" target="_blank">Godot Docs: CollisionPolygon2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_path2d.html" target="_blank">Godot Docs: Path2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_pathfollow2d.html" target="_blank">Godot Docs: PathFollow2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_line2d.html" target="_blank">Godot Docs: Line2D</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/tutorials/animation/introduction.html" target="_blank">Godot Docs: Introduction to the animation features</a>
</li>
<li><a href="https://docs.godotengine.org/en/stable/classes/class_animationplayer.html" target="_blank">Godot Docs: AnimationPlayer</a>
</li>
</ul>
<!-- **UPDATE** -->
<!-- 2022/05/25 新規作成 -->


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.peanuts-code.com/en/tags/godot/">Godot</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/godotengine/">GodotEngine</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/gamedev/">GameDev</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/tutorials/">Tutorials</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/2d/">2D</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/connectingmatchingcolors/">ConnectingMatchingColors</a></li>
      <li><a href="https://www.peanuts-code.com/en/tags/puzzle/">Puzzle</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://www.peanuts-code.com/en/tutorials/gd0010_2d_grid_based_movement/">
    <span class="title">Next Page »</span>
    <br>
    <span>2D grid-based movement in Godot</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on twitter"
        href="https://twitter.com/intent/tweet/?text=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f&amp;hashtags=Godot%2cGodotEngine%2cGameDev%2cTutorials%2c2D%2cConnectingMatchingColors%2cPuzzle">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f&amp;title=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot&amp;summary=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f&title=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on whatsapp"
        href="https://api.whatsapp.com/send?text=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Connecting matching colors puzzle game in Godot on telegram"
        href="https://telegram.me/share/url?text=Connecting%20matching%20colors%20puzzle%20game%20in%20Godot&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0011_connect_colors%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.peanuts-code.com/en/">Peanuts Code</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    menu.scrollLeft = localStorage.getItem("menu-scroll-position");
    menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
