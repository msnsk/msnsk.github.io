<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2D Path Finding in Godot3 | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,Godot3,2D,PathFinding"><meta name=description content="This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination. Up to Godot 3.4, the Navigation node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using Navigation Server, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development."><meta name=author content="Gobo"><link rel=canonical href=https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0016_2d_path_finding/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="2D Path Finding in Godot3"><meta property="og:description" content="This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination. Up to Godot 3.4, the Navigation node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using Navigation Server, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development."><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0016_2d_path_finding/img0.gif"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2022-08-16T23:10:00+09:00"><meta property="article:modified_time" content="2022-08-16T23:10:00+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0016_2d_path_finding/img0.gif"><meta name=twitter:title content="2D Path Finding in Godot3"><meta name=twitter:description content="This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination. Up to Godot 3.4, the Navigation node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using Navigation Server, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorials","item":"https://www.peanuts-code.com/en/tutorials/"},{"@type":"ListItem","position":2,"name":"2D Path Finding in Godot3","item":"https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2D Path Finding in Godot3","name":"2D Path Finding in Godot3","description":"This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination. Up to Godot 3.4, the Navigation node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using Navigation Server, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development.","keywords":["GameDev","GodotEngine","Godot3","2D","PathFinding"],"articleBody":"This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination.\nUp to Godot 3.4, the Navigation node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using Navigation Server, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development. This article is intended for users of Godot 3.5 or later. Users of Godot version 3.4 or earlier should take note.\nThe final project file for this tutorial is available at GitHub repository . You can also check the project directly by downloading the .zip file and importing the “project.godot” file in the “End” folder with the Godot Engine.\nEnvironment Godot version: 3.5\nComputer OS: macOS 11.6.5\nBasic Articles You may also find the following articles useful.\nDownloading Godot Project Manager of Godot Preparation Creating a new project Start Godot Engine and create a new project. You can name your project as you like. If you can’t think of one, let’s call it “2D Path Finding Start”.\nUpdating project settings Once the editor appears, we should update project settings for the entire project.\nFirst, set the display size for the game.\nOpen the “Project” menu \u003e “Project Settings\nSelect “Display” \u003e “Window” from the sidebar of the “General” tab. In the “Size” section, change the values of the following items. Width: 512 Height: 320 Test Width: 768 Test Height: 480 In the “Stretch” section, change the values of the following items Mode: 2d Aspect: keep Switch to the “Input Map” tab and add “move_to” to the action. Assign the “left mouse button” to the “move_to” action.\nDownloading and importing assets Next, let’s download assets from KENNEY’s site and use them. The asset pack we will use is called 1-Bit Pack . I can’t help but be thankful for this wonderful free material.\nOnce downloaded, drag and drop the “colored-transparent_packed.png” file from the “Tilesheet” folder into the editor’s file system dock to import it into your project.\nImmediately after importing the file, the image will look blurry, so correct this by following the steps below.\nMake the imported asset file selected in the file system dock. Select “Preset” \u003e “2D Pixel” in the import dock.\nClick the “Re-import” button at the bottom.\nThe image should now have the edges characteristic of pixel art. The imported tileset will be used later for tile maps and player character textures.\nCreating a World scene Creating a new World scene The first step is to create a “World” scene to prepare the game world. 1. Select “Scene” menu \u003e “New Scene”.\nSelect “Other Node” in “Generate Root Node”. When the root node of the “Node2D” class is generated, rename it to “World”. Save the scene. Create a folder and save the scene with the file path “res://Scene/World.tscn”. Adding and editing a TileMap node Adding a “TileMap” node to the “World” root node.\nIn the inspector, apply the “New TileSet” resource to the “TileSet” property of the “TileMap” node.\nClick on the applied “TileSet” resource to open the TileSet panel at the bottom of the editor.\nAdd imported KENNEY “res://colored-transparent_packed.png” resource file by dragging it to the left sidebar of the TileSet panel.\nSelect the added texture sheet and prepare the following three single tiles.\nTile for the character’s pathway.\n*Tiles with this navigation area set are the target of the pathfinding. Use gravel tiles Collision polygon: not required Navigation polygon: Needed Tiles that characters do not pass through but do not collide with each other.\n*Use as a margin so that the character does not get caught by tree tiles with collision geometry when moving along the path. Use grass texture Collision polygons: not needed Navigation polygons: not needed Tiles that characters cannot pass through and have collision detection.\n*Use as impassable obstacles during path finding. Use tree texture Collision polygon: Needed Navigation polygons: not required Select “TileMap” in the scene dock and create a tile map on the 2D workspace. Below is a sample. It is OK if the gravel tiles provide some pathways (navigation areas).\nIt is important to note, however, that once you place the tree tiles for obstacles, be sure to place the grass tiles for margins around them. Otherwise, the character will try to pass right through the wooden tiles when moving along the path, and will get stuck and not be able to move. This is something I would like to see improved in future Godot updates. I haven’t implemented the character yet, but I’ll show you how it behaves first.\nAdding and editing the Line2D node The “Line2D” node is used to make the explored and determined path visually clear.\nAdd a “Line2D” node to the “World” root node.\nIn the inspector, set the “Width” property of the “Line2D” node to.\nCreating a Player scene From here, we will create a scene for the player character to move along the found path.\nCreating a new Player scene Select “Scene” menu \u003e “New Scene”. Select “Other Node” in “Generate Root Node”. When the root node of the “KinematicBody2D” class is created, rename it to “Player”. Save the scene. Create a folder and save the scene with the file path “res://Scenes/Player.tscn”. Adding and editing nodes to the Player scene Add nodes to the “Player” root node to make the scene tree look like this.\nPlayer(KinematicBody2D) Sprite CollisionShape2D NavigationAgent2D Each node is then edited.\nSprite node This node is used to apply texture (appearance) to the “Player” scene.\nIn the inspector, apply the “res://colored-transparent_packed.png” resource downloaded from KENNEY’s site to the “Texture” property.\nEnable the “Region” \u003e “Enabled” property.\nOpen the Texture Region panel at the bottom of the editor and select the region of the player character texture of your choice. For this tutorial, we used a sheriff-like texture.\nCollisionShape2D node This node sets the collision shape for the “Player” root node of the KinematicBody2D class.\nApply a new “RectangleShape2D” resource to the “Shape” property in the inspector. Set the value of the “Extents” property of the applied “RectangleShape2D” resource to (x: 6, y: 6).\nOn the 2D workspace it will look like this.\nNavigationAgent2D node This node was introduced in Godot 3.5 as a backported node from Godot 4. A parent node (in this case, the “Player” node) adding this node to its children will automatically avoid collisions with obstacles and will be able to move by path finding. It seems to be controlled by being registered in the navigation map of the default World2D. For more details, please refer to Godot’s official online documentation.\nGodot Docs: NavigationAgent2D Check the “Avoidance” \u003e “Avoidance Enabled” property to enable it. This controls collision avoidance with obstacles and enables path finding. Set the “Avoidance” \u003e “Radius” property to 8. This property is the size of this agent. We set the radius to 8 px to match the size of the texture on the “Sprite” node. Set the “Avoidance” \u003e “Neighbor Dist” property to 8. This property sets the distance at which other agents will be detected. Later we will create other object scenes that will automatically track the Player and add NavigationAgent2D nodes to them as well, but they will not need to be detected until they are right next to the Player, so we set this property to 8 as well as the agent’s. Set the “Avoidance” \u003e “Max Speed” property to 40. This is the maximum movement speed of the agents. Adding an instance of the Player scene to the World scene Add an instance node of the “Player.tscn” scene created here to the “World” scene. It is OK if the scene dock of the “World” scene looks like the following.\nAttaching and editing scripts to the Player node After returning to the “Player” scene, attach a script to the “Player” root node and write the code. Create a script with the file path “res://Scripts/Player.gd”. When the script editor opens, write the following code.\n###Player.gd### extends KinematicBody2D # Player speed export (float) var speed = 40 # Refer to the Line2D node in the World scene onready var line: Line2D = get_node(\"... /Line2D\") # Refer to the NavigationAgent2D node onready var nav_agent = $NavigationAgent2D # Built-in function called when a node is loaded into the scene tree func _ready(): # Set the current location as a temporary destination by NavigationAgent2D nav_agent.set_target_location(global_position) # Built-in physics process function called every frame func _physics_process(delta): # If the last position of the found path has not been reached if not nav_agent.is_navigation_finished(): # Get the next navigable position without obstacles var next_loc = nav_agent.get_next_location() # Get the current Player location var current_pos = global_position # Calculate velocity from direction and speed for next possible location var velocity = current_pos.direction_to(next_loc) * speed # Pass velocity to NavigationAgent2D's collision avoidance algorithm # send velocity_computed signal as soon as velocity adjustment is complete nav_agent.set_velocity(velocity) # When the input map action move_to (left mouse button) is pressed if Input.is_action_pressed(\"move_to\"): # call a method to start path finding find_path() # Define after this # Method to start path finding func find_path(): # Set the current mouse position as the next destination by NavigationAgent2D nav_agent.set_target_location(get_global_mouse_position()) # Get the next possible location to move to without obstacles nav_agent.get_next_location() # Pass the information of the path generated by NavigationAgent2D to the path of Line2D in the World scene # Both data types are PoolVector2Array, so they can be passed as is line.points = nav_agent.get_nav_path() Now connect three different signals of the “NavigationAgent2D” node to this script.\nThe first one is the “velocity_computed” signal. This signal is sent when NavigationAgent2D has completed adjusting its velocity to avoid collisions with surrounding objects.\nThe second is the “target_reached” signal. This signal is sent out when the next moveable position on the path to the final destination is reached.\nThe third signal is “navigation_finished. This signal is sent out when the final destination on the route is reached.\nAfter connecting each signal to the script, write the necessary code in the generated method. The code is as follows.\n###Player.gd### # Called with a signal that is sent out when NavigationAgent2D has finished adjusting its velocity func _on_NavigationAgent2D_velocity_computed(safe_velocity): # Apply the adjusted velocity to the Player's movement move_and_slide(safe_velocity). # Called with a signal that is sent when the NavigationAgent2D reaches its next moveable position. func _on_NavigationAgent2D_target_reached(): # On the path of a Line2D node in the World scene... # reflect the updated path of the NavigationAgent2D line.points = nav_agent.get_nav_path() # Called with a signal that is sent out when NavigationAgent2D reaches the last destination in its path func _on_NavigationAgent2D_navigation_finished(): # Reset the points of the path of the Line2D node in the World scene to 0 line.points.resize(0) This completes the editing of the “Player.gd” script. At this point, try running the project once. If you are running the project for the first time, select “res://Scenes/World.tscn” as the main scene.\nLet’s click on the tile map appropriately and check if “Player” moves along the path search without any problem.\nCreating an Animal scene In the “Player” scene, we implemented path finding using the mouse position as the destination. From now on, we will implement path finding for another object that moves with the moving “Player” as its destination. However, there is no need to worry, since most of the work is the same.\nLet’s make multiple animal objects gather around the “Player” instance object we just created. We will now create an “Animal” scene for the animal objects.\nCreating a new Animal scene Select “Scene” menu \u003e “New Scene”. Select “Other Node” in “Create Root Node”. When the root node of the “KinematicBody2D” class is created, rename it to “Animal”. Save the scene. Create a folder and save the scene with the file path “res://Scenes/Animal.tscn”. Adding and editing nodes in the Animal scene Add some nodes to the “Animal” root node and make the scene tree as follows.\nAnimal(KinematicBody2D) Sprite CollisionShape2D NavigationAgent2D PathTimer(Timer)\nThen edit each node.\nSprite node This node is used to give texture (appearance) to the “Animal” scene.\nIn the inspector, apply the “res://colored-transparent_packed.png” resource downloaded from the KENNEY website to the “Texture” property.\nEnable the “Region” \u003e “Enabled” property.\nOpen the texture region panel at the bottom of the editor and select a region for the six animal textures.\nSet the value of the “Animation” \u003e “Hframes” property to 6. Since the texture area selected earlier contains 6 types of animals, the value is set to be 1 frame for each type of animal. The default frame is set to 0 (first frame) in the “Frame” property.\nCollisionShape2D node This node sets the collision shape for the “Animal” root node of the KinematicBody2D class.\nApply the “New RectangleShape2D” resource to the “Shape” property in the inspector. Set the value of the “Extents” property of the applied “RectangleShape2D” resource to (x: 8, y: 8).\nOn the 2D workspace it will look like this.\nNavigationAgent2D node In the “Animal” scene, as in the “Player” scene, this node is used to avoid collisions with obstacles and to enable movement by path finding.\nEnable the “Avoidance” \u003e “Avoidance Enabled” property. Leave the “Avoidance” \u003e “Radius” property at the default value of 10. The size of the texture is slightly larger than the size of the Sprite node’s texture, so that the animals are slightly spaced apart. The “Avoidance” \u003e “Neighbor Dist” property was also left at the default value of 500. Since the width of the display size is set to 512 px, setting it to 500 will allow other agents to be detected from one end of the display to the other and avoid collisions. The goal is to reduce the number of instances of the “Animal” scene that will crowd around the “Player” instance and thus reduce the possibility of being stuck in the scene.\nPathTimer(Timer) Node This node is used to periodically update the position of the moving destination (instance node of “Player”).\nThe “Wait Time” property is left at the default value of 1. The “One Shot” property should also be left at the default value of 1 and disabled. This will time out repeatedly every second. Enable the “Autostart” property. The timer will now start automatically when this node is loaded into the scene tree.\nAttaching and editing scripts to the “Animal” node From here, we will attach a script to the “Animal” root node and write code to control the “Animal” scene. Create a script with the file path “res://Scripts/Animal.gd”. When the script editor opens, code as follows.\n###Animal.gd### extends KinematicBody2D # Speed of Animal var speed = 30 # Variable to assign the object that will be the destination of the route var target # Reference to the Sprite node onready var sprite = $Sprite # Reference to NavigationAgent2D onready var nav_agent = $NavigationAgent2D # Same as Player.gd below func _ready(): nav_agent.set_target_location(global_position) func _physics_process(_delta): if not nav_agent.is_navigation_finished(): var current_pos = global_position var next_loc = nav_agent.get_next_location() var velocity = current_pos.direction_to(next_loc) * speed nav_agent.set_velocity(velocity) # If the x-coordinate of the destination object is smaller than the x-coordinate of the animal node # flip the Texture image of the Sprite node sprite.flip_h = target.global_position.x \u003c global_position.x Two signals must then be connected to the script. The first one is to connect the “velocity_computed” signal of the “NavigationAgent2D” node as in the “Player” scene.\nOnce connected, write a move_and_slide method in the generated _on_NavigationAgent2D_velocity_computed method to control the movement of the “Animal” node.\n###Animal.gd### # Called with a signal that is sent out when NavigationAgent2D has finished adjusting its velocity func _on_NavigationAgent2D_velocity_computed(safe_velocity): # Apply the adjusted velocity to the Player's movement move_and_slide(safe_velocity) The next step is to connect the “timeout” signal of the “PathTimer” node to the script.\nOnce connected, within the generated method _on_PathTimer_timeout, describe the set_target_location method of the “NavigationAgent2D” node to set the location of the destination object (in this case “Player”) as the destination during path finding. Now, at the time of timeout every second, the position of the latest “Player” instance node is acquired and the path finding is performed with that as the destination.\n###Animal.gd### func _on_PathTimer_timeout(): nav_agent.set_target_location(target.global_position) The “Animal.gd” script is now complete.\nAdding an Animals node to the “World” scene Add a node of class Node2D to the “World” scene as a container for multiple instances of the “Animals” scene and rename it to “Animals”. Adding instances of “Animal” will be done by script after this.\nAttach a script to the “World” node and edit it Attach a script to the “World” root node and edit it, adding multiple instances of “Animal”. Save the script with the file path as “res://Scripts/World.gd” and when the script editor opens, write the code as follows.\n###World.gd### extends Node2D # Reference to preloaded Animal scene file const animal_scn = preload(\"res://Scenes/Animal.tscn\") # Number of Animal instances export (int) var head_count = 12 # Reference to TileMap node onready var tile_map = $TileMap # Reference to the Player node onready var player = $Player # Reference the Animals(Node2D) node onready var animals = $Animals func _ready(): # Randomize seed for random number generation function randomize(). # Get an array of ID 9 tiles on the TileMap # IDs can be found by clicking the (i) icon in the tileset panel edit screen var cells = tile_map.get_used_cells_by_id(9) # Loop for the number of Animal instances for i in head_count : # Get random index within the number of tiles with ID 9 var random_index = randi() % cells.size() # Get a tile from the ID 9 tiles that fits the random value var spawn_tile = cells.pop_at(random_index) # loop if the tile has already been spawned from the array and the array is not yet empty while spawn_tile == null and not cells.empty(): # Generate a random value within the range of the number of ID9 liles again random_index = randi() % cells.size() # Spawn a tile from the ID9 tiles again that fits the random value spawn_tile = cells.pop_at(random_index) # Place an Animal instance on the acquired tile... # by calling a method to create an Animal instance spawn_animal(spawn_tile) # method to spawn Animal instance func spawn_animal(spawn_tile): # Get the position of the tile passed as argument, shifted by (8, 8) to the x,y coordinates of the tile var spawn_pos = tile_map.map_to_world(spawn_tile, true) + Vector2(8, 8) # Create an instance of the Animal scene var animal = animal_scn.instance() # Position the Animal instance on the tile passed as argument animal.position = spawn_pos # Assign and reference the Player node to the destination property of the Animal instance animal.target = player.global_position # Randomly determine the texture of the Sprite node of the Animal instance animal.get_node(\"Sprite\").frame = randi() % animal.get_node(\"Sprite\").hframes # Make the Animal instance a child of the Animals node animals.add_child(animal) The “World.gd” script is now complete. Let’s run the project and see how multiple instances of “Animal” approach “Player”.\nThe number of head_count properties defined in the script can be easily edited in the inspector, since it comes with the export keyword. I increased the number of “Animal” instances to 100 as a test, but it got stuck at the end. If “Animal” were a zombie, it would be a hellish scene.\nSample game I have prepared a sample game that further brushes up the project created in this tutorial.\nYour browser does not support the video tag. The project file of the sample game is located in GitHub repository , so please download the .zip file from there. You can check it by importing the “project.godot” file in the “Sample” folder with the Godot Engine.\nGame Rules: Left mouse click to move to the mouse cursor position Spacebar to shoot the gun in the direction of the mouse cursor. When you run out of bullets, reload 12 bullets after reloading animation. When you hit an enemy, you lose a heart. When you run out of all 5 hearts, the game is over. The darker the color of an enemy, the more lives it has and the slower its speed is. The lighter the color, the less lives it has and the faster its speed is. The player’s score is the number of jewels that dropped when an enemy is defeated. Conclusion In this tutorial, we implemented the new Navigation Server added in Godot 3.5.\nFor a simple 2D route search like this one, it was relatively easy to implement using NavigationAgent2D, although there are still some itchy points, such as the problem of getting caught in a corner when using a TileMap without a margin tile. However, we hope that this will be improved in future updates.\nLet me summarize the key points of this project.\nWhen using TileMap, be sure to set navigation to movable tiles. When using TileMap, make a margin with tiles that are set only in the area so that they do not get caught in corners. You can also define a navigation area using the NavigationPolygonInstance node, which we did not use in this case. Adding a “NavigationAgent2D” node to the child of the object you want to move. When controlling path finding in scripts, write the code with the following order in mind: set the final destination, obtain the next possible moving position, adjust the speed to avoid collision, and move at the adjusted speed. References Official Article - Navigation Server for Godot 4.0 Official Article - Godot 3.5: Can't stop won't stop Godot Doc - NavigationAgent2D YouTube - Godot 3.5 | NavigationAgent2D YouTube - Godot 3.5 is Out, and it's SICK! Real-time pathfinding, new tween animations, and more GitHub - godotengine/godot - issue #60546 ","wordCount":"3627","inLanguage":"en","image":"https://www.peanuts-code.com/images/tutorials/gd0016_2d_path_finding/img0.gif","datePublished":"2022-08-16T23:10:00+09:00","dateModified":"2022-08-16T23:10:00+09:00","author":{"@type":"Person","name":"Gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/en/tutorials/gd0016_2d_path_finding/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/en/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/en/ title=Home><span>Home</span></a></li><li><a href=https://www.peanuts-code.com/en/portfolio/ title="Published Games"><span>Published Games</span></a></li><li><a href=https://www.peanuts-code.com/en/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://www.peanuts-code.com/en/tutorials/ title=Tutorials><span>Tutorials</span></a></li><li><a href=https://www.peanuts-code.com/en/about/ title=About><span>About</span></a></li><li><a href=https://www.peanuts-code.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/en/>Home</a>&nbsp;»&nbsp;<a href=https://www.peanuts-code.com/en/tutorials/>Tutorials</a></div><h1 class=post-title>2D Path Finding in Godot3</h1><div class=post-meta><span title='2022-08-16 23:10:00 +0900 +0900'>2022-08-16</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;Gobo&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/ja/tutorials/gd0016_2d_path_finding/>Ja</a></li></ul></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/en/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/en/tags/2d/>2D</a></li><li><a href=https://www.peanuts-code.com/en/tags/pathfinding/>PathFinding</a></li></ul><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on x" href="https://x.com/intent/tweet/?text=2D%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2c2D%2cPathFinding"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&amp;title=2D%20Path%20Finding%20in%20Godot3&amp;summary=2D%20Path%20Finding%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&title=2D%20Path%20Finding%20in%20Godot3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on whatsapp" href="https://api.whatsapp.com/send?text=2D%20Path%20Finding%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on telegram" href="https://telegram.me/share/url?text=2D%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on ycombinator" href="https://news.ycombinator.com/submitlink?t=2D%20Path%20Finding%20in%20Godot3&u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0016_2d_path_finding/img0.gif alt="2D Path Finding in Godot"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#preparation aria-label=Preparation>Preparation</a><ul><li><a href=#creating-a-new-project aria-label="Creating a new project">Creating a new project</a></li><li><a href=#updating-project-settings aria-label="Updating project settings">Updating project settings</a></li><li><a href=#downloading-and-importing-assets aria-label="Downloading and importing assets">Downloading and importing assets</a></li></ul></li><li><a href=#creating-a-world-scene aria-label="Creating a World scene">Creating a World scene</a><ul><li><a href=#creating-a-new-world-scene aria-label="Creating a new World scene">Creating a new World scene</a></li><li><a href=#adding-and-editing-a-tilemap-node aria-label="Adding and editing a TileMap node">Adding and editing a TileMap node</a></li><li><a href=#adding-and-editing-the-line2d-node aria-label="Adding and editing the Line2D node">Adding and editing the Line2D node</a></li></ul></li><li><a href=#creating-a-player-scene aria-label="Creating a Player scene">Creating a Player scene</a><ul><li><a href=#creating-a-new-player-scene aria-label="Creating a new Player scene">Creating a new Player scene</a></li><li><a href=#adding-and-editing-nodes-to-the-player-scene aria-label="Adding and editing nodes to the Player scene">Adding and editing nodes to the Player scene</a><ul><li><a href=#sprite-node aria-label="Sprite node">Sprite node</a></li><li><a href=#collisionshape2d-node aria-label="CollisionShape2D node">CollisionShape2D node</a></li><li><a href=#navigationagent2d-node aria-label="NavigationAgent2D node">NavigationAgent2D node</a></li></ul></li><li><a href=#adding-an-instance-of-the-player-scene-to-the-world-scene aria-label="Adding an instance of the Player scene to the World scene">Adding an instance of the Player scene to the World scene</a></li><li><a href=#attaching-and-editing-scripts-to-the-player-node aria-label="Attaching and editing scripts to the Player node">Attaching and editing scripts to the Player node</a></li></ul></li><li><a href=#creating-an-animal-scene aria-label="Creating an Animal scene">Creating an Animal scene</a><ul><li><a href=#creating-a-new-animal-scene aria-label="Creating a new Animal scene">Creating a new Animal scene</a></li><li><a href=#adding-and-editing-nodes-in-the-animal-scene aria-label="Adding and editing nodes in the Animal scene">Adding and editing nodes in the Animal scene</a><ul><li><a href=#sprite-node-1 aria-label="Sprite node">Sprite node</a></li><li><a href=#collisionshape2d-node-1 aria-label="CollisionShape2D node">CollisionShape2D node</a></li><li><a href=#navigationagent2d-node-1 aria-label="NavigationAgent2D node">NavigationAgent2D node</a></li><li><a href=#pathtimertimer-node aria-label="PathTimer(Timer) Node">PathTimer(Timer) Node</a></li></ul></li><li><a href=#attaching-and-editing-scripts-to-the-animal-node aria-label="Attaching and editing scripts to the &amp;ldquo;Animal&amp;rdquo; node">Attaching and editing scripts to the &ldquo;Animal&rdquo; node</a></li><li><a href=#adding-an-animals-node-to-the-world-scene aria-label="Adding an Animals node to the &amp;ldquo;World&amp;rdquo; scene">Adding an Animals node to the &ldquo;World&rdquo; scene</a></li><li><a href=#attach-a-script-to-the-world-node-and-edit-it aria-label="Attach a script to the &amp;ldquo;World&amp;rdquo; node and edit it">Attach a script to the &ldquo;World&rdquo; node and edit it</a></li></ul></li><li><a href=#sample-game aria-label="Sample game">Sample game</a><ul><ul><li><a href=#game-rules aria-label="Game Rules:">Game Rules:</a></li></ul></ul></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>This tutorial introduces Path Finding in 2D games. Path finding is a function that determines the shortest possible path from an object to its destination, for example, when moving an object to a certain destination.</p><p>Up to Godot 3.4, the <strong>Navigation</strong> node was used to implement path finding. This was not particularly inconvenient, but the methodology for game development using it was limited and inapplicable in some areas. This time, I would like to introduce an implementation method using <strong>Navigation Server</strong>, which was added to Godot 3.5. This is a backport from Godot 4, which is currently under active development. This article is intended for users of Godot 3.5 or later. Users of Godot version 3.4 or earlier should take note.</p><p>The final project file for this tutorial is available at <a href=https://github.com/msnsk/2DPathFinding.git target=_blank>GitHub repository</a>
. You can also check the project directly by downloading the .zip file and importing the &ldquo;project.godot&rdquo; file in the &ldquo;End&rdquo; folder with the Godot Engine.</p><blockquote><p><strong><span style=color:salmon>Environment</span></strong><br><em>Godot version: <strong>3.5</strong></em><br><em>Computer OS: <strong>macOS 11.6.5</strong></em></p></blockquote><blockquote><p><strong><span style=color:salmon>Basic Articles</span></strong><br><em>You may also find the following articles useful.<br><a href=https://www.peanuts-code.com/en/tutorials/gd0001_download/>Downloading Godot</a><br><a href=https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/>Project Manager of Godot</a></em></p></blockquote><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=preparation>Preparation<a hidden class=anchor aria-hidden=true href=#preparation>#</a></h2><h3 id=creating-a-new-project>Creating a new project<a hidden class=anchor aria-hidden=true href=#creating-a-new-project>#</a></h3><p>Start Godot Engine and create a new project. You can name your project as you like. If you can&rsquo;t think of one, let&rsquo;s call it &ldquo;2D Path Finding Start&rdquo;.</p><br><h3 id=updating-project-settings>Updating project settings<a hidden class=anchor aria-hidden=true href=#updating-project-settings>#</a></h3><p>Once the editor appears, we should update project settings for the entire project.</p><p>First, set the display size for the game.</p><ol><li>Open the &ldquo;Project&rdquo; menu > &ldquo;Project Settings<br>Select &ldquo;Display&rdquo; > &ldquo;Window&rdquo; from the sidebar of the &ldquo;General&rdquo; tab.</li><li>In the &ldquo;Size&rdquo; section, change the values of the following items.<ul><li>Width: 512</li><li>Height: 320</li><li>Test Width: 768</li><li>Test Height: 480</li></ul></li><li>In the &ldquo;Stretch&rdquo; section, change the values of the following items<ul><li>Mode: 2d</li><li>Aspect: keep</li></ul></li><li>Switch to the &ldquo;Input Map&rdquo; tab and add &ldquo;move_to&rdquo; to the action.</li><li>Assign the &ldquo;left mouse button&rdquo; to the &ldquo;move_to&rdquo; action.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img1.png alt="Inputmap - action - shake"></li></ol><br><h3 id=downloading-and-importing-assets>Downloading and importing assets<a hidden class=anchor aria-hidden=true href=#downloading-and-importing-assets>#</a></h3><p>Next, let&rsquo;s download assets from KENNEY&rsquo;s site and use them. The asset pack we will use is called <strong><a href=https://www.kenney.nl/assets/bit-pack target=_blank>1-Bit Pack</a>
</strong>. I can&rsquo;t help but be thankful for this wonderful free material.</p><p>Once downloaded, drag and drop the &ldquo;colored-transparent_packed.png&rdquo; file from the &ldquo;Tilesheet&rdquo; folder into the editor&rsquo;s file system dock to import it into your project.</p><p>Immediately after importing the file, the image will look blurry, so correct this by following the steps below.</p><ol><li>Make the imported asset file selected in the file system dock.</li><li>Select &ldquo;Preset&rdquo; > &ldquo;2D Pixel&rdquo; in the import dock.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img2.png alt="select 2D Pixel"></li><li>Click the &ldquo;Re-import&rdquo; button at the bottom.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img3.png alt="click reinport"></li></ol><p>The image should now have the edges characteristic of pixel art. The imported tileset will be used later for tile maps and player character textures.</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=creating-a-world-scene>Creating a World scene<a hidden class=anchor aria-hidden=true href=#creating-a-world-scene>#</a></h2><h3 id=creating-a-new-world-scene>Creating a new World scene<a hidden class=anchor aria-hidden=true href=#creating-a-new-world-scene>#</a></h3><p>The first step is to create a &ldquo;World&rdquo; scene to prepare the game world. 1. Select &ldquo;Scene&rdquo; menu > &ldquo;New Scene&rdquo;.</p><ol><li>Select &ldquo;Other Node&rdquo; in &ldquo;Generate Root Node&rdquo;.</li><li>When the root node of the &ldquo;Node2D&rdquo; class is generated, rename it to &ldquo;World&rdquo;.</li><li>Save the scene. Create a folder and save the scene with the file path &ldquo;res://Scene/World.tscn&rdquo;.</li></ol><br><h3 id=adding-and-editing-a-tilemap-node>Adding and editing a TileMap node<a hidden class=anchor aria-hidden=true href=#adding-and-editing-a-tilemap-node>#</a></h3><ol><li><p>Adding a &ldquo;TileMap&rdquo; node to the &ldquo;World&rdquo; root node.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img3.1.png alt="Scene Dock - Added TileMap"></p></li><li><p>In the inspector, apply the &ldquo;New TileSet&rdquo; resource to the &ldquo;TileSet&rdquo; property of the &ldquo;TileMap&rdquo; node.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img4.png alt="TileMap - TileSet"></p></li><li><p>Click on the applied &ldquo;TileSet&rdquo; resource to open the TileSet panel at the bottom of the editor.</p></li><li><p>Add imported KENNEY &ldquo;res://colored-transparent_packed.png&rdquo; resource file by dragging it to the left sidebar of the TileSet panel.</p></li><li><p>Select the added texture sheet and prepare the following three single tiles.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img5.png alt="TileSet Pannel"></p><ul><li>Tile for the character&rsquo;s pathway.<br>*Tiles with this navigation area set are the target of the pathfinding.<ul><li>Use gravel tiles</li><li>Collision polygon: not required</li><li>Navigation polygon: <strong>Needed</strong></li></ul></li><li>Tiles that characters do not pass through but do not collide with each other.<br>*Use as a margin so that the character does not get caught by tree tiles with collision geometry when moving along the path.<ul><li>Use grass texture</li><li>Collision polygons: not needed</li><li>Navigation polygons: not needed</li></ul></li><li>Tiles that characters cannot pass through and have collision detection.<br>*Use as impassable obstacles during path finding.<ul><li>Use tree texture</li><li>Collision polygon: <strong>Needed</strong></li><li>Navigation polygons: not required</li></ul></li></ul></li><li><p>Select &ldquo;TileMap&rdquo; in the scene dock and create a tile map on the 2D workspace. Below is a sample. It is OK if the gravel tiles provide some pathways (navigation areas).<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img6.png alt="TileMap - 2D workspace"><br>It is important to note, however, that once you place the tree tiles for obstacles, be sure to place the grass tiles for margins around them. Otherwise, the character will try to pass right through the wooden tiles when moving along the path, and will get stuck and not be able to move. This is something I would like to see improved in future Godot updates. I haven&rsquo;t implemented the character yet, but I&rsquo;ll show you how it behaves first.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img7.gif alt="TileMap - Stuck with collision shape"></p></li></ol><br><h3 id=adding-and-editing-the-line2d-node>Adding and editing the Line2D node<a hidden class=anchor aria-hidden=true href=#adding-and-editing-the-line2d-node>#</a></h3><p>The &ldquo;Line2D&rdquo; node is used to make the explored and determined path visually clear.</p><ol><li>Add a &ldquo;Line2D&rdquo; node to the &ldquo;World&rdquo; root node.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img8.png alt="Scene Dock - Added Line2D"></li><li>In the inspector, set the &ldquo;Width&rdquo; property of the &ldquo;Line2D&rdquo; node to.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img9.png alt="Line2D - Width"></li></ol><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=creating-a-player-scene>Creating a Player scene<a hidden class=anchor aria-hidden=true href=#creating-a-player-scene>#</a></h2><p>From here, we will create a scene for the player character to move along the found path.</p><h3 id=creating-a-new-player-scene>Creating a new Player scene<a hidden class=anchor aria-hidden=true href=#creating-a-new-player-scene>#</a></h3><ol><li>Select &ldquo;Scene&rdquo; menu > &ldquo;New Scene&rdquo;.</li><li>Select &ldquo;Other Node&rdquo; in &ldquo;Generate Root Node&rdquo;.</li><li>When the root node of the &ldquo;KinematicBody2D&rdquo; class is created, rename it to &ldquo;Player&rdquo;.</li><li>Save the scene. Create a folder and save the scene with the file path &ldquo;res://Scenes/Player.tscn&rdquo;.</li></ol><h3 id=adding-and-editing-nodes-to-the-player-scene>Adding and editing nodes to the Player scene<a hidden class=anchor aria-hidden=true href=#adding-and-editing-nodes-to-the-player-scene>#</a></h3><p>Add nodes to the &ldquo;Player&rdquo; root node to make the scene tree look like this.</p><ul><li>Player(KinematicBody2D)<ul><li>Sprite</li><li>CollisionShape2D</li><li>NavigationAgent2D</li></ul></li></ul><p><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img10.png alt="Player scene - Scene Dock"></p><p>Each node is then edited.<br><br></p><h4 id=sprite-node>Sprite node<a hidden class=anchor aria-hidden=true href=#sprite-node>#</a></h4><p>This node is used to apply texture (appearance) to the &ldquo;Player&rdquo; scene.</p><ol><li>In the inspector, apply the &ldquo;res://colored-transparent_packed.png&rdquo; resource downloaded from KENNEY&rsquo;s site to the &ldquo;Texture&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img11.png alt="Sprite node - texture"></li><li>Enable the &ldquo;Region&rdquo; > &ldquo;Enabled&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img12.png alt="Sprite node - Region - enabled"></li><li>Open the Texture Region panel at the bottom of the editor and select the region of the player character texture of your choice. For this tutorial, we used a sheriff-like texture.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img13.png alt="Sprite node - texture region pannel"></li></ol><br><h4 id=collisionshape2d-node>CollisionShape2D node<a hidden class=anchor aria-hidden=true href=#collisionshape2d-node>#</a></h4><p>This node sets the collision shape for the &ldquo;Player&rdquo; root node of the KinematicBody2D class.</p><ol><li>Apply a new &ldquo;RectangleShape2D&rdquo; resource to the &ldquo;Shape&rdquo; property in the inspector.</li><li>Set the value of the &ldquo;Extents&rdquo; property of the applied &ldquo;RectangleShape2D&rdquo; resource to (x: 6, y: 6).<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img14.png alt="CollisionShape2D node - Shape - Extents"></li><li>On the 2D workspace it will look like this.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img15.png alt="CollisionShape2D node - 2D Workspace"></li></ol><br><h4 id=navigationagent2d-node>NavigationAgent2D node<a hidden class=anchor aria-hidden=true href=#navigationagent2d-node>#</a></h4><p>This node was introduced in Godot 3.5 as a backported node from Godot 4. A parent node (in this case, the &ldquo;Player&rdquo; node) adding this node to its children will automatically avoid collisions with obstacles and will be able to move by path finding. It seems to be controlled by being registered in the <strong>navigation map</strong> of the default <strong>World2D</strong>. For more details, please refer to Godot&rsquo;s official online documentation.</p><blockquote><p><em><strong><span style=color:salmon>Godot Docs:</span></strong></em><br><em><a href=https://docs.godotengine.org/en/stable/classes/class_navigationagent2d.html target=_blank>NavigationAgent2D</a></em></p></blockquote><ol><li>Check the &ldquo;Avoidance&rdquo; > &ldquo;Avoidance Enabled&rdquo; property to enable it. This controls collision avoidance with obstacles and enables path finding.</li><li>Set the &ldquo;Avoidance&rdquo; > &ldquo;Radius&rdquo; property to 8. This property is the size of this agent. We set the radius to 8 px to match the size of the texture on the &ldquo;Sprite&rdquo; node.</li><li>Set the &ldquo;Avoidance&rdquo; > &ldquo;Neighbor Dist&rdquo; property to 8. This property sets the distance at which other agents will be detected. Later we will create other object scenes that will automatically track the Player and add <strong>NavigationAgent2D</strong> nodes to them as well, but they will not need to be detected until they are right next to the Player, so we set this property to 8 as well as the agent&rsquo;s.</li><li>Set the &ldquo;Avoidance&rdquo; > &ldquo;Max Speed&rdquo; property to 40. This is the maximum movement speed of the agents.</li></ol><p><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img15.1.png alt="NavigationAgent2D node - properties"></p><br><h3 id=adding-an-instance-of-the-player-scene-to-the-world-scene>Adding an instance of the Player scene to the World scene<a hidden class=anchor aria-hidden=true href=#adding-an-instance-of-the-player-scene-to-the-world-scene>#</a></h3><p>Add an instance node of the &ldquo;Player.tscn&rdquo; scene created here to the &ldquo;World&rdquo; scene. It is OK if the scene dock of the &ldquo;World&rdquo; scene looks like the following.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img16.png alt="World scene - added Player node"></p><br><h3 id=attaching-and-editing-scripts-to-the-player-node>Attaching and editing scripts to the Player node<a hidden class=anchor aria-hidden=true href=#attaching-and-editing-scripts-to-the-player-node>#</a></h3><p>After returning to the &ldquo;Player&rdquo; scene, attach a script to the &ldquo;Player&rdquo; root node and write the code. Create a script with the file path &ldquo;res://Scripts/Player.gd&rdquo;. When the script editor opens, write the following code.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Player.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>KinematicBody2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Player speed</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>float</span>) <span style=color:#66d9ef>var</span> speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>40</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Refer to the Line2D node in the World scene</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> line: <span style=color:#a6e22e>Line2D</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>get_node</span>(<span style=color:#e6db74>&#34;... /Line2D&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#75715e># Refer to the NavigationAgent2D node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> nav_agent <span style=color:#f92672>=</span> <span style=color:#a6e22e>$NavigationAgent2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in function called when a node is loaded into the scene tree</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Set the current location as a temporary destination by NavigationAgent2D</span>
</span></span><span style=display:flex><span>	nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_target_location</span>(global_position)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in physics process function called every frame</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_physics_process</span>(delta):
</span></span><span style=display:flex><span>    <span style=color:#75715e># If the last position of the found path has not been reached</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>is_navigation_finished</span>():
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get the next navigable position without obstacles</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> next_loc <span style=color:#f92672>=</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>get_next_location</span>()
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get the current Player location</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> current_pos <span style=color:#f92672>=</span> global_position
</span></span><span style=display:flex><span>        <span style=color:#75715e># Calculate velocity from direction and speed for next possible location</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> velocity <span style=color:#f92672>=</span> current_pos<span style=color:#f92672>.</span><span style=color:#a6e22e>direction_to</span>(next_loc) <span style=color:#f92672>*</span> speed
</span></span><span style=display:flex><span>        <span style=color:#75715e># Pass velocity to NavigationAgent2D&#39;s collision avoidance algorithm</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># send velocity_computed signal as soon as velocity adjustment is complete</span>
</span></span><span style=display:flex><span>		nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_velocity</span>(velocity)
</span></span><span style=display:flex><span>    <span style=color:#75715e># When the input map action move_to (left mouse button) is pressed</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;move_to&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#75715e># call a method to start path finding</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>find_path</span>() <span style=color:#75715e># Define after this</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method to start path finding</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>find_path</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Set the current mouse position as the next destination by NavigationAgent2D</span>
</span></span><span style=display:flex><span>	nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_target_location</span>(<span style=color:#a6e22e>get_global_mouse_position</span>())
</span></span><span style=display:flex><span>    <span style=color:#75715e># Get the next possible location to move to without obstacles</span>
</span></span><span style=display:flex><span>	nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>get_next_location</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># Pass the information of the path generated by NavigationAgent2D to the path of Line2D in the World scene</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Both data types are PoolVector2Array, so they can be passed as is</span>
</span></span><span style=display:flex><span>	line<span style=color:#f92672>.</span>points <span style=color:#f92672>=</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>get_nav_path</span>()
</span></span></code></pre></div><p>Now connect three different signals of the &ldquo;NavigationAgent2D&rdquo; node to this script.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img16.1.png alt="NavigationAgent2D - Signals"></p><p>The first one is the &ldquo;velocity_computed&rdquo; signal. This signal is sent when NavigationAgent2D has completed adjusting its velocity to avoid collisions with surrounding objects.</p><p>The second is the &ldquo;target_reached&rdquo; signal. This signal is sent out when the next moveable position on the path to the final destination is reached.</p><p>The third signal is &ldquo;navigation_finished. This signal is sent out when the final destination on the route is reached.</p><p>After connecting each signal to the script, write the necessary code in the generated method. The code is as follows.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Player.gd###</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Called with a signal that is sent out when NavigationAgent2D has finished adjusting its velocity</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_NavigationAgent2D_velocity_computed</span>(safe_velocity):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Apply the adjusted velocity to the Player&#39;s movement</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>move_and_slide</span>(safe_velocity)<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Called with a signal that is sent when the NavigationAgent2D reaches its next moveable position.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_NavigationAgent2D_target_reached</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># On the path of a Line2D node in the World scene...</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># reflect the updated path of the NavigationAgent2D</span>
</span></span><span style=display:flex><span>	line<span style=color:#f92672>.</span>points <span style=color:#f92672>=</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>get_nav_path</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Called with a signal that is sent out when NavigationAgent2D reaches the last destination in its path</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_NavigationAgent2D_navigation_finished</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Reset the points of the path of the Line2D node in the World scene to 0</span>
</span></span><span style=display:flex><span>	line<span style=color:#f92672>.</span>points<span style=color:#f92672>.</span><span style=color:#a6e22e>resize</span>(<span style=color:#ae81ff>0</span>)
</span></span></code></pre></div><br><p>This completes the editing of the &ldquo;Player.gd&rdquo; script. At this point, try running the project once. If you are running the project for the first time, select &ldquo;res://Scenes/World.tscn&rdquo; as the main scene.</p><p>Let&rsquo;s click on the tile map appropriately and check if &ldquo;Player&rdquo; moves along the path search without any problem.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img17.gif alt="World scene - added Player node"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=creating-an-animal-scene>Creating an Animal scene<a hidden class=anchor aria-hidden=true href=#creating-an-animal-scene>#</a></h2><p>In the &ldquo;Player&rdquo; scene, we implemented path finding using the mouse position as the destination. From now on, we will implement path finding for another object that moves with the moving &ldquo;Player&rdquo; as its destination. However, there is no need to worry, since most of the work is the same.</p><p>Let&rsquo;s make multiple animal objects gather around the &ldquo;Player&rdquo; instance object we just created. We will now create an &ldquo;Animal&rdquo; scene for the animal objects.</p><h3 id=creating-a-new-animal-scene>Creating a new Animal scene<a hidden class=anchor aria-hidden=true href=#creating-a-new-animal-scene>#</a></h3><ol><li>Select &ldquo;Scene&rdquo; menu > &ldquo;New Scene&rdquo;.</li><li>Select &ldquo;Other Node&rdquo; in &ldquo;Create Root Node&rdquo;.</li><li>When the root node of the &ldquo;KinematicBody2D&rdquo; class is created, rename it to &ldquo;Animal&rdquo;.</li><li>Save the scene. Create a folder and save the scene with the file path &ldquo;res://Scenes/Animal.tscn&rdquo;.</li></ol><h3 id=adding-and-editing-nodes-in-the-animal-scene>Adding and editing nodes in the Animal scene<a hidden class=anchor aria-hidden=true href=#adding-and-editing-nodes-in-the-animal-scene>#</a></h3><p>Add some nodes to the &ldquo;Animal&rdquo; root node and make the scene tree as follows.</p><ul><li>Animal(KinematicBody2D)<ul><li>Sprite</li><li>CollisionShape2D</li><li>NavigationAgent2D</li><li>PathTimer(Timer)<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img18.png alt="Animal scene - Scene Dock"></li></ul></li></ul><p>Then edit each node.<br><br></p><h4 id=sprite-node-1>Sprite node<a hidden class=anchor aria-hidden=true href=#sprite-node-1>#</a></h4><p>This node is used to give texture (appearance) to the &ldquo;Animal&rdquo; scene.</p><ol><li>In the inspector, apply the &ldquo;res://colored-transparent_packed.png&rdquo; resource downloaded from the KENNEY website to the &ldquo;Texture&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img19.png alt="Sprite node - texture"></li><li>Enable the &ldquo;Region&rdquo; > &ldquo;Enabled&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img20.png alt="Sprite node - Region - enabled"></li><li>Open the texture region panel at the bottom of the editor and select a region for the six animal textures.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img21.png alt="Sprite node - texture region pannel"></li><li>Set the value of the &ldquo;Animation&rdquo; > &ldquo;Hframes&rdquo; property to 6. Since the texture area selected earlier contains 6 types of animals, the value is set to be 1 frame for each type of animal. The default frame is set to 0 (first frame) in the &ldquo;Frame&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img22.png alt="Sprite node - Animation - Hframes"></li></ol><br><h4 id=collisionshape2d-node-1>CollisionShape2D node<a hidden class=anchor aria-hidden=true href=#collisionshape2d-node-1>#</a></h4><p>This node sets the collision shape for the &ldquo;Animal&rdquo; root node of the KinematicBody2D class.</p><ol><li>Apply the &ldquo;New RectangleShape2D&rdquo; resource to the &ldquo;Shape&rdquo; property in the inspector.</li><li>Set the value of the &ldquo;Extents&rdquo; property of the applied &ldquo;RectangleShape2D&rdquo; resource to (x: 8, y: 8).<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img23.png alt="CollisionShape2D node - Shape - Extents"></li><li>On the 2D workspace it will look like this.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img24.png alt="CollisionShape2D node - 2D Workspace"></li></ol><br><h4 id=navigationagent2d-node-1>NavigationAgent2D node<a hidden class=anchor aria-hidden=true href=#navigationagent2d-node-1>#</a></h4><p>In the &ldquo;Animal&rdquo; scene, as in the &ldquo;Player&rdquo; scene, this node is used to avoid collisions with obstacles and to enable movement by path finding.</p><ol><li>Enable the &ldquo;Avoidance&rdquo; > &ldquo;Avoidance Enabled&rdquo; property.</li><li>Leave the &ldquo;Avoidance&rdquo; > &ldquo;Radius&rdquo; property at the default value of 10. The size of the texture is slightly larger than the size of the Sprite node&rsquo;s texture, so that the animals are slightly spaced apart.</li><li>The &ldquo;Avoidance&rdquo; > &ldquo;Neighbor Dist&rdquo; property was also left at the default value of 500. Since the width of the display size is set to 512 px, setting it to 500 will allow other agents to be detected from one end of the display to the other and avoid collisions. The goal is to reduce the number of instances of the &ldquo;Animal&rdquo; scene that will crowd around the &ldquo;Player&rdquo; instance and thus reduce the possibility of being stuck in the scene.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img25.png alt="NavigationAgent2D node - "></li></ol><br><h4 id=pathtimertimer-node>PathTimer(Timer) Node<a hidden class=anchor aria-hidden=true href=#pathtimertimer-node>#</a></h4><p>This node is used to periodically update the position of the moving destination (instance node of &ldquo;Player&rdquo;).</p><ol><li>The &ldquo;Wait Time&rdquo; property is left at the default value of 1.</li><li>The &ldquo;One Shot&rdquo; property should also be left at the default value of 1 and disabled. This will time out repeatedly every second.</li><li>Enable the &ldquo;Autostart&rdquo; property. The timer will now start automatically when this node is loaded into the scene tree.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img26.png alt="PathTimer node - Autostart"></li></ol><br><h3 id=attaching-and-editing-scripts-to-the-animal-node>Attaching and editing scripts to the &ldquo;Animal&rdquo; node<a hidden class=anchor aria-hidden=true href=#attaching-and-editing-scripts-to-the-animal-node>#</a></h3><p>From here, we will attach a script to the &ldquo;Animal&rdquo; root node and write code to control the &ldquo;Animal&rdquo; scene. Create a script with the file path &ldquo;res://Scripts/Animal.gd&rdquo;. When the script editor opens, code as follows.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Animal.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>KinematicBody2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Speed of Animal</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>30</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Variable to assign the object that will be the destination of the route</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> target
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to the Sprite node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> sprite <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Sprite</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to NavigationAgent2D</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> nav_agent <span style=color:#f92672>=</span> <span style=color:#a6e22e>$NavigationAgent2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Same as Player.gd below</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>	nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_target_location</span>(global_position)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_physics_process</span>(_delta):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>is_navigation_finished</span>():
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> current_pos <span style=color:#f92672>=</span> global_position
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> next_loc <span style=color:#f92672>=</span> nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>get_next_location</span>()
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> velocity <span style=color:#f92672>=</span> current_pos<span style=color:#f92672>.</span><span style=color:#a6e22e>direction_to</span>(next_loc) <span style=color:#f92672>*</span> speed
</span></span><span style=display:flex><span>		nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_velocity</span>(velocity)
</span></span><span style=display:flex><span>        <span style=color:#75715e># If the x-coordinate of the destination object is smaller than the x-coordinate of the animal node</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># flip the Texture image of the Sprite node</span>
</span></span><span style=display:flex><span>		sprite<span style=color:#f92672>.</span>flip_h <span style=color:#f92672>=</span> target<span style=color:#f92672>.</span>global_position<span style=color:#f92672>.</span>x <span style=color:#f92672>&lt;</span> global_position<span style=color:#f92672>.</span>x
</span></span></code></pre></div><br>Two signals must then be connected to the script.<p>The first one is to connect the &ldquo;velocity_computed&rdquo; signal of the &ldquo;NavigationAgent2D&rdquo; node as in the &ldquo;Player&rdquo; scene.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img27.png alt="NavigationAgent2D - velocity_computed signal"></p><p>Once connected, write a <code>move_and_slide</code> method in the generated <code>_on_NavigationAgent2D_velocity_computed</code> method to control the movement of the &ldquo;Animal&rdquo; node.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Animal.gd###</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Called with a signal that is sent out when NavigationAgent2D has finished adjusting its velocity</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_NavigationAgent2D_velocity_computed</span>(safe_velocity):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Apply the adjusted velocity to the Player&#39;s movement</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>move_and_slide</span>(safe_velocity)
</span></span></code></pre></div><br><p>The next step is to connect the &ldquo;timeout&rdquo; signal of the &ldquo;PathTimer&rdquo; node to the script.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img28.png alt="PathTimer - timeout signal"></p><p>Once connected, within the generated method <code>_on_PathTimer_timeout</code>, describe the <code>set_target_location</code> method of the &ldquo;NavigationAgent2D&rdquo; node to set the location of the destination object (in this case &ldquo;Player&rdquo;) as the destination during path finding. Now, at the time of timeout every second, the position of the latest &ldquo;Player&rdquo; instance node is acquired and the path finding is performed with that as the destination.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Animal.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_PathTimer_timeout</span>():
</span></span><span style=display:flex><span>	nav_agent<span style=color:#f92672>.</span><span style=color:#a6e22e>set_target_location</span>(target<span style=color:#f92672>.</span>global_position)
</span></span></code></pre></div><br><p>The &ldquo;Animal.gd&rdquo; script is now complete.</p><br><h3 id=adding-an-animals-node-to-the-world-scene>Adding an Animals node to the &ldquo;World&rdquo; scene<a hidden class=anchor aria-hidden=true href=#adding-an-animals-node-to-the-world-scene>#</a></h3><ol><li>Add a node of class <strong>Node2D</strong> to the &ldquo;World&rdquo; scene as a container for multiple instances of the &ldquo;Animals&rdquo; scene and rename it to &ldquo;Animals&rdquo;. Adding instances of &ldquo;Animal&rdquo; will be done by script after this.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img29.png alt="World scene - Animals node"></li></ol><br><h3 id=attach-a-script-to-the-world-node-and-edit-it>Attach a script to the &ldquo;World&rdquo; node and edit it<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-world-node-and-edit-it>#</a></h3><p>Attach a script to the &ldquo;World&rdquo; root node and edit it, adding multiple instances of &ldquo;Animal&rdquo;. Save the script with the file path as &ldquo;res://Scripts/World.gd&rdquo; and when the script editor opens, write the code as follows.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###World.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to preloaded Animal scene file</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> animal_scn <span style=color:#f92672>=</span> preload(<span style=color:#e6db74>&#34;res://Scenes/Animal.tscn&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Number of Animal instances</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>var</span> head_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to TileMap node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> tile_map <span style=color:#f92672>=</span> <span style=color:#a6e22e>$TileMap</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to the Player node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Player</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference the Animals(Node2D) node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> animals <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Animals</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>    <span style=color:#75715e># Randomize seed for random number generation function</span>
</span></span><span style=display:flex><span>	randomize()<span style=color:#f92672>.</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Get an array of ID 9 tiles on the TileMap</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># IDs can be found by clicking the (i) icon in the tileset panel edit screen</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> cells <span style=color:#f92672>=</span> tile_map<span style=color:#f92672>.</span><span style=color:#a6e22e>get_used_cells_by_id</span>(<span style=color:#ae81ff>9</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># Loop for the number of Animal instances</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> head_count :
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get random index within the number of tiles with ID 9</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> random_index <span style=color:#f92672>=</span> randi() <span style=color:#f92672>%</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span>()
</span></span><span style=display:flex><span>        <span style=color:#75715e># Get a tile from the ID 9 tiles that fits the random value</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>var</span> spawn_tile <span style=color:#f92672>=</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>pop_at</span>(random_index)
</span></span><span style=display:flex><span>        <span style=color:#75715e># loop if the tile has already been spawned from the array and the array is not yet empty</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>while</span> spawn_tile <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>and</span> <span style=color:#f92672>not</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>empty</span>():
</span></span><span style=display:flex><span>            <span style=color:#75715e># Generate a random value within the range of the number of ID9 liles again</span>
</span></span><span style=display:flex><span>			random_index <span style=color:#f92672>=</span> randi() <span style=color:#f92672>%</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>size</span>()
</span></span><span style=display:flex><span>            <span style=color:#75715e># Spawn a tile from the ID9 tiles again that fits the random value</span>
</span></span><span style=display:flex><span>			spawn_tile <span style=color:#f92672>=</span> cells<span style=color:#f92672>.</span><span style=color:#a6e22e>pop_at</span>(random_index)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Place an Animal instance on the acquired tile...</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># by calling a method to create an Animal instance</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>spawn_animal</span>(spawn_tile)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># method to spawn Animal instance</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>spawn_animal</span>(spawn_tile):
</span></span><span style=display:flex><span>    <span style=color:#75715e># Get the position of the tile passed as argument, shifted by (8, 8) to the x,y coordinates of the tile</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> spawn_pos <span style=color:#f92672>=</span> tile_map<span style=color:#f92672>.</span><span style=color:#a6e22e>map_to_world</span>(spawn_tile, <span style=color:#66d9ef>true</span>) <span style=color:#f92672>+</span> <span style=color:#a6e22e>Vector2</span>(<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>8</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># Create an instance of the Animal scene</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> animal <span style=color:#f92672>=</span> animal_scn<span style=color:#f92672>.</span><span style=color:#a6e22e>instance</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e># Position the Animal instance on the tile passed as argument</span>
</span></span><span style=display:flex><span>	animal<span style=color:#f92672>.</span>position <span style=color:#f92672>=</span> spawn_pos
</span></span><span style=display:flex><span>    <span style=color:#75715e># Assign and reference the Player node to the destination property of the Animal instance</span>
</span></span><span style=display:flex><span>	animal<span style=color:#f92672>.</span>target <span style=color:#f92672>=</span> player<span style=color:#f92672>.</span>global_position
</span></span><span style=display:flex><span>    <span style=color:#75715e># Randomly determine the texture of the Sprite node of the Animal instance</span>
</span></span><span style=display:flex><span>	animal<span style=color:#f92672>.</span><span style=color:#a6e22e>get_node</span>(<span style=color:#e6db74>&#34;Sprite&#34;</span>)<span style=color:#f92672>.</span>frame <span style=color:#f92672>=</span> randi() <span style=color:#f92672>%</span> animal<span style=color:#f92672>.</span><span style=color:#a6e22e>get_node</span>(<span style=color:#e6db74>&#34;Sprite&#34;</span>)<span style=color:#f92672>.</span>hframes
</span></span><span style=display:flex><span>    <span style=color:#75715e># Make the Animal instance a child of the Animals node</span>
</span></span><span style=display:flex><span>	animals<span style=color:#f92672>.</span><span style=color:#a6e22e>add_child</span>(animal)
</span></span></code></pre></div><br><p>The &ldquo;World.gd&rdquo; script is now complete. Let&rsquo;s run the project and see how multiple instances of &ldquo;Animal&rdquo; approach &ldquo;Player&rdquo;.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img30.gif alt="run project"></p><p>The number of <code>head_count</code> properties defined in the script can be easily edited in the inspector, since it comes with the <code>export</code> keyword. I increased the number of &ldquo;Animal&rdquo; instances to 100 as a test, but it got stuck at the end. If &ldquo;Animal&rdquo; were a zombie, it would be a hellish scene.<br><img loading=lazy src=/images/tutorials/gd0016_2d_path_finding/img31.gif alt="run project"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=sample-game>Sample game<a hidden class=anchor aria-hidden=true href=#sample-game>#</a></h2><p>I have prepared a sample game that further brushes up the project created in this tutorial.</p><p><div><video controls autoplay loop muted playsinline aria-label='Sample game demo' style=zgotmplz>
<source src=/images/tutorials/gd0016_2d_path_finding/img32.mp4 type=video/mp4>Your browser does not support the video tag.</video></div><br><br></p><p>The project file of the sample game is located in <a href=https://github.com/msnsk/2DPathFinding.git target=_blank>GitHub repository</a>
, so please download the .zip file from there. You can check it by importing the &ldquo;project.godot&rdquo; file in the &ldquo;Sample&rdquo; folder with the Godot Engine.<br><br></p><h4 id=game-rules>Game Rules:<a hidden class=anchor aria-hidden=true href=#game-rules>#</a></h4><ul><li>Left mouse click to move to the mouse cursor position</li><li>Spacebar to shoot the gun in the direction of the mouse cursor.</li><li>When you run out of bullets, reload 12 bullets after reloading animation.</li><li>When you hit an enemy, you lose a heart.</li><li>When you run out of all 5 hearts, the game is over.</li><li>The darker the color of an enemy, the more lives it has and the slower its speed is. The lighter the color, the less lives it has and the faster its speed is.</li><li>The player&rsquo;s score is the number of jewels that dropped when an enemy is defeated.</li></ul><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In this tutorial, we implemented the new <strong>Navigation Server</strong> added in Godot 3.5.</p><p>For a simple 2D route search like this one, it was relatively easy to implement using <strong>NavigationAgent2D</strong>, although there are still some itchy points, such as the problem of getting caught in a corner when using a TileMap without a margin tile. However, we hope that this will be improved in future updates.</p><p>Let me summarize the key points of this project.</p><ul><li>When using TileMap, be sure to set navigation to movable tiles.</li><li>When using TileMap, make a margin with tiles that are set only in the area so that they do not get caught in corners.</li><li>You can also define a navigation area using the <strong>NavigationPolygonInstance</strong> node, which we did not use in this case.</li><li>Adding a &ldquo;NavigationAgent2D&rdquo; node to the child of the object you want to move.</li><li>When controlling path finding in scripts, write the code with the following order in mind: set the final destination, obtain the next possible moving position, adjust the speed to avoid collision, and move at the adjusted speed.</li></ul><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://godotengine.org/article/navigation-server-godot-4-0 target=_blank>Official Article - Navigation Server for Godot 4.0</a></li><li><a href=https://godotengine.org/article/godot-3-5-cant-stop-wont-stop target=_blank>Official Article - Godot 3.5: Can't stop won't stop</a></li><li><a href=https://docs.godotengine.org/en/stable/classes/class_navigationagent2d.html target=_blank>Godot Doc - NavigationAgent2D</a></li><li><a href=https://youtu.be/xdih_csmVqk target=_blank>YouTube - Godot 3.5 | NavigationAgent2D</a></li><li><a href=https://youtu.be/NjIJm2jax68 target=_blank>YouTube - Godot 3.5 is Out, and it's SICK! Real-time pathfinding, new tween animations, and more</a></li><li><a href=https://github.com/godotengine/godot/issues/60546 target=_blank>GitHub - godotengine/godot - issue #60546</a></li></ul><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class=post-footer><div class=recommendation><span>Please feel free to follow my accounts!</span><div class=social-icons><a href=https://twitter.com/peanuts_code target=_blank rel="noopener noreferrer me" title=X><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentcolor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
</a><a href=https://github.com/msnsk/ target=_blank rel="noopener noreferrer me" title=GitHub><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></div></div><div class=recommendation><span>If you liked this article, please share it!</span></div><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on x" href="https://x.com/intent/tweet/?text=2D%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2c2D%2cPathFinding"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&amp;title=2D%20Path%20Finding%20in%20Godot3&amp;summary=2D%20Path%20Finding%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f&title=2D%20Path%20Finding%20in%20Godot3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on whatsapp" href="https://api.whatsapp.com/send?text=2D%20Path%20Finding%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on telegram" href="https://telegram.me/share/url?text=2D%20Path%20Finding%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share 2D Path Finding in Godot3 on ycombinator" href="https://news.ycombinator.com/submitlink?t=2D%20Path%20Finding%20in%20Godot3&u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0016_2d_path_finding%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/en/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/en/tags/2d/>2D</a></li><li><a href=https://www.peanuts-code.com/en/tags/pathfinding/>PathFinding</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/><span class=title>« Prev</span><br><span>2D Grid Based Path Finding in Godot3</span>
</a><a class=next href=https://www.peanuts-code.com/en/tutorials/gd0015_circular_progress_bar/><span class=title>Next »</span><br><span>Circular Progress Bar in Godot3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/en/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>