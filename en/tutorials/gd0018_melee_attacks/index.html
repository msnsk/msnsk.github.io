<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>ü§ñ 2D Hit Detection for Melee Attacks in Godot3 | Peanuts Code</title>
<meta name=keywords content="GameDev,GodotEngine,Godot3,2D,MeleeAttack,Collision,Animation"><meta name=description content="This article introduces a method for implementing simple hit detection for melee attacks in 2D games. This is a commonly used method where the object to attack (e.g., player character) has a collision shape (called &ldquo;Hit Box&rdquo;) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called &ldquo;Hurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack. This is relatively easy"><meta name=author content="Gobo"><link rel=canonical href=https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/tutorials/gd0018_melee_attacks/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="ü§ñ 2D Hit Detection for Melee Attacks in Godot3"><meta property="og:description" content="This article introduces a method for implementing simple hit detection for melee attacks in 2D games. This is a commonly used method where the object to attack (e.g., player character) has a collision shape (called &ldquo;Hit Box&rdquo;) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called &ldquo;Hurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack. This is relatively easy"><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/"><meta property="og:image" content="https://www.peanuts-code.com/images/tutorials/gd0018_melee_attacks/img28.gif"><meta property="article:section" content="tutorials"><meta property="article:published_time" content="2022-10-05T02:55:00+09:00"><meta property="article:modified_time" content="2022-10-05T02:55:00+09:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/tutorials/gd0018_melee_attacks/img28.gif"><meta name=twitter:title content="ü§ñ 2D Hit Detection for Melee Attacks in Godot3"><meta name=twitter:description content="This article introduces a method for implementing simple hit detection for melee attacks in 2D games. This is a commonly used method where the object to attack (e.g., player character) has a collision shape (called &ldquo;Hit Box&rdquo;) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called &ldquo;Hurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack. This is relatively easy"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ü§ñ Tutorials","item":"https://www.peanuts-code.com/en/tutorials/"},{"@type":"ListItem","position":2,"name":"ü§ñ 2D Hit Detection for Melee Attacks in Godot3","item":"https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"ü§ñ 2D Hit Detection for Melee Attacks in Godot3","name":"ü§ñ 2D Hit Detection for Melee Attacks in Godot3","description":"This article introduces a method for implementing simple hit detection for melee attacks in 2D games. This is a commonly used method where the object to attack (e.g., player character) has a collision shape (called \u0026ldquo;Hit Box\u0026rdquo;) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called \u0026ldquo;Hurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack. This is relatively easy","keywords":["GameDev","GodotEngine","Godot3","2D","MeleeAttack","Collision","Animation"],"articleBody":"This article introduces a method for implementing simple hit detection for melee attacks in 2D games.\nThis is a commonly used method where the object to attack (e.g., player character) has a collision shape (called ‚ÄúHit Box‚Äù) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called ‚ÄúHurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack.\nThis is relatively easy to implement, so let‚Äôs get started.\nEnvironment Godot version: 3.5.1\nComputer OS version: macOS 11.6.5\nBasic Articles You may also find the following articles useful.\nDownloading Godot Project Manager of Godot Add Actions to Input Map First, go to ‚ÄúProject‚Äù \u003e ‚ÄúProject Settings‚Äù \u003e ‚ÄúInput Map‚Äù tab and add the following actions:\nright: D key left: A key down: S key up: W key attack: Space bar Create a Player scene Create a scene for the player character. Create the following scene tree by setting the root node to ‚ÄúKinematicBody2D‚Äù and adding the necessary nodes. Player (KinematicBody2D) Sprite (KinematicBody2D) BodyCollisionShape (CollisionShape2D) HitBox (Area2D) HitBoxCollisionShape (CollisionShape2D) AnimationPlayer\nSave this scene as a file named ‚ÄúPlayer.tscn‚Äù. Edit nodes in the Player scene Sprite node For the sprite sheet containing the player character‚Äôs melee attack animations, I downloaded and used the Pixel Art Dwarf Sprites from itch.io . In particular, we will use lines 3 to 5 as the animation for melee attacks.\nDrag the downloaded sprite sheet to the file system dock and import it. Since the image will appear a little blurry as it is, select the file, apply the 2D Pixel preset from the Import dock, and reimport it. Apply the imported sprite sheet to the ‚ÄúTexture‚Äù property in the inspector dock.\nSince this is a sprite sheet with 8 frames for each of the vertical and horizontal sides, set the values of ‚ÄúAnimation‚Äù \u003e ‚ÄúHframes‚Äù/‚ÄúVframes‚Äù to 8 respectively.\nIt is OK if a texture for one frame appears on the 2D workspace.\nBodyCollisionShape (CollisionShape2D) node The parent ‚ÄúPlayer‚Äù root node is a KinematicBody2D class, so it is necessary to set up a collision shape. To distinguish it from the Hit Box collision shape we will create later, we rename it ‚ÄúBodyCollisionShape‚Äù.\nApply the ‚ÄúRectangleShape‚Äù resource to the ‚ÄúShape‚Äù property.\nIn the 2D workspace, match the collision shape to the body part of the sprite‚Äôs texture.\nIf the collision shape is visually distracting, you can set the node to be hidden in the scene dock if necessary.\nHitBox (Area2D) node A hit box is a collision shape used to determine when a character is hit by a melee attack, and since it is called a hit box, a rectangular collision shape is generally used. for the ‚ÄúArea2D‚Äù and its child node ‚ÄúCollisionShape2D‚Äù.\nThe parent ‚ÄúHitBox‚Äù node does not need to be edited, but the signals from this node will be used when scripting later.\nHitBoxCollisionShape (CollisonShape2D) node To distinguish it from the ‚ÄúBodyCollisionShape‚Äù node, it is named ‚ÄúHitBoxCollisionShape‚Äù.\nApply a new ‚ÄúRectangleShape‚Äù resource to the ‚ÄúShape‚Äù property and set a rectangle collision shape. The ‚ÄúExtents‚Äù property of ‚ÄúRectangleShape‚Äù can be left as default at this point, since the size and position will be changed later in the animation during the attack.\nSince we want to enable collision detection only when the player character attacks, the ‚ÄúDisabled‚Äù property should be set to ON to disable collisions.\nAnimationPlayer nodeÔºàCreate animationsÔºâ To create melee attack animations with the ‚ÄúAnimationPlayer‚Äù node.\nSelect the ‚ÄúAnimationPlayer‚Äù node in the scene dock. Open the animation panel. Create a new animation and name it ‚Äúright_attack1‚Äù.\n*It is assumed that we will create attack1, 2, and 3 for each of the left and right directions. First, make the following settings. Automatic playback on loading: Off Animation length (seconds): 0.6 Looping animation: Off Add a track for the ‚ÄúFrame Coords‚Äù property of the ‚ÄúSprite‚Äù node: at 0.1 second intervals, add a texture for the third row of the sprite sheet, starting from the left end to the sixth row. Specifically, (0, 2), (1, 2), (2, 2), (3, 2), (4, 2), (5, 2), and only the x value (column of the sprite sheet) is changed from 0 to 5 while the y value (row of the sprite sheet) remains the same.\nChange the ‚ÄúInterpolation‚Äù type of this track to ‚ÄúNearest‚Äù.\nAdd a track with the ‚ÄúDisabled‚Äù property of ‚ÄúBodyCollisionShape‚Äù. Turn on the ‚ÄúDisabled‚Äù property of ‚ÄúBodyCollisionShape‚Äù at the 0.3 second position in the timeline and turn it back off at the 0.5 second position in order to prevent enemies from taking damage when the player character is attacking them.\nAdd a track for the ‚ÄúDisabled‚Äù property of ‚ÄúHitBoxCollisionShape‚Äù. In reverse order of the previous step, turn off the ‚ÄúDisabled‚Äù property at the 0.3 second position in the timeline and turn it back on at the 0.5 second position. This will enable the Hit Box hit detection only during the very animation frame of the player character‚Äôs attack animation when the axe is being swung down. Continue by adding the ‚ÄúPosition‚Äù property of the ‚ÄúHitBoxCollisionShape‚Äù and the ‚ÄúShape‚Äù \u003e ‚ÄúExtents‚Äù property track. Adjust the size and position of the collision shape of the HitBox to match the animation of the axe swinging down at 0.3 seconds in the timeline. The ‚ÄúPosition‚Äù value was set to (7.5, -2.25) and the ‚ÄúExtents‚Äù value was set to (9.5, 12.25) (slightly larger than the axe track on the texture).\nThe final ‚Äúright_attack1‚Äù looked like this:\nSprite node frame_coords property Time: 0 / Value: (0, 2) / Easing: 1.00 Time: 0.1 / Value: (1, 2) / Easing: 1.00 Time: 0.2 / Value: (2, 2) / Easing: 1.00 Time: 0.3 / Value: (3, 2) / Easing: 1.00 Time: 0.4 / Value: (4, 2) / Easing: 1.00 Time: 0.5 / Value: (5, 2) / Easing: 1.00 BodyCollisionShape node disabled property Time: 0.1 / Value: On / Easing: 1.00 HitBoxCollisionShape node disabled property Time: 0.3 / Value; Off / Easing: 1.00 Time: 0.5 / Value; On / Easing: 1.00 position property Time: 0.3 / Value: (7.5, -2.25) / Easing: 1.00 Time: 0.4 / Value: (4, 4) / Easing: 1.00 shape:extents property Time: 0.3 / Value: (9.5, 12.25) / Easing: 1.00 Time: 0.4 / Value: (6, 6) / Easing: 1.00 The following GIF image shows the ‚Äúright_attack1‚Äù animation we just created, played back at 0.5x speed. You can see that the HitBox collision shape is activated (green) only at the timing when the axe is swung down.\nA similar procedure was used to create the ‚Äúright_attack2‚Äù animation. The texture of line 4 of the sprite sheet was used. During 0.1 ~ 0.4 seconds of the timeline, the ‚ÄúPosition‚Äù and ‚ÄúExtents‚Äù of ‚ÄúHitBoxCollisionShape‚Äù were changed slightly every 0.1 second.\nIf you play ‚Äúright_attack2‚Äù at 0.5x speed, it will look like this.\nIn addition, an animation of ‚Äúright_attack3‚Äù was created. This one used the texture on line 5 of the sprite sheet. The texture is only two frames long, but the two are repeated four times. The ‚ÄúSprite‚Äù node‚Äôs ‚ÄúPosition‚Äù property track was added to make the animation move forward a little and then back.\nIf ‚Äúright_attack3‚Äù is played back at 0.5x speed, the result is as follows.\nWhen creating a left-facing animation, it is easier to work with the Offset \u003e Flip H property of the Sprite node turned on. It is easy to duplicate a previously created right-facing melee attack animation and adjust it for a left-facing animation.\nAttach a script to the Player node To control the player character‚Äôs movement and melee attacks, attach a script to the ‚ÄúPlayer‚Äù root node and code it like below:\n###Player.gd### extends KinematicBody2D ## Movement speed var speed = 80.0 # Movement speed var velocity: Vector2 # Number of attack animations (1 ~ 3) var attack_num = 1 # Referencing a Sprite node onready var sprite = $Sprite # Reference to AnimationPlayer node onready var anim_player = $AnimationPlayer # Methods to control character movement inputs func move(): velocity = Vector2() if Input.is_action_pressed(\"right\"): velocity.x += 1 sprite.flip_h = false if Input.is_action_pressed(\"left\"): velocity.x -= 1 sprite.flip_h = true if Input.is_action_pressed(\"down\"): velocity.y += 1 if Input.is_action_pressed(\"up\"): velocity.y -= 1 velocity = velocity.normalized() * speed # Play idle animation if velocity is 0 if velocity.length() == 0: play(\"idle\") # Play run animation if velocity is greater than 0 if velocity.length() \u003e 0: anim_player.play(\"run\") # Built-in physics process function func _physics_process(_delta): move() # reflect inputs related to movement as character's motion velocity = move_and_slide(velocity) # Built-in callback function for input func _unhandled_input(event): # if spacebar is pressed if event.is_action_pressed(\"attack\"): # stop physics process to prevent movement set_physics_process(false) # if sprite is flipped left/right (facing left) if sprite.flip_h: # Play left-facing attack animation anim_player.play(\"left_attack\" + str(attack_num)) # if sprite is not flipped (right-facing) else: # Play the right-facing attack animation anim_player.play(\"right_attack\" + str(attack_num)) # If current attack animation number is less than 3, add 1 to the number if attack_num \u003c 3: attack_num += 1 # Reset the number to 1 if the current attack animation number is 3 or more else: attack_num = 1 Connect the ‚Äúanimation_finished‚Äù signal of the ‚ÄúAnimationPlayer‚Äù node to the script and edit the auto-generated method as follows\nfunc _on_AnimationPlayer_animation_finished(anim_name): # Resume the physical process if the animation name contains \"attack\" if \"attack\" in anim_name: set_physics_process(true) Let‚Äôs run the ‚ÄúPlayer‚Äù scene.\nIf you enable the setting to display collision shapes in the ‚ÄúDebug‚Äù menu in advance, it will be easier to see the changes in collision shapes during the animation.\nThe movement of the player character will look like the following GIF image.\nCreate a Enemy scene Prepare an ‚ÄúEnemy‚Äù scene to check the hit detection of the player character‚Äôs melee attacks. Since this is similar to the ‚ÄúPlayer‚Äù scene, I will briefly describe it here.\nThe scene tree is as follows.\nEnemy (KinematicBody2D) Sprite BodyCollisionShape (CollisionShape2D) AnimationPlayer ReviveTimer (Timer) Edit nodes in the Enemy scene Sprite node We will use the assets from itch.io - mystic woods for the sprite textures of the enemy characters. Apply the ‚Äúslime.png‚Äù sprite sheet from the downloaded assets to the ‚ÄúTexture‚Äù property of the ‚ÄúSprite‚Äù node.\nBodyCollisionShape node For the ‚ÄúShape‚Äù property, apply ‚ÄúCircleShape2D‚Äù to make the collision shape slightly smaller than the sprite. In this tutorial, this will be the so-called Hurt Box. When the player character‚Äôs hit box overlaps this collision shape, the hit detection becomes effective. This control will be done later in the script.\nAnimationPlayer node In the Animation panel, prepare the following four animations. All of them are set to change to the texture of the next frame on the sprite sheet every 0.1 second.\njump: Animation of jumping when waiting (automatically played when loading) hurt: Animation for when the character takes damage. die: Animation for dying when life reaches 0. Turn on ‚ÄúDisabled‚Äù for ‚ÄúBodyCollisionShape revive: Animation when the character comes back to life after a certain period of time after death. Turn off ‚ÄúDisabled‚Äù of ‚ÄúBodyCollisionShape RevieTimer node Enable the ‚ÄúOne Shot‚Äù property.\nAttach a script to the Enemy node Attach a script to the ‚ÄúEnemy‚Äù root node and code it like below.\n###Enemy.gd### extends KinematicBody2D # Maximum value of life export (int) var max_life = 3 # Current life var life: int = max_life # Variable to refer to Player instance var player: KinematicBody2D # Reference to the Sprite node onready var sprite = $Sprite # Reference to the AnimationPlayer node onready var anim_player = $AnimationPlayer # ReviveTimer node reference onready var revive_timer = $ReviveTimer func _process(_delta): # flip the Sprite's orientation or not depending on the player's position sprite.flip_h = global_position.x \u003e player.global_position.x # Damage methods func hurt(): # Reduce life by 1 life -= 1 # Play the animation hurt anim_player.play(\"hurt\") In addition, connect the ‚Äúanimation_finished‚Äù signal of ‚ÄúAnimationPlayer‚Äù and the ‚Äútimeout‚Äù signal of ‚ÄúReviveTimer‚Äù to the script and edit the respective generated methods as follows:\n###Enemy.gd### # Method called by AnimationPlayer's signal when animation is finished func _on_AnimationPlayer_animation_finished(anim_name): # If the finished animation is hurt if anim_name == \"hurt\": # Return to jump animation if life is greater than 0 if life \u003e 0: anim_player.play(\"jump\") # If life is less than 0, play die animation if life \u003c= 0: play(\"die\") # Start ReviveTimer if the animation that ended is die if anim_name == \"die\": revive_timer.start() # If the animation that ended is \"revive\" if anim_name == \"revive\": anim_player.play(\"jump\") # Method called on ReviveTimer timeout signal func _on_ReviveTimer_timeout(): # Play the revive animation anim_player.play(\"revive\") # Return life to its maximum value life = max_life Add a HitBox signal to the Player‚Äôs script Make the ‚ÄúPlayer.gd‚Äù script call the hurt method of ‚ÄúEnemy.gd‚Äù by the ‚ÄúHitBox‚Äù signal when it is hit by a melee attack.\nReturn to the ‚ÄúPlayer.tscn‚Äù scene and connect the ‚Äúbody_entered(body: Node)‚Äù signal of the ‚ÄúHitBox‚Äù node to the ‚ÄúPlayer.gd‚Äù script.\n###Player.gd### # Omitted # Method called with a signal when the physical body is hit by the HitBox func _on_HitBox_body_entered(body): # If the name of the physical body is \"Enemy\", call its hurt method. if body.name == \"Enemy\": body.hurt() Create a World scene Finally, create a ‚ÄúWorld‚Äù scene and add a ‚ÄúPlayer‚Äù scene instance and an ‚ÄúEnemy‚Äù scene instance to it.\nThe scene tree is simply as follows.\nWorld (Node2D) Enemy (instance of Enemy.tscn) Player (instance of Player.tscn) Place each instance appropriately on the 2D workspace.\nAttach a script to the World scene Attach a script to the World scene and code it as follows. The purpose is to pass a reference to the ‚ÄúPlayer‚Äù instance from the ‚ÄúWorld‚Äù root node to the variable player in the ‚ÄúEnemy‚Äù node declared in ‚ÄúEnemy.gd‚Äù.\n###World.gd### extends Node2D onready var player = $Player onready var enemy = $Enemy func _ready(): enemy.player = self.player Run the project Finally, run the project to check the behavior of the hit judgment for melee attacks.\nYou can see that when the collision shape of the Player‚Äôs HitBox node overlaps with the Enemy‚Äôs BodyCollisionShape (Hurt Box), the hit detection is activated and the Enemy‚Äôs hurt animation is played.\nConclusion In this article, I introduced a simple hit detection method for melee attacks in 2D games, and the implementation of hit detection using Hit Boxes and Hurt Boxes is relatively easy to understand and can be applied to various games.\nIncidentally, in actual games, it is often the case that separate Hit Boxes and Hurt Boxes are set up for each body part, and more complex mechanisms are created by combining these Hit Boxes and Hurt Boxes.\nFor example, in a fighting game, if the attacker has several Hit Boxes for hands, feet, head, etc., and the receiver has Hurt Boxes for the upper, middle, and lower positions, the damage can be changed in complex ways depending on the combination of each Hit Box and Hurt Box.\nIn a zombie FPS game, you could have different Hurt Boxes for the zombie‚Äôs head and body, so that shooting at the head would kill the zombie in one shot, but not the other parts of the body.\nAnyway, I hope this article has been of some help.\nReferences In preparing this article, we found the following links to be very helpful. We hope you will find them useful as well.\nIntroduction to the animation features KidsCanCode - MELEE ATTACKS YouTube - How to Make Melee Combat in Godot YouTube - Make an Action RPG in Godot 3.2 (P11 | Melee attacks with Hurtboxes and Hitboxes) itch.io - Pixel Art Dwarf Sprites *Resource\nitch.io - mystic woods *Resource\n","wordCount":"2611","inLanguage":"en","image":"https://www.peanuts-code.com/images/tutorials/gd0018_melee_attacks/img28.gif","datePublished":"2022-10-05T02:55:00+09:00","dateModified":"2022-10-05T02:55:00+09:00","author":{"@type":"Person","name":"Gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/en/tutorials/gd0018_melee_attacks/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/en/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/en/ title=Home><span>Home</span></a></li><li><a href=https://www.peanuts-code.com/en/portfolio/ title="Published Games"><span>Published Games</span></a></li><li><a href=https://www.peanuts-code.com/en/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://www.peanuts-code.com/en/tutorials/ title=Tutorials><span>Tutorials</span></a></li><li><a href=https://www.peanuts-code.com/en/about/ title=About><span>About</span></a></li><li><a href=https://www.peanuts-code.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/en/>Home</a>&nbsp;¬ª&nbsp;<a href=https://www.peanuts-code.com/en/tutorials/>ü§ñ Tutorials</a></div><h1 class=post-title>ü§ñ 2D Hit Detection for Melee Attacks in Godot3</h1><div class=post-meta><span title='2022-10-05 02:55:00 +0900 +0900'>2022-10-05</span>&nbsp;¬∑&nbsp;6 min&nbsp;¬∑&nbsp;Gobo&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/ja/tutorials/gd0018_melee_attacks/>Ja</a></li></ul></div></header><figure class=entry-cover><img loading=lazy src=https://www.peanuts-code.com/images/tutorials/gd0018_melee_attacks/img28.gif alt="2D Melee Attacks in Godot3"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#add-actions-to-input-map aria-label="Add Actions to Input Map">Add Actions to Input Map</a></li><li><a href=#create-a-player-scene aria-label="Create a Player scene">Create a Player scene</a></li><li><a href=#edit-nodes-in-the-player-scene aria-label="Edit nodes in the Player scene">Edit nodes in the Player scene</a><ul><li><a href=#sprite-node aria-label="Sprite node">Sprite node</a></li><li><a href=#bodycollisionshape-collisionshape2d-node aria-label="BodyCollisionShape (CollisionShape2D) node">BodyCollisionShape (CollisionShape2D) node</a></li><li><a href=#hitbox-area2d-node aria-label="HitBox (Area2D) node">HitBox (Area2D) node</a></li><li><a href=#hitboxcollisionshape-collisonshape2d-node aria-label="HitBoxCollisionShape (CollisonShape2D) node">HitBoxCollisionShape (CollisonShape2D) node</a></li><li><a href=#animationplayer-nodecreate-animations aria-label="AnimationPlayer nodeÔºàCreate animationsÔºâ">AnimationPlayer nodeÔºàCreate animationsÔºâ</a></li></ul></li><li><a href=#attach-a-script-to-the-player-node aria-label="Attach a script to the Player node">Attach a script to the Player node</a></li><li><a href=#create-a-enemy-scene aria-label="Create a Enemy scene">Create a Enemy scene</a></li><li><a href=#edit-nodes-in-the-enemy-scene aria-label="Edit nodes in the Enemy scene">Edit nodes in the Enemy scene</a><ul><li><a href=#sprite-node-1 aria-label="Sprite node">Sprite node</a></li><li><a href=#bodycollisionshape-node aria-label="BodyCollisionShape node">BodyCollisionShape node</a></li><li><a href=#animationplayer-node aria-label="AnimationPlayer node">AnimationPlayer node</a></li><li><a href=#revietimer-node aria-label="RevieTimer node">RevieTimer node</a></li></ul></li><li><a href=#attach-a-script-to-the-enemy-node aria-label="Attach a script to the Enemy node">Attach a script to the Enemy node</a></li><li><a href=#add-a-hitbox-signal-to-the-players-script aria-label="Add a HitBox signal to the Player&amp;rsquo;s script">Add a HitBox signal to the Player&rsquo;s script</a></li><li><a href=#create-a-world-scene aria-label="Create a World scene">Create a World scene</a></li><li><a href=#attach-a-script-to-the-world-scene aria-label="Attach a script to the World scene">Attach a script to the World scene</a></li><li><a href=#run-the-project aria-label="Run the project">Run the project</a></li><li><a href=#conclusion aria-label=Conclusion>Conclusion</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>This article introduces a method for implementing simple hit detection for melee attacks in 2D games.</p><p>This is a commonly used method where the object to attack (e.g., player character) has a collision shape (called &ldquo;Hit Box&rdquo;) that is only active during the attack, and the object to be attacked (e.g., enemy character, destructible barrels, crates, grass, etc.) has a collision shape (called &ldquo;Hurt Box). The hit judgment of the attack can be implemented by enabling/disabling the Hit Box and Hurt Box, and changing their size and position in accordance with the animation of the attack.</p><p>This is relatively easy to implement, so let&rsquo;s get started.</p><blockquote><p><strong><span style=color:salmon>Environment</span></strong><br><em>Godot version: <strong>3.5.1</strong></em><br><em>Computer OS version: <strong>macOS 11.6.5</strong></em></p></blockquote><blockquote><p><strong><span style=color:salmon>Basic Articles</span></strong><br><em>You may also find the following articles useful.</em><br><em><a href=https://www.peanuts-code.com/en/tutorials/gd0001_download/>Downloading Godot</a></em><br><em><a href=https://www.peanuts-code.com/en/tutorials/gd0002_project_manager/>Project Manager of Godot</a></em><br><br></p></blockquote><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=add-actions-to-input-map>Add Actions to Input Map<a hidden class=anchor aria-hidden=true href=#add-actions-to-input-map>#</a></h2><p>First, go to &ldquo;Project&rdquo; > &ldquo;Project Settings&rdquo; > &ldquo;Input Map&rdquo; tab and add the following actions:</p><ul><li>right: D key</li><li>left: A key</li><li>down: S key</li><li>up: W key</li><li>attack: Space bar</li></ul><p><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img1.png alt="Input Map"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-a-player-scene>Create a Player scene<a hidden class=anchor aria-hidden=true href=#create-a-player-scene>#</a></h2><ol><li>Create a scene for the player character. Create the following scene tree by setting the root node to &ldquo;KinematicBody2D&rdquo; and adding the necessary nodes.<ul><li>Player (KinematicBody2D)<ul><li>Sprite (KinematicBody2D)</li><li>BodyCollisionShape (CollisionShape2D)</li><li>HitBox (Area2D)<ul><li>HitBoxCollisionShape (CollisionShape2D)</li></ul></li><li>AnimationPlayer<br>Save this scene as a file named &ldquo;Player.tscn&rdquo;.</li></ul></li></ul></li></ol><p><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img2.png alt="Player scene tree"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=edit-nodes-in-the-player-scene>Edit nodes in the Player scene<a hidden class=anchor aria-hidden=true href=#edit-nodes-in-the-player-scene>#</a></h2><h3 id=sprite-node>Sprite node<a hidden class=anchor aria-hidden=true href=#sprite-node>#</a></h3><p>For the sprite sheet containing the player character&rsquo;s melee attack animations, I downloaded and used the <a href=https://elthen.itch.io/pixel-art-dwarf-sprites target=_blank>Pixel Art Dwarf Sprites</a>
from <a href=https://elthen.itch.io/pixel-art-dwarf-sprites target=_blank>itch.io</a>
. In particular, we will use lines 3 to 5 as the animation for melee attacks.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img3.png alt="Sprite sheet"></p><ol><li>Drag the downloaded sprite sheet to the file system dock and import it. Since the image will appear a little blurry as it is, select the file, apply the 2D Pixel preset from the Import dock, and reimport it.</li><li>Apply the imported sprite sheet to the &ldquo;Texture&rdquo; property in the inspector dock.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img4.png alt="Sprite - Texture"></li><li>Since this is a sprite sheet with 8 frames for each of the vertical and horizontal sides, set the values of &ldquo;Animation&rdquo; > &ldquo;Hframes&rdquo;/&ldquo;Vframes&rdquo; to 8 respectively.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img5.png alt="Sprite - Animation - Hframes / Vframes"></li></ol><p>It is OK if a texture for one frame appears on the 2D workspace.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img6.png alt="Sprite - 2D workspace"></p><br><h3 id=bodycollisionshape-collisionshape2d-node>BodyCollisionShape (CollisionShape2D) node<a hidden class=anchor aria-hidden=true href=#bodycollisionshape-collisionshape2d-node>#</a></h3><p>The parent &ldquo;Player&rdquo; root node is a KinematicBody2D class, so it is necessary to set up a collision shape. To distinguish it from the Hit Box collision shape we will create later, we rename it &ldquo;BodyCollisionShape&rdquo;.</p><ol><li>Apply the &ldquo;RectangleShape&rdquo; resource to the &ldquo;Shape&rdquo; property.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img7.png alt="BodyCollisionShape - Shape"></li><li>In the 2D workspace, match the collision shape to the body part of the sprite&rsquo;s texture.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img8.png alt="BodyCollisionShape - 2D workspace"></li><li>If the collision shape is visually distracting, you can set the node to be hidden in the scene dock if necessary.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img9.png alt="BodyCollisionShape - hide"></li></ol><br><h3 id=hitbox-area2d-node>HitBox (Area2D) node<a hidden class=anchor aria-hidden=true href=#hitbox-area2d-node>#</a></h3><p>A hit box is a collision shape used to determine when a character is hit by a melee attack, and since it is called a hit box, a rectangular collision shape is generally used. for the &ldquo;Area2D&rdquo; and its child node &ldquo;CollisionShape2D&rdquo;.</p><p>The parent &ldquo;HitBox&rdquo; node does not need to be edited, but the signals from this node will be used when scripting later.</p><br><h3 id=hitboxcollisionshape-collisonshape2d-node>HitBoxCollisionShape (CollisonShape2D) node<a hidden class=anchor aria-hidden=true href=#hitboxcollisionshape-collisonshape2d-node>#</a></h3><p>To distinguish it from the &ldquo;BodyCollisionShape&rdquo; node, it is named &ldquo;HitBoxCollisionShape&rdquo;.</p><ol><li>Apply a new &ldquo;RectangleShape&rdquo; resource to the &ldquo;Shape&rdquo; property and set a rectangle collision shape. The &ldquo;Extents&rdquo; property of &ldquo;RectangleShape&rdquo; can be left as default at this point, since the size and position will be changed later in the animation during the attack.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img10.png alt="HitBoxCollisionShape - Shape"></li><li>Since we want to enable collision detection only when the player character attacks, the &ldquo;Disabled&rdquo; property should be set to <strong>ON</strong> to disable collisions.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img11.png alt="HitBoxCollisionShape - Disabled"></li></ol><br><h3 id=animationplayer-nodecreate-animations>AnimationPlayer nodeÔºàCreate animationsÔºâ<a hidden class=anchor aria-hidden=true href=#animationplayer-nodecreate-animations>#</a></h3><p>To create melee attack animations with the &ldquo;AnimationPlayer&rdquo; node.</p><ol><li>Select the &ldquo;AnimationPlayer&rdquo; node in the scene dock.</li><li>Open the animation panel.</li><li>Create a new animation and name it &ldquo;right_attack1&rdquo;.<br>*It is assumed that we will create attack1, 2, and 3 for each of the left and right directions.</li><li>First, make the following settings.<ul><li>Automatic playback on loading: Off</li><li>Animation length (seconds): 0.6</li><li>Looping animation: Off</li></ul></li><li>Add a track for the &ldquo;Frame Coords&rdquo; property of the &ldquo;Sprite&rdquo; node: at 0.1 second intervals, add a texture for the third row of the sprite sheet, starting from the left end to the sixth row. Specifically, (0, 2), (1, 2), (2, 2), (3, 2), (4, 2), (5, 2), and only the x value (column of the sprite sheet) is changed from 0 to 5 while the y value (row of the sprite sheet) remains the same.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img12.png alt="AnimationPlayer - Animation pannel - Sprite node frame_coords track - adding value"></li><li>Change the &ldquo;Interpolation&rdquo; type of this track to &ldquo;Nearest&rdquo;.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img13.png alt="AnimationPlayer - Animation pannel - Sprite node frame_coords track - Interpolation"></li><li>Add a track with the &ldquo;Disabled&rdquo; property of &ldquo;BodyCollisionShape&rdquo;. Turn on the &ldquo;Disabled&rdquo; property of &ldquo;BodyCollisionShape&rdquo; at the 0.3 second position in the timeline and turn it back off at the 0.5 second position in order to prevent enemies from taking damage when the player character is attacking them.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img14.png alt="AnimationPlayer - Animation pannel - BodyCollisionShape track - adding value"></li><li>Add a track for the &ldquo;Disabled&rdquo; property of &ldquo;HitBoxCollisionShape&rdquo;. In reverse order of the previous step, turn off the &ldquo;Disabled&rdquo; property at the 0.3 second position in the timeline and turn it back on at the 0.5 second position. This will enable the Hit Box hit detection only during the very animation frame of the player character&rsquo;s attack animation when the axe is being swung down.</li><li>Continue by adding the &ldquo;Position&rdquo; property of the &ldquo;HitBoxCollisionShape&rdquo; and the &ldquo;Shape&rdquo; > &ldquo;Extents&rdquo; property track. Adjust the size and position of the collision shape of the HitBox to match the animation of the axe swinging down at 0.3 seconds in the timeline. The &ldquo;Position&rdquo; value was set to (7.5, -2.25) and the &ldquo;Extents&rdquo; value was set to (9.5, 12.25) (slightly larger than the axe track on the texture).<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img15.png alt="AnimationPlayer - 2D workspace"></li></ol><p>The final &ldquo;right_attack1&rdquo; looked like this:<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img16.png alt="AnimationPlayer - Animation pannel - right_attack1"></p><ul><li>Sprite node<ul><li>frame_coords property<ul><li>Time: 0 / Value: (0, 2) / Easing: 1.00</li><li>Time: 0.1 / Value: (1, 2) / Easing: 1.00</li><li>Time: 0.2 / Value: (2, 2) / Easing: 1.00</li><li>Time: 0.3 / Value: (3, 2) / Easing: 1.00</li><li>Time: 0.4 / Value: (4, 2) / Easing: 1.00</li><li>Time: 0.5 / Value: (5, 2) / Easing: 1.00</li></ul></li></ul></li><li>BodyCollisionShape node<ul><li>disabled property<ul><li>Time: 0.1 / Value: On / Easing: 1.00</li></ul></li></ul></li><li>HitBoxCollisionShape node<ul><li>disabled property<ul><li>Time: 0.3 / Value; Off / Easing: 1.00</li><li>Time: 0.5 / Value; On / Easing: 1.00</li></ul></li><li>position property<ul><li>Time: 0.3 / Value: (7.5, -2.25) / Easing: 1.00</li><li>Time: 0.4 / Value: (4, 4) / Easing: 1.00</li></ul></li><li>shape:extents property<ul><li>Time: 0.3 / Value: (9.5, 12.25) / Easing: 1.00</li><li>Time: 0.4 / Value: (6, 6) / Easing: 1.00</li></ul></li></ul></li></ul><p>The following GIF image shows the &ldquo;right_attack1&rdquo; animation we just created, played back at 0.5x speed. You can see that the HitBox collision shape is activated (green) only at the timing when the axe is swung down.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img17.gif alt="AnimationPlayer - playback animation"></p><br><p>A similar procedure was used to create the &ldquo;right_attack2&rdquo; animation. The texture of line 4 of the sprite sheet was used. During 0.1 ~ 0.4 seconds of the timeline, the &ldquo;Position&rdquo; and &ldquo;Extents&rdquo; of &ldquo;HitBoxCollisionShape&rdquo; were changed slightly every 0.1 second.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img18.png alt="AnimationPlayer - 2D workplace"></p><p>If you play &ldquo;right_attack2&rdquo; at 0.5x speed, it will look like this.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img19.gif alt="AnimationPlayer - playback animation"></p><br><p>In addition, an animation of &ldquo;right_attack3&rdquo; was created. This one used the texture on line 5 of the sprite sheet. The texture is only two frames long, but the two are repeated four times. The &ldquo;Sprite&rdquo; node&rsquo;s &ldquo;Position&rdquo; property track was added to make the animation move forward a little and then back.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img20.png alt="AnimationPlayer - 2D workplace"></p><p>If &ldquo;right_attack3&rdquo; is played back at 0.5x speed, the result is as follows.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img21.gif alt="AnimationPlayer - 2D workplace"></p><br><p>When creating a left-facing animation, it is easier to work with the Offset > Flip H property of the Sprite node turned on. It is easy to duplicate a previously created right-facing melee attack animation and adjust it for a left-facing animation.</p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=attach-a-script-to-the-player-node>Attach a script to the Player node<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-player-node>#</a></h2><p>To control the player character&rsquo;s movement and melee attacks, attach a script to the &ldquo;Player&rdquo; root node and code it like below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Player.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>KinematicBody2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>## Movement speed</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> speed <span style=color:#f92672>=</span> <span style=color:#ae81ff>80.0</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Movement speed</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> velocity: <span style=color:#a6e22e>Vector2</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Number of attack animations (1 ~ 3)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> attack_num <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Referencing a Sprite node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> sprite <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Sprite</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to AnimationPlayer node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> anim_player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$AnimationPlayer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Methods to control character movement inputs</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>move</span>():
</span></span><span style=display:flex><span>	velocity <span style=color:#f92672>=</span> <span style=color:#a6e22e>Vector2</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;right&#34;</span>):
</span></span><span style=display:flex><span>		velocity<span style=color:#f92672>.</span>x <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		sprite<span style=color:#f92672>.</span>flip_h <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;left&#34;</span>):
</span></span><span style=display:flex><span>		velocity<span style=color:#f92672>.</span>x <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		sprite<span style=color:#f92672>.</span>flip_h <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;down&#34;</span>):
</span></span><span style=display:flex><span>		velocity<span style=color:#f92672>.</span>y <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>Input</span><span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;up&#34;</span>):
</span></span><span style=display:flex><span>		velocity<span style=color:#f92672>.</span>y <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	velocity <span style=color:#f92672>=</span> velocity<span style=color:#f92672>.</span><span style=color:#a6e22e>normalized</span>() <span style=color:#f92672>*</span> speed
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Play idle animation if velocity is 0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> velocity<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span>() <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;idle&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e># Play run animation if velocity is greater than 0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> velocity<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span>() <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>		anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;run&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in physics process function</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_physics_process</span>(_delta):
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>move</span>()
</span></span><span style=display:flex><span>	<span style=color:#75715e># reflect inputs related to movement as character&#39;s motion</span>
</span></span><span style=display:flex><span>	velocity <span style=color:#f92672>=</span> <span style=color:#a6e22e>move_and_slide</span>(velocity)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Built-in callback function for input</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_unhandled_input</span>(event):
</span></span><span style=display:flex><span>	<span style=color:#75715e># if spacebar is pressed</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> event<span style=color:#f92672>.</span><span style=color:#a6e22e>is_action_pressed</span>(<span style=color:#e6db74>&#34;attack&#34;</span>):
</span></span><span style=display:flex><span>		<span style=color:#75715e># stop physics process to prevent movement</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>set_physics_process</span>(<span style=color:#66d9ef>false</span>)
</span></span><span style=display:flex><span>		<span style=color:#75715e># if sprite is flipped left/right (facing left)</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> sprite<span style=color:#f92672>.</span>flip_h:
</span></span><span style=display:flex><span>			<span style=color:#75715e># Play left-facing attack animation</span>
</span></span><span style=display:flex><span>			anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;left_attack&#34;</span> <span style=color:#f92672>+</span> str(attack_num))
</span></span><span style=display:flex><span>		<span style=color:#75715e># if sprite is not flipped (right-facing)</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			<span style=color:#75715e># Play the right-facing attack animation</span>
</span></span><span style=display:flex><span>			anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;right_attack&#34;</span> <span style=color:#f92672>+</span> str(attack_num))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># If current attack animation number is less than 3, add 1 to the number</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> attack_num <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>3</span>:
</span></span><span style=display:flex><span>			attack_num <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># Reset the number to 1 if the current attack animation number is 3 or more</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>			attack_num <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><br><p>Connect the &ldquo;animation_finished&rdquo; signal of the &ldquo;AnimationPlayer&rdquo; node to the script and edit the auto-generated method as follows</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_AnimationPlayer_animation_finished</span>(anim_name):
</span></span><span style=display:flex><span>	<span style=color:#75715e># Resume the physical process if the animation name contains &#34;attack&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#34;attack&#34;</span> <span style=color:#f92672>in</span> anim_name:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>set_physics_process</span>(<span style=color:#66d9ef>true</span>)
</span></span></code></pre></div><br><p>Let&rsquo;s run the &ldquo;Player&rdquo; scene.</p><p>If you enable the setting to display collision shapes in the &ldquo;Debug&rdquo; menu in advance, it will be easier to see the changes in collision shapes during the animation.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img21.1.png alt="run project"></p><p>The movement of the player character will look like the following GIF image.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img22.gif alt="Player - run scene"></p><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-a-enemy-scene>Create a Enemy scene<a hidden class=anchor aria-hidden=true href=#create-a-enemy-scene>#</a></h2><p>Prepare an &ldquo;Enemy&rdquo; scene to check the hit detection of the player character&rsquo;s melee attacks. Since this is similar to the &ldquo;Player&rdquo; scene, I will briefly describe it here.</p><p>The scene tree is as follows.</p><ul><li>Enemy (KinematicBody2D)<ul><li>Sprite</li><li>BodyCollisionShape (CollisionShape2D)</li><li>AnimationPlayer</li><li>ReviveTimer (Timer)</li></ul></li></ul><p><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img23.png alt="Enemy - Scene tree"></p><br><h2 id=edit-nodes-in-the-enemy-scene>Edit nodes in the Enemy scene<a hidden class=anchor aria-hidden=true href=#edit-nodes-in-the-enemy-scene>#</a></h2><h3 id=sprite-node-1>Sprite node<a hidden class=anchor aria-hidden=true href=#sprite-node-1>#</a></h3><p>We will use the assets from <a href=https://game-endeavor.itch.io/mystic-woods target=_blank>itch.io - mystic woods</a>
for the sprite textures of the enemy characters. Apply the &ldquo;slime.png&rdquo; sprite sheet from the downloaded assets to the &ldquo;Texture&rdquo; property of the &ldquo;Sprite&rdquo; node.</p><h3 id=bodycollisionshape-node>BodyCollisionShape node<a hidden class=anchor aria-hidden=true href=#bodycollisionshape-node>#</a></h3><p>For the &ldquo;Shape&rdquo; property, apply &ldquo;CircleShape2D&rdquo; to make the collision shape slightly smaller than the sprite. In this tutorial, this will be the so-called Hurt Box. When the player character&rsquo;s hit box overlaps this collision shape, the hit detection becomes effective. This control will be done later in the script.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img24.png alt="Enemy - BodyCollisionShape"></p><h3 id=animationplayer-node>AnimationPlayer node<a hidden class=anchor aria-hidden=true href=#animationplayer-node>#</a></h3><p>In the Animation panel, prepare the following four animations. All of them are set to change to the texture of the next frame on the sprite sheet every 0.1 second.</p><ul><li><strong>jump</strong>: Animation of jumping when waiting (automatically played when loading)</li><li><strong>hurt</strong>: Animation for when the character takes damage.</li><li><strong>die</strong>: Animation for dying when life reaches 0.<ul><li>Turn on &ldquo;Disabled&rdquo; for &ldquo;BodyCollisionShape</li></ul></li><li><strong>revive</strong>: Animation when the character comes back to life after a certain period of time after death.<ul><li>Turn off &ldquo;Disabled&rdquo; of &ldquo;BodyCollisionShape</li></ul></li></ul><h3 id=revietimer-node>RevieTimer node<a hidden class=anchor aria-hidden=true href=#revietimer-node>#</a></h3><p>Enable the &ldquo;One Shot&rdquo; property.</p><br><h2 id=attach-a-script-to-the-enemy-node>Attach a script to the Enemy node<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-enemy-node>#</a></h2><p>Attach a script to the &ldquo;Enemy&rdquo; root node and code it like below.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Enemy.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>KinematicBody2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Maximum value of life</span>
</span></span><span style=display:flex><span>export (<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>var</span> max_life <span style=color:#f92672>=</span> <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Current life</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> life: <span style=color:#66d9ef>int</span> <span style=color:#f92672>=</span> max_life
</span></span><span style=display:flex><span><span style=color:#75715e># Variable to refer to Player instance</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> player: KinematicBody2D
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to the Sprite node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> sprite <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Sprite</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Reference to the AnimationPlayer node</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> anim_player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$AnimationPlayer</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ReviveTimer node reference</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> revive_timer <span style=color:#f92672>=</span> <span style=color:#a6e22e>$ReviveTimer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_process</span>(_delta):
</span></span><span style=display:flex><span>	<span style=color:#75715e># flip the Sprite&#39;s orientation or not depending on the player&#39;s position</span>
</span></span><span style=display:flex><span>	sprite<span style=color:#f92672>.</span>flip_h <span style=color:#f92672>=</span> global_position<span style=color:#f92672>.</span>x <span style=color:#f92672>&gt;</span> player<span style=color:#f92672>.</span>global_position<span style=color:#f92672>.</span>x
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Damage methods</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>hurt</span>():
</span></span><span style=display:flex><span>	<span style=color:#75715e># Reduce life by 1</span>
</span></span><span style=display:flex><span>	life <span style=color:#f92672>-=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Play the animation hurt</span>
</span></span><span style=display:flex><span>	anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;hurt&#34;</span>)
</span></span></code></pre></div><br><p>In addition, connect the &ldquo;animation_finished&rdquo; signal of &ldquo;AnimationPlayer&rdquo; and the &ldquo;timeout&rdquo; signal of &ldquo;ReviveTimer&rdquo; to the script and edit the respective generated methods as follows:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Enemy.gd###</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method called by AnimationPlayer&#39;s signal when animation is finished</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_AnimationPlayer_animation_finished</span>(anim_name):
</span></span><span style=display:flex><span>	<span style=color:#75715e># If the finished animation is hurt</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> anim_name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;hurt&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#75715e># Return to jump animation if life is greater than 0</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> life <span style=color:#f92672>&gt;</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>			anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;jump&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#75715e># If life is less than 0, play die animation</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> life <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;die&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e># Start ReviveTimer if the animation that ended is die</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> anim_name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;die&#34;</span>:
</span></span><span style=display:flex><span>		revive_timer<span style=color:#f92672>.</span><span style=color:#a6e22e>start</span>()
</span></span><span style=display:flex><span>	<span style=color:#75715e># If the animation that ended is &#34;revive&#34; </span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> anim_name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;revive&#34;</span>:
</span></span><span style=display:flex><span>		anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;jump&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method called on ReviveTimer timeout signal</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_ReviveTimer_timeout</span>():
</span></span><span style=display:flex><span>	<span style=color:#75715e># Play the revive animation</span>
</span></span><span style=display:flex><span>	anim_player<span style=color:#f92672>.</span><span style=color:#a6e22e>play</span>(<span style=color:#e6db74>&#34;revive&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e># Return life to its maximum value</span>
</span></span><span style=display:flex><span>	life <span style=color:#f92672>=</span> max_life
</span></span></code></pre></div><br><hr><h2 id=add-a-hitbox-signal-to-the-players-script>Add a HitBox signal to the Player&rsquo;s script<a hidden class=anchor aria-hidden=true href=#add-a-hitbox-signal-to-the-players-script>#</a></h2><p>Make the &ldquo;Player.gd&rdquo; script call the <code>hurt</code> method of &ldquo;Enemy.gd&rdquo; by the &ldquo;HitBox&rdquo; signal when it is hit by a melee attack.</p><p>Return to the &ldquo;Player.tscn&rdquo; scene and connect the &ldquo;body_entered(body: Node)&rdquo; signal of the &ldquo;HitBox&rdquo; node to the &ldquo;Player.gd&rdquo; script.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###Player.gd###</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Omitted</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Method called with a signal when the physical body is hit by the HitBox</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_on_HitBox_body_entered</span>(body):
</span></span><span style=display:flex><span>	<span style=color:#75715e># If the name of the physical body is &#34;Enemy&#34;, call its hurt method.</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> body<span style=color:#f92672>.</span>name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Enemy&#34;</span>:
</span></span><span style=display:flex><span>		body<span style=color:#f92672>.</span><span style=color:#a6e22e>hurt</span>()
</span></span></code></pre></div><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=create-a-world-scene>Create a World scene<a hidden class=anchor aria-hidden=true href=#create-a-world-scene>#</a></h2><p>Finally, create a &ldquo;World&rdquo; scene and add a &ldquo;Player&rdquo; scene instance and an &ldquo;Enemy&rdquo; scene instance to it.</p><p>The scene tree is simply as follows.</p><ul><li>World (Node2D)<ul><li>Enemy (instance of Enemy.tscn)</li><li>Player (instance of Player.tscn)</li></ul></li></ul><p><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img25.png alt="World - Scene tree"></p><p>Place each instance appropriately on the 2D workspace.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img26.png alt="World - 2D workspace"></p><br><hr><h2 id=attach-a-script-to-the-world-scene>Attach a script to the World scene<a hidden class=anchor aria-hidden=true href=#attach-a-script-to-the-world-scene>#</a></h2><p>Attach a script to the World scene and code it as follows. The purpose is to pass a reference to the &ldquo;Player&rdquo; instance from the &ldquo;World&rdquo; root node to the variable <code>player</code> in the &ldquo;Enemy&rdquo; node declared in &ldquo;Enemy.gd&rdquo;.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-GDScript data-lang=GDScript><span style=display:flex><span><span style=color:#75715e>###World.gd###</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>Node2D</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> player <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Player</span>
</span></span><span style=display:flex><span>onready <span style=color:#66d9ef>var</span> enemy <span style=color:#f92672>=</span> <span style=color:#a6e22e>$Enemy</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>_ready</span>():
</span></span><span style=display:flex><span>	enemy<span style=color:#f92672>.</span>player <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>player
</span></span></code></pre></div><br><hr><h2 id=run-the-project>Run the project<a hidden class=anchor aria-hidden=true href=#run-the-project>#</a></h2><p>Finally, run the project to check the behavior of the hit judgment for melee attacks.</p><p>You can see that when the collision shape of the Player&rsquo;s HitBox node overlaps with the Enemy&rsquo;s BodyCollisionShape (Hurt Box), the hit detection is activated and the Enemy&rsquo;s hurt animation is played.<br><img loading=lazy src=/images/tutorials/gd0018_melee_attacks/img28.gif alt="run project"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=conclusion>Conclusion<a hidden class=anchor aria-hidden=true href=#conclusion>#</a></h2><p>In this article, I introduced a simple hit detection method for melee attacks in 2D games, and the implementation of hit detection using Hit Boxes and Hurt Boxes is relatively easy to understand and can be applied to various games.</p><p>Incidentally, in actual games, it is often the case that separate Hit Boxes and Hurt Boxes are set up for each body part, and more complex mechanisms are created by combining these Hit Boxes and Hurt Boxes.</p><p>For example, in a fighting game, if the attacker has several Hit Boxes for hands, feet, head, etc., and the receiver has Hurt Boxes for the upper, middle, and lower positions, the damage can be changed in complex ways depending on the combination of each Hit Box and Hurt Box.</p><p>In a zombie FPS game, you could have different Hurt Boxes for the zombie&rsquo;s head and body, so that shooting at the head would kill the zombie in one shot, but not the other parts of the body.</p><p>Anyway, I hope this article has been of some help.</p><hr><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><p>In preparing this article, we found the following links to be very helpful. We hope you will find them useful as well.</p><ul><li><p><a href=https://docs.godotengine.org/en/stable/tutorials/animation/introduction.html target=_blank>Introduction to the animation features</a></p></li><li><p><a href=http://kidscancode.org/godot_recipes/3.x/animation/melee_attacks/ target=_blank>KidsCanCode - MELEE ATTACKS</a></p></li><li><p><a href=https://youtu.be/dBvfwLxoY3I target=_blank>YouTube - How to Make Melee Combat in Godot</a></p></li><li><p><a href=https://youtu.be/vDbEfmPcv-Q target=_blank>YouTube - Make an Action RPG in Godot 3.2 (P11 | Melee attacks with Hurtboxes and Hitboxes)</a></p></li><li><p><a href=https://elthen.itch.io/pixel-art-dwarf-sprites target=_blank>itch.io - Pixel Art Dwarf Sprites</a>
*Resource</p></li><li><p><a href=https://game-endeavor.itch.io/mystic-woods target=_blank>itch.io - mystic woods</a>
*Resource</p></li></ul><hr><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></div><footer class=post-footer><br><div class=recommendation><span>ü©µ I hope you like this article ü©µ</span></div><div class=share-buttons><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on x" href="https://x.com/intent/tweet/?text=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f&amp;hashtags=GameDev%2cGodotEngine%2cGodot3%2c2D%2cMeleeAttack%2cCollision%2cAnimation"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f&amp;title=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3&amp;summary=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3&amp;source=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f&title=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on whatsapp" href="https://api.whatsapp.com/send?text=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3%20-%20https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on telegram" href="https://telegram.me/share/url?text=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg>
</a><a target=_blank rel="noopener noreferrer" aria-label="share ü§ñ 2D Hit Detection for Melee Attacks in Godot3 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%f0%9f%a4%96%202D%20Hit%20Detection%20for%20Melee%20Attacks%20in%20Godot3&u=https%3a%2f%2fwww.peanuts-code.com%2fen%2ftutorials%2fgd0018_melee_attacks%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></div><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/godotengine/>GodotEngine</a></li><li><a href=https://www.peanuts-code.com/en/tags/godot3/>Godot3</a></li><li><a href=https://www.peanuts-code.com/en/tags/2d/>2D</a></li><li><a href=https://www.peanuts-code.com/en/tags/meleeattack/>MeleeAttack</a></li><li><a href=https://www.peanuts-code.com/en/tags/collision/>Collision</a></li><li><a href=https://www.peanuts-code.com/en/tags/animation/>Animation</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/en/tutorials/gd0019_2d_animation_state_machine/><span class=title>¬´ Prev</span><br><span>ü§ñ Animation State Machine in Godot3</span>
</a><a class=next href=https://www.peanuts-code.com/en/tutorials/gd0017_2d_grid_based_path_finding/><span class=title>Next ¬ª</span><br><span>ü§ñ 2D Grid Based Path Finding in Godot3</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/en/>Peanuts Code</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>