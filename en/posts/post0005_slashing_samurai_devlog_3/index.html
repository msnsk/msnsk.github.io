<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>üìî Devlog: Slashing Samurai - Logic | Peanuts Code</title>
<meta name=keywords content="GameDev,IndieDev,Devlog,MobileGame,iOS,SlashingSamurai"><meta name=description content="This article is a record of the &ldquo;logic&rdquo; behind the development of &ldquo;Slashing Samurai,&rdquo; a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.
Slashing Samurai is available for free download on the App Store. Just click the banner below to get this game!

     




Identifying Necessary Screens
I am the type to prioritize visuals. In game development, including the creation of &ldquo;Slashing Samurai&rdquo; in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.


Initially, the plan included the following screens:

Start Screen
Play Screen (including Pause Screen)
Stage Selection Screen
Settings Screen

In the end, the following screens were added:

Prologue Screen
Menu Screen

Credit Screen
Score Screen


Falling Object Record Screen

This devlog will focus on documenting the screens that were originally planned to be the core of the game."><meta name=author content="gobo"><link rel=canonical href=https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_3/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://www.peanuts-code.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.peanuts-code.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://www.peanuts-code.com/favicon-32x32.png><link rel=apple-touch-icon href=https://www.peanuts-code.com/apple-touch-icon.png><link rel=mask-icon href=https://www.peanuts-code.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=ja href=https://www.peanuts-code.com/ja/posts/post0005_slashing_samurai_devlog_3/><link rel=alternate hreflang=en href=https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_3/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="üìî Devlog: Slashing Samurai - Logic"><meta property="og:description" content="This article is a record of the &ldquo;logic&rdquo; behind the development of &ldquo;Slashing Samurai,&rdquo; a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.
Slashing Samurai is available for free download on the App Store. Just click the banner below to get this game!

     




Identifying Necessary Screens
I am the type to prioritize visuals. In game development, including the creation of &ldquo;Slashing Samurai&rdquo; in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.


Initially, the plan included the following screens:

Start Screen
Play Screen (including Pause Screen)
Stage Selection Screen
Settings Screen

In the end, the following screens were added:

Prologue Screen
Menu Screen

Credit Screen
Score Screen


Falling Object Record Screen

This devlog will focus on documenting the screens that were originally planned to be the core of the game."><meta property="og:type" content="article"><meta property="og:url" content="https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_3/"><meta property="og:image" content="https://www.peanuts-code.com/images/posts/post0005/3_logic/07.gif"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-31T04:00:00+09:00"><meta property="article:modified_time" content="2023-12-31T04:00:00+09:00"><meta property="og:site_name" content="Peanuts Code ü•ú"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://www.peanuts-code.com/images/posts/post0005/3_logic/07.gif"><meta name=twitter:title content="üìî Devlog: Slashing Samurai - Logic"><meta name=twitter:description content="This article is a record of the &ldquo;logic&rdquo; behind the development of &ldquo;Slashing Samurai,&rdquo; a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.
Slashing Samurai is available for free download on the App Store. Just click the banner below to get this game!

     




Identifying Necessary Screens
I am the type to prioritize visuals. In game development, including the creation of &ldquo;Slashing Samurai&rdquo; in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.


Initially, the plan included the following screens:

Start Screen
Play Screen (including Pause Screen)
Stage Selection Screen
Settings Screen

In the end, the following screens were added:

Prologue Screen
Menu Screen

Credit Screen
Score Screen


Falling Object Record Screen

This devlog will focus on documenting the screens that were originally planned to be the core of the game."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"üìî Blog","item":"https://www.peanuts-code.com/en/posts/"},{"@type":"ListItem","position":2,"name":"üìî Devlog: Slashing Samurai - Logic","item":"https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"üìî Devlog: Slashing Samurai - Logic","name":"üìî Devlog: Slashing Samurai - Logic","description":"This article is a record of the \u0026ldquo;logic\u0026rdquo; behind the development of \u0026ldquo;Slashing Samurai,\u0026rdquo; a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.\nSlashing Samurai is available for free download on the App Store. Just click the banner below to get this game!\nIdentifying Necessary Screens I am the type to prioritize visuals. In game development, including the creation of \u0026ldquo;Slashing Samurai\u0026rdquo; in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.\nInitially, the plan included the following screens:\nStart Screen Play Screen (including Pause Screen) Stage Selection Screen Settings Screen In the end, the following screens were added:\nPrologue Screen Menu Screen Credit Screen Score Screen Falling Object Record Screen This devlog will focus on documenting the screens that were originally planned to be the core of the game.\n","keywords":["GameDev","IndieDev","Devlog","MobileGame","iOS","SlashingSamurai"],"articleBody":"This article is a record of the ‚Äúlogic‚Äù behind the development of ‚ÄúSlashing Samurai,‚Äù a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.\nSlashing Samurai is available for free download on the App Store. Just click the banner below to get this game!\nIdentifying Necessary Screens I am the type to prioritize visuals. In game development, including the creation of ‚ÄúSlashing Samurai‚Äù in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.\nInitially, the plan included the following screens:\nStart Screen Play Screen (including Pause Screen) Stage Selection Screen Settings Screen In the end, the following screens were added:\nPrologue Screen Menu Screen Credit Screen Score Screen Falling Object Record Screen This devlog will focus on documenting the screens that were originally planned to be the core of the game.\nStart Screen and Prologue Screen If we were to pursue a casual game, one might argue that the start screen is unnecessary. However, for developers, are there any screens other than the start screen that they want to prepare (probably)? While I had initially planned for the start screen to transition to the play, settings, and credit screens, looking at the specifications of mobile games in the market, I noticed that many had only a ‚ÄúStart‚Äù button. Believing there might be reasons for this trend, I decided to mimic it without much thought.\nNext, to add a bit of fun to the start screen, I placed the player character, a samurai, in the center and animated it. From the beginning of development, I had the image of the samurai swinging a sword and striking a pose when the ‚ÄúStart‚Äù button is pressed, so I implemented that using the Player scene created for the play screen.\nLater on, despite being a casual game, I began to incorporate various elements. Call it passion in the name of foolishness. One of the elements I added was the prologue. Initially, I had set up the start screen to automatically transition to the prologue screen a few seconds after being left idle. However, as the loading time for the next screen started to become noticeable, I decided to place a ‚ÄúPrologue‚Äù button on the start screen, almost saying, ‚ÄúPlease enjoy while waiting.‚Äù\nThe structure of the prologue screen is quite simple. Essentially, I applied a pattern texture for the background to a TextureRect node and added a Label node with the prologue text applied to it in a ScrollContainer node. I implemented the mechanism for it to automatically flow from bottom to top with the following code:\nconst MAX_SCROLL : int = 5924 func _process(_delta): if scroll_container.scroll_vertical \u003c MAX_SCROLL: scroll_container.scroll_vertical += 1 Play Screen The play screen is the main part of the game, so it‚Äôs quite extensive. With the Game scene as the topmost, I added the necessary scenes below it. Although the final form involves adding various nodes for detailed effects, the basic structure is as follows:\nGame: Node World: Node2D Background: Node2D Player: CharacterBody2D Obj: RigidBody2D UI: Control Background Scene I created the Background scene and added it as a branch to the World scene. In this scene, I used a TextureRect node with a full rectangular pattern texture for the background, and at the bottom of the screen, I set up a StaticBody2D node as a platform for the player character to walk on.\nAs a small detail, I added the movement of the sun from east to west and the waxing and waning of the moon in the development version. The sprites for the sun and moon were created using the Aseprite app.\nAll the changes in the background, such as the movement of the sun and moon, sunrise, sunset, and changes in the color of the sky at night, were consolidated in an AnimationPlayer.\nPlayer Scene I created the Player scene and added it as a branch to the World node. This scene has the CharacterBody2D node at the top, and I set a pixel art samurai as a texture on a Sprite2D node.\nSince the player character needs a hitbox area for the objects falling towards it, I prepared a Hitbox with an Area2D node. Despite being called a ‚Äúbox,‚Äù it‚Äôs actually a line. To visually indicate this to the player, I added a Line2D node with the same length as the line of the CollisionShape2D of the Hitbox node. I chose a purplish color for the line, matching the image color. I also added a VisibleOnScreenNotifier2D node because there were methods triggered by the appearance and disappearance of the samurai, which I utilized in the script.\nIn the latter part of development, I introduced dialogue for the samurai. For this purpose, I created a Bubble scene to display speech balloons üí¨ and added it as a branch to the Player scene. I used the DialogueManager plugin for this, which proved to be relatively easy to use due to its comprehensive tutorial.\nTo add some flair to the samurai‚Äôs actions, I also included a ghost effect for the player character.\nAll the sound effects used for the samurai, such as footsteps, jumping, landing, and the sound of slashing with a sword, were added one by one as AudioStreamPlayer nodes. Despite making the scene tree somewhat redundant, I believed it would be faster to process than loading sound assets on the fly during gameplay.\nUser operation for the samurai, including jumping, maintaining height while keeping the touch, and releasing the touch to interact with the hitbox, was implemented in the unhandled_input() method. This method also included closing the samurai‚Äôs speech balloon üí¨.\nfunc _unhandled_input(_event): if player_state == PlayerState.IDLING \\ and is_on_floor() \\ and Input.is_action_just_pressed(\"touch\"): if speech_state == SpeechState.SAID: bubble.hide() elif speech_state == SpeechState.SILENT: print(\"Screen Touched\") is_touching = true hit_box_col_shape.disabled = false # CollisionShape2D of Hitbox node sfx_jump.play() # AudioStreamPlayer anim_player.play(\"jump\") # AnimationPlayer velocity.y = -JUMP_SPEED player_state = PlayerState.JUMPING if is_touching \\ and not is_on_floor() \\ and Input.is_action_just_released(\"touch\"): print(\"Screen Released\") is_touching = false released.emit() hit_box.hide() hit_box_col_shape.disabled = true if player_state == PlayerState.JUMPING: velocity.y = move_toward(velocity.y, 0, 1600) Obj Scene Obj, short for Object, is the scene for falling objects. I added this scene as a branch to the World scene. The root of the Obj scene is a RigidBody2D node. Since it automatically handles physics calculations, it was straightforward to make the falling objects drop from the top of the screen. Next, I pondered a bit on how to divide the falling objects evenly when they were cut by the samurai. Perhaps it could be easily implemented using shaders if mastered (I still don‚Äôt know if it‚Äôs possible). However, since I have no skills with shaders, I had no choice but to proceed with another method. If it‚Äôs challenging to split the sprite of a falling object directly, why not give the illusion that it is split? That‚Äôs when the idea struck me: line up cleanly cut pieces from the beginning to make it appear as if they were never cut. The following videos demonstrate the implementation of this method in the early stages of development.\nI implemented the pseudo-split effect using the following method:\nFreeze the Obj node when the falling object is cut by the samurai (turn on the Freeze property). Add ObjPiece scenes as child nodes to the Obj node, dividing them as needed. Position each ObjPiece node to overlap with the parent Obj node‚Äôs sprite at regular intervals. Apply a texture divided using the AtlasTexture class to each ObjPiece node, based on the sprite of the Obj scene. Generate CollisionPolygon2D as child nodes for each ObjPiece node based on the transparency of the AtlasTexture. The logic for the above was coded in the following scripts.\nScript for the Obj node:\nconst PIECE_SCENE : PackedScene = preload(\"res://obj_base/obj_piece/obj_piece.tscn\") @onready var sprite: Sprite2D = $Sprite2D func generate_obj_pieces(): var tex_image = sprite.texture var tex_size = sprite.texture.get_size() var h_cuts := 12 var v_cuts := 8 var frag_size = Vector2(tex_size.x / h_cuts, tex_size.y / v_cuts) for i in h_cuts: for j in v_cuts: var pce = PIECE_SCENE.instantiate() var cor = Vector2(frag_size.x * i, frag_size.y * j) var pos = (cor + frag_size/2 - tex_size/2) pieces.call_deferred(\"add_child\", pce) pce.position = pos pce.call_deferred(\"set_sprite\", tex_image, cor, frag_size) pce.call_deferred(\"set_col_poly\") Script for the ObjPiece node:\nfunc set_sprite(tex_image:Texture2D, frag_pos:Vector2, frag_size:Vector2): var tex := AtlasTexture.new() tex.set_atlas(tex_image) tex.set_region(Rect2(frag_pos, frag_size)) sprite.texture = tex func set_col_poly(): var polygons = sprite.create_polygons() if not polygons.is_empty(): for i in polygons.size(): var col_poly := CollisionPolygon2D.new() col_poly.set_polygon(polygons[i]) col_poly.position -= sprite.texture.get_size() / 2 col_poly.disabled = false call_deferred(\"add_child\", col_poly) Script for the child Sprite node of the ObjPiece node:\nfunc create_polygons(): var bitmap = BitMap.new() bitmap.create_from_image_alpha(texture.get_image()) var rect := Rect2(Vector2.ZERO, texture.get_size()) var polygons = bitmap.opaque_to_polygons(rect) return polygons I faced some challenges, such as ObjPiece nodes falling ahead of the Obj node or vice versa while the parent Obj node was falling. In the end, I struggled quite a bit and realized that I needed to set the Freeze property of the ObjPiece (RigidBody2D) root node in the Inspector beforehand and also set the Freeze Mode to Kinematic.\nIn the final version, I established collision areas for ‚Äúsingle cut‚Äù and ‚Äúmultiple cuts‚Äù on the falling objects and determined the number of divisions for each, branching the script accordingly. ‚ÄúSingle cut‚Äù provides a more detailed and satisfying cutting effect.\nUI Scene For the UI during gameplay, I initially placed the HUD at the bottom of the screen. I aligned it with the collision shape of the StaticBody2D node, which represents the samurai‚Äôs platform in the Background scene. The HUD includes four buttons for ‚ÄúPause,‚Äù ‚ÄúResume,‚Äù ‚ÄúOpen Settings,‚Äù and ‚ÄúGo to Stage Selection.‚Äù I kept the design of the buttons simple by using royalty-free material only for the icons and adjusting the properties of each node for other design and layout aspects.\nI also created a pause screen as one of the UI scenes. I added a semi-transparent light green ColorRect node covering the entire screen and displayed the text ‚ÄúPaused‚Äù using a Label node. All buttons except the ‚ÄúPause‚Äù button on the HUD are disabled during the pause. This is a preventive measure against accidental clicks.\nWhen pressing the ‚ÄúGo to Stage Selection‚Äù button, a confirmation dialog is displayed asking, ‚ÄúAre you sure you want to interrupt the game and move to the stage selection screen?‚Äù The final options for the buttons are ‚ÄúYes‚Äù and ‚ÄúNo,‚Äù but in the early stages of development, I used wording like ‚ÄúUnderstood(ÊâøÁü•)‚Äù and ‚ÄúDecline(Êñ≠„Çã)‚Äù to create a more atmospheric feel. However, I decided to discard this in favor of clarity over atmosphere.\nTowards the end of development, I added a tutorial. Although I initially aimed for gameplay that could be easily understood without a tutorial, I thought it would be nice to have the option to view a tutorial at any time. Therefore, I set it up so that the tutorial starts when you press the (?) icon in the upper right corner of the screen during a pause.\nI implemented hitbox feedback for when the samurai sheaths the sword and when falling objects are cut. A ‚ÄúClean Cut (Ippon)‚Äù or ‚ÄúSkillful Cut (Waza-ari)‚Äù hitbox indication is displayed. Initially, there was a memory leak issue related to the animation that resized the font from an extra-large size to a standard size in an instant. In the end, I discovered that directly changing the scale property value is the correct approach for animating text size changes in a Label node, rather than manipulating the Theme Overrides Font Size property in AnimationPlayer. It‚Äôs essential to be cautious about assumptions.\nI also implemented post-stage options buttons. The options are ‚ÄúProceed to Next,‚Äù ‚ÄúRetry,‚Äù and ‚ÄúStage Selection.‚Äù Considering mobile casual gaming scenarios, where players might be on public transportation and sometimes operating the game with one hand, I placed these option buttons at the bottom of the screen. Since ‚ÄúProceed to Next‚Äù is likely the most frequently pressed, I positioned it at the bottom.\nStage Selection Screen I created the stage selection screen separately from the gameplay screen. From this screen, you can navigate to the settings, menu, and falling object records screens. The menu screen further provides links to the score screen, credit/license screen, App review page, and game data deletion feature.\nInitially, I prepared 200 stage selection icons inside a ScrollContainer, and the VisibleOnScreenEnabler2D node controlled their visibility based on whether they were on or off-screen to conserve computer resources. However, even with this logic, the scrolling motion felt sluggish, so I changed the structure. I added level change buttons and adjusted the display to show only 20 stage icons for one level within one screen. This eliminated the sluggishness.\nSimilar to the gameplay screen, I added a tutorial for the stage selection screen, assuming some users might find the controls a bit confusing. You can access the tutorial at any time by pressing the (?) icon in the upper right corner.\nSettings Screen The structure of the settings screen itself is straightforward. I used Container-type nodes to organize the layout. The button icons use royalty-free material.\nAll buttons have Toggle Mode enabled, and the toggled(button_pressed: bool) signal is connected to the root node‚Äôs script. For example, the signal of the BGM button is connected to the following method:\nfunc _on_background_music_button_toggled(button_pressed): if button_pressed: Gamedata.bgm_enabled = true if Gamedata.sfx_enabled: enabled_sound_player.play() bgm_disabled.emit() else: Gamedata.bgm_enabled = false if Gamedata.sfx_enabled: disabled_sound_player.play() bgm_enabled.emit() bgm_button.release_focus() In the above code, Gamedata is a script loaded using Godot‚Äôs Autoload feature. To save settings, a gamedata.gd script was created to handle save/load functionality, and it gets automatically loaded at the start of the game. The script code is as follows:\nconst OPTIONS_PATH := \"user://options.save\" var bgm_enabled := true var sfx_enabled := true var background_pattern := true var ippon_only := false var speech_bubble_enabled := true var speech_bubble_auto_hide := false func save_options(): var options = { \"bgm_enabled\": bgm_enabled, \"sfx_enabled\": sfx_enabled, \"background_pattern\": background_pattern, \"ippon_only\": ippon_only, \"speech_bubble_enabled\": speech_bubble_enabled, \"speech_bubble_auto_hide\": speech_bubble_auto_hide } var file = FileAccess.open(OPTIONS_PATH, FileAccess.WRITE) file.store_var(options) file.close() func load_options(): var file = FileAccess.open(OPTIONS_PATH, FileAccess.READ) if !file: return var options = file.get_var() if !options: file.close() return if options.has(\"bgm_enabled\"): bgm_enabled = options[\"bgm_enabled\"] if options.has(\"sfx_enabled\"): sfx_enabled = options[\"sfx_enabled\"] if options.has(\"background_pattern\"): background_pattern = options[\"background_pattern\"] if options.has(\"ippon_only\"): ippon_only = options[\"ippon_only\"] if options.has(\"speech_bubble_enabled\"): speech_bubble_enabled = options[\"speech_bubble_enabled\"] if options.has(\"speech_bubble_auto_hide\"): speech_bubble_auto_hide = options[\"speech_bubble_auto_hide\"] file.close() Conclusion That concludes the portion of this development log related to the logic of ‚ÄúMono Kiri Samurai.‚Äù\nWhile I cannot speak for 3D games, for 2D games, I found that by combining various classes provided by Godot, you can achieve almost anything you want. However, simultaneously translating game ideas into algorithms, reading documentation to implement them, and validating these processes can require a considerable amount of patience, as I have come to understand.\nI hope this development log serves as a helpful resource for someone involved in game development.\n","wordCount":"2534","inLanguage":"en","image":"https://www.peanuts-code.com/images/posts/post0005/3_logic/07.gif","datePublished":"2023-12-31T04:00:00+09:00","dateModified":"2023-12-31T04:00:00+09:00","author":{"@type":"Person","name":"gobo"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_3/"},"publisher":{"@type":"Organization","name":"Peanuts Code","logo":{"@type":"ImageObject","url":"https://www.peanuts-code.com/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.peanuts-code.com/en/ accesskey=h title="Peanuts Code (Alt + H)"><img src=https://www.peanuts-code.com/images/logomark.png alt aria-label=logo height=35>Peanuts Code</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li><li><a href=https://www.peanuts-code.com/ja/ title=Japanese aria-label=üáØüáµÊó•Êú¨Ë™û>üáØüáµÊó•Êú¨Ë™û</a></li></ul></div></div><ul id=menu><li><a href=https://www.peanuts-code.com/en/ title=Home><span>Home</span></a></li><li><a href=https://www.peanuts-code.com/en/portfolio/ title=Works><span>Works</span></a></li><li><a href=https://www.peanuts-code.com/en/posts/ title=Blogs><span>Blogs</span></a></li><li><a href=https://www.peanuts-code.com/en/tutorials/ title=Tutorials><span>Tutorials</span></a></li><li><a href=https://www.peanuts-code.com/en/about/ title=About><span>About</span></a></li><li><a href=https://www.peanuts-code.com/en/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://www.peanuts-code.com/en/>Home</a>&nbsp;¬ª&nbsp;<a href=https://www.peanuts-code.com/en/posts/>üìî Blog</a></div><h1 class="post-title entry-hint-parent">üìî Devlog: Slashing Samurai - Logic</h1><div class=post-meta><span title='2023-12-31 04:00:00 +0900 +0900'>2023-12-31</span>&nbsp;¬∑&nbsp;6 min&nbsp;|&nbsp;Translations:<ul class=i18n_list><li><a href=https://www.peanuts-code.com/ja/posts/post0005_slashing_samurai_devlog_3/>üáØüáµÊó•Êú¨Ë™û</a></li></ul></div><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on x" href="https://x.com/intent/tweet/?text=%f0%9f%93%94%20Devlog%3a%20Slashing%20Samurai%20-%20Logic&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f&amp;hashtags=GameDev%2cIndieDev%2cDevlog%2cMobileGame%2ciOS%2cSlashingSamurai"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f&title=%f0%9f%93%94%20Devlog%3a%20Slashing%20Samurai%20-%20Logic"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/indiedev/>IndieDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/devlog/>Devlog</a></li><li><a href=https://www.peanuts-code.com/en/tags/mobilegame/>MobileGame</a></li><li><a href=https://www.peanuts-code.com/en/tags/ios/>IOS</a></li><li><a href=https://www.peanuts-code.com/en/tags/slashingsamurai/>SlashingSamurai</a></li></ul></header><figure class=entry-cover><img loading=eager src=https://www.peanuts-code.com/images/posts/post0005/3_logic/07.gif alt="Devlog: Slashing Samurai - Logic"></figure><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#identifying-necessary-screens>Identifying Necessary Screens</a></li><li><a href=#start-screen-and-prologue-screen>Start Screen and Prologue Screen</a></li><li><a href=#play-screen>Play Screen</a><ul><li><a href=#background-scene>Background Scene</a></li><li><a href=#player-scene>Player Scene</a></li><li><a href=#obj-scene>Obj Scene</a></li><li><a href=#ui-scene>UI Scene</a></li></ul></li><li><a href=#stage-selection-screen>Stage Selection Screen</a></li><li><a href=#settings-screen>Settings Screen</a></li><li><a href=#conclusion>Conclusion</a></li></ul></nav></div></details></div><div class=post-content><p>This article is a record of the &ldquo;logic&rdquo; behind the development of &ldquo;Slashing Samurai,&rdquo; a mobile game for iOS released on the App Store on December 15, 2023, using the Godot Engine. However, to avoid excessive length, specific code details will be kept to a minimum.</p><p>Slashing Samurai is available for free download on the App Store. Just click the banner below to get this game!</p><figure><a href=https://apps.apple.com/en/app/slashing-samurai/id6473121142><img loading=lazy src=/images/banners/app_store/Download_on_the_App_Store_Badge_US-UK_RGB_blk_092917.svg width=200px></a></figure><br><hr><h2 id=identifying-necessary-screens>Identifying Necessary Screens</h2><p>I am the type to prioritize visuals. In game development, including the creation of &ldquo;Slashing Samurai&rdquo; in Godot, I started by identifying the necessary screens. I also considered the flow of screen transitions. Although there were many changes in the end, the base stayed relatively close to the initial plan.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/01.webp alt="Note: Screen Transitions"></p><p>Initially, the plan included the following screens:</p><ul><li>Start Screen</li><li>Play Screen (including Pause Screen)</li><li>Stage Selection Screen</li><li>Settings Screen</li></ul><p>In the end, the following screens were added:</p><ul><li>Prologue Screen</li><li>Menu Screen<ul><li>Credit Screen</li><li>Score Screen</li></ul></li><li>Falling Object Record Screen</li></ul><p>This devlog will focus on documenting the screens that were originally planned to be the core of the game.</p><br><hr><h2 id=start-screen-and-prologue-screen>Start Screen and Prologue Screen</h2><p>If we were to pursue a casual game, one might argue that the start screen is unnecessary. However, for developers, are there any screens other than the start screen that they want to prepare (probably)? While I had initially planned for the start screen to transition to the play, settings, and credit screens, looking at the specifications of mobile games in the market, I noticed that many had only a &ldquo;Start&rdquo; button. Believing there might be reasons for this trend, I decided to mimic it without much thought.</p><p>Next, to add a bit of fun to the start screen, I placed the player character, a samurai, in the center and animated it. From the beginning of development, I had the image of the samurai swinging a sword and striking a pose when the &ldquo;Start&rdquo; button is pressed, so I implemented that using the Player scene created for the play screen.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/02.gif alt="Before and After Pressing the Start Button"></p><p>Later on, despite being a casual game, I began to incorporate various elements. Call it passion in the name of foolishness. One of the elements I added was the prologue. Initially, I had set up the start screen to automatically transition to the prologue screen a few seconds after being left idle. However, as the loading time for the next screen started to become noticeable, I decided to place a &ldquo;Prologue&rdquo; button on the start screen, almost saying, &ldquo;Please enjoy while waiting.&rdquo;</p><p><img loading=lazy src=/images/posts/post0005/3_logic/03.gif alt="Transition from Start Screen to Prologue Screen"></p><p>The structure of the prologue screen is quite simple. Essentially, I applied a pattern texture for the background to a TextureRect node and added a Label node with the prologue text applied to it in a ScrollContainer node. I implemented the mechanism for it to automatically flow from bottom to top with the following code:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>const</span> <span class=n>MAX_SCROLL</span> <span class=p>:</span> <span class=kt>int</span> <span class=o>=</span> <span class=mi>5924</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_process</span><span class=p>(</span><span class=n>_delta</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>scroll_container</span><span class=o>.</span><span class=n>scroll_vertical</span> <span class=o>&lt;</span> <span class=n>MAX_SCROLL</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>scroll_container</span><span class=o>.</span><span class=n>scroll_vertical</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span></code></pre></div><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=play-screen>Play Screen</h2><p>The play screen is the main part of the game, so it&rsquo;s quite extensive. With the Game scene as the topmost, I added the necessary scenes below it. Although the final form involves adding various nodes for detailed effects, the basic structure is as follows:</p><ul><li>Game: Node<ul><li>World: Node2D<ul><li>Background: Node2D</li><li>Player: CharacterBody2D</li><li>Obj: RigidBody2D</li></ul></li><li>UI: Control</li></ul></li></ul><h3 id=background-scene>Background Scene</h3><p><img loading=lazy src=/images/posts/post0005/3_logic/04.webp alt="Backgound Scene"></p><p>I created the Background scene and added it as a branch to the World scene. In this scene, I used a TextureRect node with a full rectangular pattern texture for the background, and at the bottom of the screen, I set up a StaticBody2D node as a platform for the player character to walk on.</p><p>As a small detail, I added the movement of the sun from east to west and the waxing and waning of the moon in the development version. The sprites for the sun and moon were created using the Aseprite app.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/04_2.gif alt="Waxing and Waning of the Moon"></p><p>All the changes in the background, such as the movement of the sun and moon, sunrise, sunset, and changes in the color of the sky at night, were consolidated in an AnimationPlayer.</p><h3 id=player-scene>Player Scene</h3><p>I created the Player scene and added it as a branch to the World node. This scene has the CharacterBody2D node at the top, and I set a pixel art samurai as a texture on a Sprite2D node.</p><p>Since the player character needs a hitbox area for the objects falling towards it, I prepared a Hitbox with an Area2D node. Despite being called a &ldquo;box,&rdquo; it&rsquo;s actually a line. To visually indicate this to the player, I added a Line2D node with the same length as the line of the CollisionShape2D of the Hitbox node. I chose a purplish color for the line, matching the image color. I also added a VisibleOnScreenNotifier2D node because there were methods triggered by the appearance and disappearance of the samurai, which I utilized in the script.</p><p>In the latter part of development, I introduced dialogue for the samurai. For this purpose, I created a Bubble scene to display speech balloons üí¨ and added it as a branch to the Player scene. I used the <a href=https://github.com/nathanhoad/godot_dialogue_manager target=_blank>DialogueManager</a>
plugin for this, which proved to be relatively easy to use due to its comprehensive tutorial.</p><p>To add some flair to the samurai&rsquo;s actions, I also included a ghost effect for the player character.</p><p>All the sound effects used for the samurai, such as footsteps, jumping, landing, and the sound of slashing with a sword, were added one by one as AudioStreamPlayer nodes. Despite making the scene tree somewhat redundant, I believed it would be faster to process than loading sound assets on the fly during gameplay.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/05.webp alt="Player Scene"></p><p>User operation for the samurai, including jumping, maintaining height while keeping the touch, and releasing the touch to interact with the hitbox, was implemented in the <code>unhandled_input()</code> method. This method also included closing the samurai&rsquo;s speech balloon üí¨.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_unhandled_input</span><span class=p>(</span><span class=n>_event</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>player_state</span> <span class=o>==</span> <span class=n>PlayerState</span><span class=o>.</span><span class=n>IDLING</span> \
</span></span><span class=line><span class=cl>    <span class=ow>and</span> <span class=nf>is_on_floor</span><span class=p>()</span> \
</span></span><span class=line><span class=cl>    <span class=ow>and</span> <span class=nc>Input</span><span class=o>.</span><span class=nf>is_action_just_pressed</span><span class=p>(</span><span class=s2>&#34;touch&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>speech_state</span> <span class=o>==</span> <span class=n>SpeechState</span><span class=o>.</span><span class=n>SAID</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>bubble</span><span class=o>.</span><span class=nf>hide</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=n>speech_state</span> <span class=o>==</span> <span class=n>SpeechState</span><span class=o>.</span><span class=n>SILENT</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Screen Touched&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>is_touching</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>            <span class=n>hit_box_col_shape</span><span class=o>.</span><span class=n>disabled</span> <span class=o>=</span> <span class=kc>false</span>  <span class=c1># CollisionShape2D of Hitbox node</span>
</span></span><span class=line><span class=cl>            <span class=n>sfx_jump</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>  <span class=c1># AudioStreamPlayer</span>
</span></span><span class=line><span class=cl>            <span class=n>anim_player</span><span class=o>.</span><span class=nf>play</span><span class=p>(</span><span class=s2>&#34;jump&#34;</span><span class=p>)</span>  <span class=c1># AnimationPlayer</span>
</span></span><span class=line><span class=cl>            <span class=n>velocity</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=o>-</span><span class=n>JUMP_SPEED</span>
</span></span><span class=line><span class=cl>            <span class=n>player_state</span> <span class=o>=</span> <span class=n>PlayerState</span><span class=o>.</span><span class=n>JUMPING</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>is_touching</span> \
</span></span><span class=line><span class=cl>    <span class=ow>and</span> <span class=ow>not</span> <span class=nf>is_on_floor</span><span class=p>()</span> \
</span></span><span class=line><span class=cl>    <span class=ow>and</span> <span class=nc>Input</span><span class=o>.</span><span class=nf>is_action_just_released</span><span class=p>(</span><span class=s2>&#34;touch&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Screen Released&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>is_touching</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=n>released</span><span class=o>.</span><span class=nf>emit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>hit_box</span><span class=o>.</span><span class=nf>hide</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>hit_box_col_shape</span><span class=o>.</span><span class=n>disabled</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>player_state</span> <span class=o>==</span> <span class=n>PlayerState</span><span class=o>.</span><span class=n>JUMPING</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>velocity</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=nb>move_toward</span><span class=p>(</span><span class=n>velocity</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1600</span><span class=p>)</span>
</span></span></code></pre></div><h3 id=obj-scene>Obj Scene</h3><p>Obj, short for Object, is the scene for falling objects. I added this scene as a branch to the World scene. The root of the Obj scene is a RigidBody2D node. Since it automatically handles physics calculations, it was straightforward to make the falling objects drop from the top of the screen. Next, I pondered a bit on how to divide the falling objects evenly when they were cut by the samurai. Perhaps it could be easily implemented using shaders if mastered (I still don&rsquo;t know if it&rsquo;s possible). However, since I have no skills with shaders, I had no choice but to proceed with another method. If it&rsquo;s challenging to split the sprite of a falling object directly, why not give the illusion that it is split? That&rsquo;s when the idea struck me: line up cleanly cut pieces from the beginning to make it appear as if they were never cut. The following videos demonstrate the implementation of this method in the early stages of development.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/06.gif alt="Demo of Cutting Objects in Early Development 1"></p><p><img loading=lazy src=/images/posts/post0005/3_logic/07.gif alt="Demo of Cutting Objects in Early Development 2"></p><p>I implemented the pseudo-split effect using the following method:</p><ol><li>Freeze the Obj node when the falling object is cut by the samurai (turn on the Freeze property).</li><li>Add ObjPiece scenes as child nodes to the Obj node, dividing them as needed.</li><li>Position each ObjPiece node to overlap with the parent Obj node&rsquo;s sprite at regular intervals.</li><li>Apply a texture divided using the AtlasTexture class to each ObjPiece node, based on the sprite of the Obj scene.</li><li>Generate CollisionPolygon2D as child nodes for each ObjPiece node based on the transparency of the AtlasTexture.</li></ol><p>The logic for the above was coded in the following scripts.</p><p>Script for the Obj node:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>const</span> <span class=n>PIECE_SCENE</span> <span class=p>:</span> <span class=nc>PackedScene</span> <span class=o>=</span> <span class=nb>preload</span><span class=p>(</span><span class=s2>&#34;res://obj_base/obj_piece/obj_piece.tscn&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nd>@onready</span> <span class=kd>var</span> <span class=n>sprite</span><span class=p>:</span> <span class=nc>Sprite2D</span> <span class=o>=</span> <span class=nx>$Sprite2D</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>generate_obj_pieces</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>tex_image</span> <span class=o>=</span> <span class=n>sprite</span><span class=o>.</span><span class=n>texture</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>tex_size</span> <span class=o>=</span> <span class=n>sprite</span><span class=o>.</span><span class=n>texture</span><span class=o>.</span><span class=nf>get_size</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>h_cuts</span> <span class=o>:=</span> <span class=mi>12</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>v_cuts</span> <span class=o>:=</span> <span class=mi>8</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>frag_size</span> <span class=o>=</span> <span class=nc>Vector2</span><span class=p>(</span><span class=n>tex_size</span><span class=o>.</span><span class=n>x</span> <span class=o>/</span> <span class=n>h_cuts</span><span class=p>,</span> <span class=n>tex_size</span><span class=o>.</span><span class=n>y</span> <span class=o>/</span> <span class=n>v_cuts</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>h_cuts</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=n>v_cuts</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=n>pce</span> <span class=o>=</span> <span class=n>PIECE_SCENE</span><span class=o>.</span><span class=nf>instantiate</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=n>cor</span> <span class=o>=</span> <span class=nc>Vector2</span><span class=p>(</span><span class=n>frag_size</span><span class=o>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>i</span><span class=p>,</span> <span class=n>frag_size</span><span class=o>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>j</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=n>pos</span> <span class=o>=</span> <span class=p>(</span><span class=n>cor</span> <span class=o>+</span> <span class=n>frag_size</span><span class=o>/</span><span class=mi>2</span> <span class=o>-</span> <span class=n>tex_size</span><span class=o>/</span><span class=mi>2</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>pieces</span><span class=o>.</span><span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;add_child&#34;</span><span class=p>,</span> <span class=n>pce</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>pce</span><span class=o>.</span><span class=n>position</span> <span class=o>=</span> <span class=n>pos</span>
</span></span><span class=line><span class=cl>            <span class=n>pce</span><span class=o>.</span><span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;set_sprite&#34;</span><span class=p>,</span> <span class=n>tex_image</span><span class=p>,</span> <span class=n>cor</span><span class=p>,</span> <span class=n>frag_size</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>pce</span><span class=o>.</span><span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;set_col_poly&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>Script for the ObjPiece node:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>set_sprite</span><span class=p>(</span><span class=n>tex_image</span><span class=p>:</span><span class=nc>Texture2D</span><span class=p>,</span> <span class=n>frag_pos</span><span class=p>:</span><span class=nc>Vector2</span><span class=p>,</span> <span class=n>frag_size</span><span class=p>:</span><span class=nc>Vector2</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>tex</span> <span class=o>:=</span> <span class=nc>AtlasTexture</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>tex</span><span class=o>.</span><span class=nf>set_atlas</span><span class=p>(</span><span class=n>tex_image</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>tex</span><span class=o>.</span><span class=nf>set_region</span><span class=p>(</span><span class=nc>Rect2</span><span class=p>(</span><span class=n>frag_pos</span><span class=p>,</span> <span class=n>frag_size</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=n>sprite</span><span class=o>.</span><span class=n>texture</span> <span class=o>=</span> <span class=n>tex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>set_col_poly</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>polygons</span> <span class=o>=</span> <span class=n>sprite</span><span class=o>.</span><span class=nf>create_polygons</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=ow>not</span> <span class=n>polygons</span><span class=o>.</span><span class=nf>is_empty</span><span class=p>():</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>polygons</span><span class=o>.</span><span class=nf>size</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=kd>var</span> <span class=n>col_poly</span> <span class=o>:=</span> <span class=nc>CollisionPolygon2D</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>            <span class=n>col_poly</span><span class=o>.</span><span class=nf>set_polygon</span><span class=p>(</span><span class=n>polygons</span><span class=p>[</span><span class=n>i</span><span class=p>])</span>
</span></span><span class=line><span class=cl>            <span class=n>col_poly</span><span class=o>.</span><span class=n>position</span> <span class=o>-=</span> <span class=n>sprite</span><span class=o>.</span><span class=n>texture</span><span class=o>.</span><span class=nf>get_size</span><span class=p>()</span> <span class=o>/</span> <span class=mi>2</span>
</span></span><span class=line><span class=cl>            <span class=n>col_poly</span><span class=o>.</span><span class=n>disabled</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>            <span class=nf>call_deferred</span><span class=p>(</span><span class=s2>&#34;add_child&#34;</span><span class=p>,</span> <span class=n>col_poly</span><span class=p>)</span>
</span></span></code></pre></div><p>Script for the child Sprite node of the ObjPiece node:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>create_polygons</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>bitmap</span> <span class=o>=</span> <span class=nc>BitMap</span><span class=o>.</span><span class=nf>new</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=n>bitmap</span><span class=o>.</span><span class=nf>create_from_image_alpha</span><span class=p>(</span><span class=n>texture</span><span class=o>.</span><span class=nf>get_image</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>rect</span> <span class=o>:=</span> <span class=nc>Rect2</span><span class=p>(</span><span class=nc>Vector2</span><span class=o>.</span><span class=n>ZERO</span><span class=p>,</span> <span class=n>texture</span><span class=o>.</span><span class=nf>get_size</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>polygons</span> <span class=o>=</span> <span class=n>bitmap</span><span class=o>.</span><span class=nf>opaque_to_polygons</span><span class=p>(</span><span class=n>rect</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>polygons</span>
</span></span></code></pre></div><p>I faced some challenges, such as ObjPiece nodes falling ahead of the Obj node or vice versa while the parent Obj node was falling. In the end, I struggled quite a bit and realized that I needed to set the Freeze property of the ObjPiece (RigidBody2D) root node in the Inspector beforehand and also set the <code>Freeze Mode</code> to <code>Kinematic</code>.</p><p>In the final version, I established collision areas for &ldquo;single cut&rdquo; and &ldquo;multiple cuts&rdquo; on the falling objects and determined the number of divisions for each, branching the script accordingly. &ldquo;Single cut&rdquo; provides a more detailed and satisfying cutting effect.</p><h3 id=ui-scene>UI Scene</h3><p>For the UI during gameplay, I initially placed the HUD at the bottom of the screen. I aligned it with the collision shape of the StaticBody2D node, which represents the samurai&rsquo;s platform in the Background scene. The HUD includes four buttons for &ldquo;Pause,&rdquo; &ldquo;Resume,&rdquo; &ldquo;Open Settings,&rdquo; and &ldquo;Go to Stage Selection.&rdquo; I kept the design of the buttons simple by using royalty-free material only for the icons and adjusting the properties of each node for other design and layout aspects.</p><p>I also created a pause screen as one of the UI scenes. I added a semi-transparent light green ColorRect node covering the entire screen and displayed the text &ldquo;Paused&rdquo; using a Label node. All buttons except the &ldquo;Pause&rdquo; button on the HUD are disabled during the pause. This is a preventive measure against accidental clicks.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/08.webp alt=HUD></p><p>When pressing the &ldquo;Go to Stage Selection&rdquo; button, a confirmation dialog is displayed asking, &ldquo;Are you sure you want to interrupt the game and move to the stage selection screen?&rdquo; The final options for the buttons are &ldquo;Yes&rdquo; and &ldquo;No,&rdquo; but in the early stages of development, I used wording like &ldquo;Understood(ÊâøÁü•)&rdquo; and &ldquo;Decline(Êñ≠„Çã)&rdquo; to create a more atmospheric feel. However, I decided to discard this in favor of clarity over atmosphere.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/09.webp alt="Confirmation Dialog"></p><p>Towards the end of development, I added a tutorial. Although I initially aimed for gameplay that could be easily understood without a tutorial, I thought it would be nice to have the option to view a tutorial at any time. Therefore, I set it up so that the tutorial starts when you press the (?) icon in the upper right corner of the screen during a pause.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/10.webp alt=Tutorial></p><p>I implemented hitbox feedback for when the samurai sheaths the sword and when falling objects are cut. A &ldquo;Clean Cut (Ippon)&rdquo; or &ldquo;Skillful Cut (Waza-ari)&rdquo; hitbox indication is displayed. Initially, there was a memory leak issue related to the animation that resized the font from an extra-large size to a standard size in an instant. In the end, I discovered that directly changing the <code>scale</code> property value is the correct approach for animating text size changes in a Label node, rather than manipulating the <code>Theme Overrides Font Size</code> property in AnimationPlayer. It&rsquo;s essential to be cautious about assumptions.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/11.gif alt="Hitbox Display Animation"></p><p>I also implemented post-stage options buttons. The options are &ldquo;Proceed to Next,&rdquo; &ldquo;Retry,&rdquo; and &ldquo;Stage Selection.&rdquo; Considering mobile casual gaming scenarios, where players might be on public transportation and sometimes operating the game with one hand, I placed these option buttons at the bottom of the screen. Since &ldquo;Proceed to Next&rdquo; is likely the most frequently pressed, I positioned it at the bottom.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/12.webp alt="Post-Stage Options Buttons"></p><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=stage-selection-screen>Stage Selection Screen</h2><p>I created the stage selection screen separately from the gameplay screen. From this screen, you can navigate to the settings, menu, and falling object records screens. The menu screen further provides links to the score screen, credit/license screen, App review page, and game data deletion feature.</p><p>Initially, I prepared 200 stage selection icons inside a ScrollContainer, and the VisibleOnScreenEnabler2D node controlled their visibility based on whether they were on or off-screen to conserve computer resources. However, even with this logic, the scrolling motion felt sluggish, so I changed the structure. I added level change buttons and adjusted the display to show only 20 stage icons for one level within one screen. This eliminated the sluggishness.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/13.gif alt="Stage Selection Screen"></p><p>Similar to the gameplay screen, I added a tutorial for the stage selection screen, assuming some users might find the controls a bit confusing. You can access the tutorial at any time by pressing the (?) icon in the upper right corner.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/14.gif alt="Stage Selection Screen Tutorial"></p><br><hr><h2 id=settings-screen>Settings Screen</h2><p>The structure of the settings screen itself is straightforward. I used Container-type nodes to organize the layout. The button icons use royalty-free material.</p><p><img loading=lazy src=/images/posts/post0005/3_logic/15.webp alt="Settings Screen"></p><p>All buttons have Toggle Mode enabled, and the <code>toggled(button_pressed: bool)</code> signal is connected to the root node&rsquo;s script. For example, the signal of the BGM button is connected to the following method:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>func</span> <span class=nf>_on_background_music_button_toggled</span><span class=p>(</span><span class=n>button_pressed</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>button_pressed</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>Gamedata</span><span class=o>.</span><span class=n>bgm_enabled</span> <span class=o>=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Gamedata</span><span class=o>.</span><span class=n>sfx_enabled</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>enabled_sound_player</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>bgm_disabled</span><span class=o>.</span><span class=nf>emit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>Gamedata</span><span class=o>.</span><span class=n>bgm_enabled</span> <span class=o>=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>Gamedata</span><span class=o>.</span><span class=n>sfx_enabled</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>disabled_sound_player</span><span class=o>.</span><span class=nf>play</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>bgm_enabled</span><span class=o>.</span><span class=nf>emit</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>bgm_button</span><span class=o>.</span><span class=nf>release_focus</span><span class=p>()</span>
</span></span></code></pre></div><p>In the above code, <code>Gamedata</code> is a script loaded using Godot&rsquo;s Autoload feature. To save settings, a gamedata.gd script was created to handle save/load functionality, and it gets automatically loaded at the start of the game. The script code is as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-GDScript data-lang=GDScript><span class=line><span class=cl><span class=kd>const</span> <span class=n>OPTIONS_PATH</span> <span class=o>:=</span> <span class=s2>&#34;user://options.save&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>bgm_enabled</span> <span class=o>:=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>sfx_enabled</span> <span class=o>:=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>background_pattern</span> <span class=o>:=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>ippon_only</span> <span class=o>:=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>speech_bubble_enabled</span> <span class=o>:=</span> <span class=kc>true</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=n>speech_bubble_auto_hide</span> <span class=o>:=</span> <span class=kc>false</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>save_options</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>options</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;bgm_enabled&#34;</span><span class=p>:</span> <span class=n>bgm_enabled</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;sfx_enabled&#34;</span><span class=p>:</span> <span class=n>sfx_enabled</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;background_pattern&#34;</span><span class=p>:</span> <span class=n>background_pattern</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;ippon_only&#34;</span><span class=p>:</span> <span class=n>ippon_only</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;speech_bubble_enabled&#34;</span><span class=p>:</span> <span class=n>speech_bubble_enabled</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;speech_bubble_auto_hide&#34;</span><span class=p>:</span> <span class=n>speech_bubble_auto_hide</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=nc>FileAccess</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>OPTIONS_PATH</span><span class=p>,</span> <span class=nc>FileAccess</span><span class=o>.</span><span class=n>WRITE</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>file</span><span class=o>.</span><span class=nf>store_var</span><span class=p>(</span><span class=n>options</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>load_options</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>file</span> <span class=o>=</span> <span class=nc>FileAccess</span><span class=o>.</span><span class=nf>open</span><span class=p>(</span><span class=n>OPTIONS_PATH</span><span class=p>,</span> <span class=nc>FileAccess</span><span class=o>.</span><span class=n>READ</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>!</span><span class=n>file</span><span class=p>:</span> <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kd>var</span> <span class=n>options</span> <span class=o>=</span> <span class=n>file</span><span class=o>.</span><span class=nf>get_var</span><span class=p>()</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>!</span><span class=n>options</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;bgm_enabled&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>bgm_enabled</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;bgm_enabled&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;sfx_enabled&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>sfx_enabled</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;sfx_enabled&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;background_pattern&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>background_pattern</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;background_pattern&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;ippon_only&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>ippon_only</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;ippon_only&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;speech_bubble_enabled&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>speech_bubble_enabled</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;speech_bubble_enabled&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>options</span><span class=o>.</span><span class=nf>has</span><span class=p>(</span><span class=s2>&#34;speech_bubble_auto_hide&#34;</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>speech_bubble_auto_hide</span> <span class=o>=</span> <span class=n>options</span><span class=p>[</span><span class=s2>&#34;speech_bubble_auto_hide&#34;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=n>file</span><span class=o>.</span><span class=nf>close</span><span class=p>()</span>
</span></span></code></pre></div><br><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4952908839423901" crossorigin=anonymous></script><p><ins class=adsbygoogle style=display:block;text-align:center data-ad-layout=in-article data-ad-format=fluid data-ad-client=ca-pub-4952908839423901 data-ad-slot=9419515863></ins></p><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><hr><h2 id=conclusion>Conclusion</h2><p>That concludes the portion of this development log related to the logic of &ldquo;Mono Kiri Samurai.&rdquo;</p><p>While I cannot speak for 3D games, for 2D games, I found that by combining various classes provided by Godot, you can achieve almost anything you want. However, simultaneously translating game ideas into algorithms, reading documentation to implement them, and validating these processes can require a considerable amount of patience, as I have come to understand.</p><p>I hope this development log serves as a helpful resource for someone involved in game development.</p><br></div><footer class=post-footer><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on x" href="https://x.com/intent/tweet/?text=%f0%9f%93%94%20Devlog%3a%20Slashing%20Samurai%20-%20Logic&amp;url=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f&amp;hashtags=GameDev%2cIndieDev%2cDevlog%2cMobileGame%2ciOS%2cSlashingSamurai"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f&title=%f0%9f%93%94%20Devlog%3a%20Slashing%20Samurai%20-%20Logic"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share üìî Devlog: Slashing Samurai - Logic on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fwww.peanuts-code.com%2fen%2fposts%2fpost0005_slashing_samurai_devlog_3%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li></ul><ul class=post-tags><li><a href=https://www.peanuts-code.com/en/tags/gamedev/>GameDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/indiedev/>IndieDev</a></li><li><a href=https://www.peanuts-code.com/en/tags/devlog/>Devlog</a></li><li><a href=https://www.peanuts-code.com/en/tags/mobilegame/>MobileGame</a></li><li><a href=https://www.peanuts-code.com/en/tags/ios/>IOS</a></li><li><a href=https://www.peanuts-code.com/en/tags/slashingsamurai/>SlashingSamurai</a></li></ul><nav class=paginav><a class=prev href=https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_4/><span class=title>¬´ Prev</span><br><span>üìî Devlog: Slashing Samurai - Reflection</span>
</a><a class=next href=https://www.peanuts-code.com/en/posts/post0005_slashing_samurai_devlog_2/><span class=title>Next ¬ª</span><br><span>üìî Devlog: Slashing Samurai - Assets</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://www.peanuts-code.com/en/>Peanuts Code</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>